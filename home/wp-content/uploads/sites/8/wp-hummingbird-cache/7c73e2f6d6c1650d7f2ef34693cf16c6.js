/** handles (scripts) :cs-core | cs-builder  */!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CS_core=e()}}(function(){var e;return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i={components:{},loadedComponentGroups:[],RegisteredComponents:{},_initChannel:function(){this.channelName="cs",this.channel=Backbone.Radio.channel(this.channelName);var e=this;Backbone.Radio.debugLog=function(t,n,i){Backbone.Radio.DEBUG&&console&&console.warn&&e.radioDebug&&console.warn(Backbone.Radio._debugText(t,n,i))}},initialize:function(){this.Config=this._booleanize(this.Config),this.events=Backbone.Radio.channel("cs:event"),this.Config.debug&&(Backbone.Radio.DEBUG=!0),this.bootTime=(new Date).getTime(),this.registerComponents(e("./components"))},onBeforeStart:function(e){this.loadComponents("common")},onStart:function(){jQuery(_.bind(function(){this.loadComponents("start")},this))},loadComponents:function(e){this.Registry[e]&&_.each(this.Registry[e],function(e){this.loadComponent(e)},this)},loadComponent:function(e){return this.components[e]?this.components[e]:void(this.components[e]=new this.RegisteredComponents[e]({cs:this}))},component:function(e){return this.components[e]?this.components[e]:{}},registerComponents:function(e){this.RegisteredComponents=_.extend(e,this.RegisteredComponents)},updateConfig:function(e){this.Config=_.deepExtend(this._booleanize(e),this.Config||{})},updateRegistry:function(e){_.each(e,function(e,t){var n=this.Registry[t]||[];this.Registry[t]=_.unique(_.union(n,e))},this)},loadTemplates:function(e){this.Templates=_.extend(this.Templates||{},e)},config:function(e){return _.has(this.Config,e)?this.Config[e]:null},debug:function(){return this.config("debug")},_booleanize:function(e){return _.each(e,function(t,n){"true"==t&&(e[n]=!0),"false"==t&&(e[n]=!1)}),e}};_.extend(i,e("./modules/cs")),i=Cornerstone.Mn.Application.extend(i),t.exports=function(e,t){(window.cs=new i({Config:e,Registry:t})).start({})}},{"./components":12,"./modules/cs":25}],2:[function(e,t,n){t.exports=Backbone.Collection.extend({model:e("../models/control")})},{"../models/control":15}],3:[function(e,t,n){t.exports=Backbone.Collection.extend({model:e("../models/element-definition")})},{"../models/element-definition":16}],4:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({model:e("../models/element"),comparator:function(e){return e.get("rank")},constructor:function(e,t){this.on("update:position",this.updatePosition),Backbone.Collection.apply(this,arguments),this.on("add",this.pageDirty),this.on("remove",this.pageDirty),this.on("sort",this.pageDirty)},create:function(e,t,n){var n=n||{};e._type||cs.warn("Elements can not be created without a type",e);var i=new this.model(e,t);return n.replace&&_.isFunction(n.replace.destroy)&&(n.replace.trigger("imminent:replacement",i),n.replace.destroy()),_.isFunction(n.after)&&n.after(i),this.updatePosition(i,_.isFinite(n.position)?n.position:this.length),i.trigger("created",i),i},pageDirty:function(){cs.channel.trigger("page:unsaved")},updatePosition:function(e,t){this.remove(e),this.each(function(e,n){var i=n;n>=t&&(i+=1),e.set("rank",i)}),e.set("rank",t),this.add(e,{at:t}),this.sort(),this.each(function(e){e.trigger("position:updated")})},getParent:function(){return this.parent||null}})},{"../models/element":17,"./proxyable":6}],5:[function(e,t,n){t.exports={Proxyable:e("./proxyable"),Element:e("./element"),ElementDefinition:e("./element-definition"),Control:e("./control"),Template:e("./template"),Setting:e("./setting")}},{"./control":2,"./element":4,"./element-definition":3,"./proxyable":6,"./setting":7,"./template":8}],6:[function(e,t,n){var i=Backbone.Collection.extend({model:e("../models/proxyable"),toProxy:function(){var e=new Backbone.Collection;return this.each(function(t){var n=t.getDefaults();e.add(new t.proxyClass(_.extend(n,t.proxyData()),{source:t,defaults:n}))}),e}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{"../models/proxyable":19}],7:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({model:e("../models/setting")})},{"../models/setting":20,"./proxyable":6}],8:[function(e,t,n){var i=Backbone.Collection.extend({model:e("../models/template"),section:function(e){return bySection=this.filter(function(t){return t.get("section")===e}),new i(bySection)}});t.exports=i},{"../models/template":21}],9:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){Cornerstone.Mn.Renderer=e("../utility/renderer")}})},{"../utility/renderer":29}],10:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.elements=Backbone.Radio.channel("cs:elements"),this.listenTo(cs.elements,"delete",this.deleteEl),this.listenTo(cs.elements,"erase",this.erase),this.listenTo(cs.elements,"add:item",this.add),this.listenTo(cs.elements,"duplicate",this.duplicate)},deleteEl:function(e){e.model&&(e.model.destroy({success:function(){e.success&&_.defer(e.success)}}),cs.elements.trigger("element:deleted"))},erase:function(e){e.model&&(_.isEmpty(e.model.elements)||e.model.elements.reset(),e.success&&_.defer(e.success))},add:function(e,t,n,i){if(e&&t.elements){var r={_type:e};if(n){var i=i||"title";r[i]=n.replace("%s",t.elements.length+1)}t.elements.create(r)}},duplicate:function(e,t){e.updateChildData();var n=e.toJSON(),t=t||"title";n[t]&&(n[t]=cs.l18n("sortable-duplicate").replace("%s",n[t])),e.collection.create(n,_.clone(e.options),{position:e.collection.indexOf(e)+1,after:function(t){cs.render.shadow(t,e.cid)}})}})},{}],11:[function(e,t,n){t.exports=Cornerstone.Component.extend({searchOptions:{caseSensitive:!1,includeScore:!0,shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,keys:["title","name","transposed"]},initialize:function(){this.contexts={},this.library=new Cornerstone.Collections.ElementDefinition;var e=this.cs.config("elementDefinitions");_.isArray(e)&&this.library.add(e),this.cs.elementLibrary=this},lookup:function(e){var t=this.library.findWhere({name:e});return t?t:this.library.findWhere({name:"undefined"})},all:function(){return new Cornerstone.Collections.ElementDefinition(this.library.models)},filter:function(e){return new Cornerstone.Collections.ElementDefinition(this.library.filter(e))},registerContext:function(e,t){var n=this.filter(t),i=n.map(function(e){var t=e.get("ui").title,n=t.split(" ");return n.reverse(),{title:t,name:e.get("name"),transposed:n.join(" ")}});this.contexts[e]={collection:n,searchIndex:i}},get:function(e){var t=this.contexts[e];return t&&t.collection?t.collection:this.all()},search:function(e,t){var n="",i=this.contexts[e];if(i&&i.searchIndex&&""!=t){var r=new Cornerstone.Vendor.Fuse(i.searchIndex,this.searchOptions);n=_.map(r.search(t),function(e){return e.name})}return n}})},{}],12:[function(e,t,n){t.exports={common:e("./common"),"element-library":e("./element-library"),"element-handler":e("./element-handler")}},{"./common":9,"./element-handler":10,"./element-library":11}],13:[function(e,t,n){e("./modules/bootstrap"),e("./app-mk2")(csCoreData,{common:["common","element-library","element-handler"]})},{"./app-mk2":1,"./modules/bootstrap":23}],14:[function(e,t,n){var i=Backbone.Model.extend({initialize:function(e,t){this.source=t.source||null;t.defaults||null;this.source&&(this.elements=t.source.elements||null,this.definition=t.source.definition||null),this.listenTo(this.source,"children:updated",function(){this.trigger("children:updated")}),this.listenTo(this.source,"position:updated",function(){this.trigger("position:updated")}),this.listenTo(this.source,"remove destroy",function(){this.destroy()})},getIndex:function(){return this.source.getIndex()},getSource:function(){return this.source},getSourceParent:function(){return this.source.collection.parent},getSourceGrandParent:function(){return this.source.collection.parent.collection.parent},refresh:function(){this.set(_.clone(this.source.attributes),{silent:!0})}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{}],15:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{name:null,key:null,type:null,ui:{},options:{},context:"all",condition:{}},initialize:function(){this.proxy=null,_.isNull(this.get("key"))&&this.set("key",this.get("name"))},setProxy:function(e){this.proxy=e,this.trigger("set:proxy")}})},{}],16:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{name:null,ui:null,flags:null,active:!0,base_defaults:{},defaults:{},controls:[]},getDefaults:function(e){return this.get(e?e+"_defaults":"defaults")},getControls:function(e){var e=e||"all";return _.filter(this.get("controls"),function(t){return"all"==e&&0!==t.context.indexOf("_")?!0:t.context==e},this)}})},{}],17:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({idAttribute:"_elID",proxyClass:e("./control-proxy"),proxyExclusions:["elements"],defaults:{_type:"undefined"},initialize:function(e){var t,n,i,r;this.definition=this.getDefinition(),(r=this.definition.get("_layout_defaults"))&&_.each(r,function(e,t){this.has(t)||this.set(t,e)},this),this.elements=new Cornerstone.Collections.Element,this.elements.parent=this,t=this.get("elements"),n=this.definition.get("defaults"),i=_.isUndefined(t)?n.elements?_.clone(n.elements):[]:t,i&&!_.isEmpty(i)&&this.elements.add(i),this.listenTo(this.elements,"update",function(){this.trigger("children:updated")}),this.on("change",function(e,t){this.pageDirty(),this.collection&&this.collection.trigger("model:change",e,t),this.elements.isEmpty()||_.isEmpty(_.omit(e.changed,["elements"]))||this.elements.each(function(n){n.trigger("parent:change",e,t)})}),this.on("update:child:data",this.updateChildData),this.listenTo(this.elements,"sort",this.updateChildData),this.listenTo(this.elements,"remove",this.updateChildData),this.listenTo(this.elements,"model:change",this.updateChildData),this.trigger("update:child:data"),this.on("destroy",function(){try{this.elements.invoke("destroy")}catch(e){}})},getDefaults:function(){return _.clone(this.definition.getDefaults())},updateChildData:function(){return this.elements.isEmpty()?void this.set("elements",[]):(this.elements.invoke("updateChildData"),void this.set("elements",this.elements.toJSON()))},getDataForChild:function(){return _.omit(this.toJSON(),["elements"])},getDefinition:function(){return cs.elementLibrary.lookup(this.get("_type"))},eraseChildren:function(){this.elements.isEmpty()||(this.elements.invoke("destroy"),this.updateChildData())},getIndex:function(){return this.collection.indexOf(this)},toJSON:function(){return _.omit(i.prototype.toJSON.apply(this,arguments),["rank"])},atFloor:function(){var e=this.definition.get("flags");return e.elements&&e.elements.floor&&this.elements.length<=e.elements.floor},pageDirty:function(){cs.channel.trigger("page:unsaved")}})},{"./control-proxy":14,"./proxyable":19}],18:[function(e,t,n){var i={Element:e("./element"),ElementDefinition:e("./element-definition"),Control:e("./control"),Setting:e("./setting"),Proxyable:e("./proxyable"),Template:e("./template"),ControlProxy:e("./control-proxy")};t.exports=i},{"./control":15,"./control-proxy":14,"./element":17,"./element-definition":16,"./proxyable":19,"./setting":20,"./template":21}],19:[function(e,t,n){var i=Backbone.Model.extend({proxyClass:Backbone.Model,proxyExclusions:[],constructor:function(e,t){var n=e||{};t||(t={}),this.cid=_.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=_.defaults({},n,_.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},setMeta:function(e,t){var n=this.get("_csmeta")||{},i=_.clone(n);return n[e]=t,this.set({_csmeta:n},{silent:!0}),this.trigger("meta:change",e,t,i,this),this.trigger("meta:change:"+e,t,i[e],this),this},getMeta:function(e){var t=this.get("_csmeta")||{};return _.isUndefined(e)?t:_.isUndefined(t[e])?void 0:t[e]},toJSON:function(){var e=Backbone.Model.prototype.toJSON.apply(this,arguments);return!_.isEmpty(this.meta)&&_.isObject(this.meta)&&(e._csmeta=this.meta),e},clone:function(){return Backbone.Model.prototype.toJSON.apply(this,arguments)},proxyData:function(){return _.omit(this.attributes,this.proxyExclusions)},toProxy:function(){var e=this.getDefaults();return new this.proxyClass(_.extend(e,this.proxyData()),{source:this,defaults:e})},proxyUpdate:function(e){var t=this.getDefaults();_.each(e,function(e,n){"disabled"!=n&&(_.isEqual(t[n],e)?this.unset(n):this.set(n,e))},this)},getDefaults:function(){return{}}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{}],20:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({idAttribute:"_sID",proxyClass:e("./control-proxy"),proxyExclusions:["elements"],defaults:{_section:"undefined"},initialize:function(e){var t,n,i;this.section=this.getSection(),this.elements=new Cornerstone.Collections.Element,this.elements.parent=this,t=this.get("elements"),n=this.section.get("defaults"),i=_.isEmpty(t)?n.elements?n.elements:[]:t,i&&!_.isEmpty(i)&&this.elements.add(i),this.listenTo(this.elements,"update",function(){this.trigger("children:updated")}),this.on("change",function(e,t){this.collection&&this.collection.trigger("model:change",e,t)}),this.on("update:child:data",this.updateChildData)},getDefaults:function(){return _.clone(this.section.get("defaults"))},updateChildData:function(){return this.elements.isEmpty()?void this.set("elements",[]):(this.elements.invoke("updateChildData"),void this.set("elements",this.elements.toJSON()))},getSection:function(){return cs.settingSections.findWhere({name:this.get("_section")})},eraseChildren:function(){this.elements.isEmpty()||(this.elements.invoke("destroy"),this.updateChildData())},getIndex:function(){return this.collection.indexOf(this)},toJSON:function(){return _.omit(i.prototype.toJSON.apply(this,arguments),["rank"])}})},{"./control-proxy":14,"./proxyable":19}],21:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{title:"Generic Block",section:"user-blocks",type:"block",elements:[]}})},{}],22:[function(e,t,n){var i=!1,r=!1;t.exports=function(e,t,n){var n=n||{},s=cs.config("_cs_nonce");return i=i||cs.config("useLegacyAjax"),Backbone.$.Deferred(function(o){function a(e){e.extraneous&&console.warn("Cornerstone has recovered from extraneous output found in an AJAX response. Logging original response.",{original:e.extraneous}),e.php_errors&&(console.warn("Cornerstone detected PHP Errors while generating an AJAX response. Logging errors..."),_.isArray(e.php_errors)?console.log(_.reduce(e.php_errors,function(e,t){return e+t+"\n"},"")):console.log(e.php_errors))}function u(e){if(e.responseJSON.debug&&a(e.responseJSON.debug),!r&&e.responseJSON.failed_php_input)return r=!0,void c();var t=[e.responseJSON.data||{},e];e.responseJSON.success?o.resolveWith(this,t):(o.rejectWith(this,t),t.message&&cs.warn(message))}function h(e){if(e.responseText){var t=e.responseText.match(/{"success":\w*?,"data.*/),n={};try{n=JSON.parse(t[0])}catch(r){console.warn("Failed to recover from malformed AJAX response: ",e)}if(_.isObject(n.data)&&_.isBoolean(n.success))return console.warn("Recovered from malformed AJAX response: ",e),e.responseJSON=n,void u(e)}i?(console.log("Unhandled AJAX error. Expecting valid JSON from response.",e),o.rejectWith(this,[{},e])):(cs.warn("Failed AJAX request. Switching to fallback.",e),Backbone.$.ajax({type:"POST",url:cs.config("fallbackAjaxUrl")+"?action=cs_legacy_ajax",data:{enable:!0,_cs_nonce:s},complete:function(){i=!0,c()}}))}function c(){var o=JSON.stringify(t||{}),a=i||r?{data:Cornerstone.Vendor.Base64.encode(o)}:o,c=i?"fallbackAjaxUrl":"ajaxUrl",l=cs.config(c).split("?"),d=l[1]?"&"+l[1]:"";a._cs_nonce=s;var f=_.defaults(_.omit(n,["success","error","always"]),{type:"POST",url:l[0]+"?action="+e+d,context:this,data:a,dataType:"json"});Backbone.$.ajax(f).done(function(e,t,n){n.responseJSON?u(n):h(n)}).fail(function(e){e.responseJSON?u(e):h(e)})}n.always&&o.always(n.always),n.success&&o.done(n.success),n.error&&o.fail(n.error),c()}).promise()}},{}],23:[function(e,t,n){window.Cornerstone=window.CS={};var i=e("./../../vendor/underscore-shim.js");e("../../vendor/string_score"),e("../../vendor/equalize"),e("backbone.radio"),e("backbone.stickit"),i.mixin({deepExtend:e("underscore-deep-extend")(i)}),Cornerstone.Vendor={Base64:e("../../vendor/base64"),Color:e("../../vendor/color"),FileSaver:e("../../vendor/FileSaver"),Fuse:e("fuse.js"),Marionette:e("backbone.marionette"),moment:e("moment"),bowser:e("bowser"),Pikaday:e("pikaday"),svg4everybody:e("svg4everybody")},Cornerstone.Helpers={csnull:function(){return null}},e("es6-promise").polyfill(),Cornerstone.Vendor.svg4everybody(),Cornerstone.Mn=Cornerstone.Vendor.Marionette,Cornerstone.Component=e("./component-base"),Cornerstone.Models=e("../models"),Cornerstone.Collections=e("../collections"),Cornerstone.InspectionSupervisor=e("./inspection-supervisor"),Cornerstone.Post=e("./post"),Cornerstone.serial=e("./serial"),t.exports=Cornerstone},{"../../vendor/FileSaver":31,"../../vendor/base64":33,"../../vendor/color":34,"../../vendor/equalize":35,"../../vendor/string_score":37,"../collections":5,"../models":18,"./../../vendor/underscore-shim.js":38,"./component-base":24,"./inspection-supervisor":26,"./post":27,"./serial":28,"backbone.marionette":40,"backbone.radio":41,"backbone.stickit":42,bowser:43,"es6-promise":46,"fuse.js":47,moment:48,pikaday:49,svg4everybody:50,"underscore-deep-extend":51}],24:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({constructor:function(e){this.options=e||{},this.cs=this.getOption("cs"),Cornerstone.Mn.Object.call(this,e)}})},{}],25:[function(e,t,n){t.exports={ajax:e("./ajax"),template:function(){return this.Templates[1==arguments.length?arguments[0]:arguments.join("/")]},icon:function(e){if(e){var e=e.split("/"),t=cs.config("iconMaps"),n=e[0];if(t[n]){e.shift();var i=e.join("-"),r=t[n]+"#"+i,s='<svg role="img" class="cs-custom-icon"><use xlink:href="'+r+'"/></svg>';return s}}return'<i class="cs-icon fallback" data-cs-icon="'+this.fontIcon()+'"><!-- icon '+n+" not found--></i>"},elementIcon:function(e){return this.icon(cs.elementLibrary.lookup(e).get("icon"))},fontIcon:function(){return String.fromCharCode("0x"+this.fontIconLookup(arguments[0]||void 0))},fontIconLookup:function(){var e="spinner",t=arguments[0]||e;return this.Config.fontAwesome[t]?this.Config.fontAwesome[t]:this.Config.fontAwesome[e]},l18n:function(e){return this.Config.strings[e]||""},log:function(){this.Config.debug&&console.log.apply(console,arguments)},warn:function(){this.Config.debug&&(console.warn.apply(console,arguments),console.trace())},controlLookup:function(e){return Cornerstone.ControlViews[e]||Cornerstone.ControlViews.Base},classMap:function(e,t){var e=e||"undefined",n=!1,i=cs.config("cssClassMap");if(_.isArray(t)||(n=!0,t=[t]),!i[e])return console.warn("Cornerstone classMap | group "+e+" doesn't exist in class map."),[""];var r=_.map(t,function(t){return _.isUndefined(i[e][t])?"":i[e][t]});return n?r[0]:r},"debugger":function(e){if(this.config("debug")){var e=e||5e3;setTimeout(function(){},e)}}}},{"./ajax":22}],26:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({initialize:function(e){this.controls=new Cornerstone.Collections.Control,this.reset(),e&&(e.length?_.each(e,function(e){this.source(e)},this):this.source(e),this.rebuildControls())},source:function(e){if(e&&e.name&&e.source&&e.controls){this.groups[e.name]||(this.groups[e.name]={controls:new Cornerstone.Collections.Control});var t=this.groups[e.name];t.source=e.source,t.proxy=e.source.toProxy(),t.controls.reset(),this.groups[e.name]=t,this.listenTo(t.proxy,"change",function(e,n){t.source.proxyUpdate(e.changed)}),this.listenTo(t.proxy,"reset:key",function(e){t.source.unset(e)}),this.listenTo(t.controls,"add",function(e,n){e.setProxy(t.proxy)}),this.listenTo(t.controls,"reset",function(e){e.invoke("setProxy",t.proxy)}),t.controls.add(e.controls)}},reset:function(){this.groups={},this.controls.reset()},rebuildControls:function(){this.controls.reset(),_.each(this.groups,function(e){this.controls.add(e.controls.models)},this)}})},{}],27:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({initialize:function(e){this.data=new Cornerstone.Models.Element,e&&e.post_id&&(this.data.set("post_id",e.post_id),e.elements&&this.data.elements.add(e.elements))},elements:function(){return this.data.elements},set:function(e,t){return this[e]?this[e]=t:this.data.set(e,t)},get:function(e){return this[e]?this[e]:this.data.get(e)},toJSON:function(){this.data.elements.invoke("updateChildData");var e=this.data.toJSON();return e.elements=this.data.elements.toJSON(),e}})},{}],28:[function(e,t,n){t.exports=function(t){var n,i=e("./../../vendor/jquery-shim.js");return _.each(t,function(e){var t=function(){var t=i.Deferred();return e(function(){t.resolve.apply(this,arguments)}),t.promise()};n=n?n.then(t):t()}),n}},{"./../../vendor/jquery-shim.js":36}],29:[function(e,t,n){t.exports={templateHelpers:e("./template-helpers"),render:function(e,t,n){var t=t||{};if(n&&_.isFunction(n.triggerMethod)&&n.triggerMethod("template:data:ready",t),!1!==e){if(!e)throw new Cornerstone.Mn.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var i=_.isFunction(e)?e:cs.template(e);if(!i)throw new Cornerstone.Mn.Error({name:"TemplateLookupError",message:"Template not found in precompiled templates: "+e});return i(_.extend(t,this.templateHelpers))}}}},{"./template-helpers":30}],30:[function(e,t,n){var i={l18n:function(){return cs.l18n.apply(cs,arguments)},getIcon:function(){return cs.icon.apply(cs,arguments)},fontIcon:function(){return cs.fontIcon.apply(cs,arguments)},render:function(){return CS.Mn.Renderer.render.apply(this,arguments)},debug:function(e){return""}};cs.debug()&&(i.debug=function(e){return e}),t.exports=i},{}],31:[function(t,n,i){var r=r||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,s=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=e.webkitRequestFileSystem,a=e.requestFileSystem||o||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},h="application/octet-stream",c=0,l=500,d=function(t){var i=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,l)},f=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(s){u(s)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},g=function(t,u,l){l||(t=p(t));var g,m,v,_=this,y=t.type,b=!1,w=function(){f(_,"writestart progress write writeend".split(" "))},M=function(){if((b||!g)&&(g=n().createObjectURL(t)),m)m.location.href=g;else{var i=e.open(g,"_blank");void 0==i&&"undefined"!=typeof safari&&(e.location.href=g)}_.readyState=_.DONE,w(),d(g)},C=function(e){return function(){return _.readyState!==_.DONE?e.apply(this,arguments):void 0}},x={create:!0,exclusive:!1};return _.readyState=_.INIT,u||(u="download"),r?(g=n().createObjectURL(t),i.href=g,i.download=u,void setTimeout(function(){s(i),w(),d(g),_.readyState=_.DONE})):(e.chrome&&y&&y!==h&&(v=t.slice||t.webkitSlice,t=v.call(t,0,t.size,h),b=!0),o&&"download"!==u&&(u+=".download"),(y===h||o)&&(m=e),a?(c+=t.size,void a(e.TEMPORARY,c,C(function(e){e.root.getDirectory("saved",x,C(function(e){var n=function(){e.getFile(u,x,C(function(e){e.createWriter(C(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),_.readyState=_.DONE,f(_,"writeend",t),d(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&M()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=_["on"+e]}),n.write(t),_.abort=function(){n.abort(),_.readyState=_.DONE},_.readyState=_.WRITING}),M)}),M)};e.getFile(u,{create:!1},C(function(e){e.remove(),n()}),C(function(e){e.code===e.NOT_FOUND_ERR?n():M()}))}),M)}),M)):void M())},m=g.prototype,v=function(e,t,n){return new g(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(m.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof n&&n.exports?n.exports.saveAs=r:"undefined"!=typeof e&&null!==e&&null!=e.amd&&e([],function(){return r})},{}],32:[function(e,t,n){window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims.Backbone||(window.CornerstoneShims.Backbone=window.Backbone),t.exports=window.CornerstoneShims.Backbone},{}],33:[function(e,t,n){function i(){this.buffer=[]}function r(e){this._input=e,this._index=-1,this._buffer=[]}function s(e){this._input=e,this._index=-1,this._buffer=[]}i.prototype.append=function(e){return this.buffer.push(e),this},i.prototype.toString=function(){return this.buffer.join("")};var o={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){for(var t=new i,n=new r(e);n.moveNext();){var s=n.current;n.moveNext();var o=n.current;n.moveNext();var a=n.current,u=s>>2,h=(3&s)<<4|o>>4,c=(15&o)<<2|a>>6,l=63&a;isNaN(o)?c=l=64:isNaN(a)&&(l=64),t.append(this.codex.charAt(u)+this.codex.charAt(h)+this.codex.charAt(c)+this.codex.charAt(l))}return t.toString()},decode:function(e){for(var t=new i,n=new s(e);n.moveNext();){var r=n.current;if(128>r)t.append(String.fromCharCode(r));else if(r>191&&224>r){n.moveNext();var o=n.current;t.append(String.fromCharCode((31&r)<<6|63&o))}else{n.moveNext();var o=n.current;n.moveNext();var a=n.current;t.append(String.fromCharCode((15&r)<<12|(63&o)<<6|63&a))}}return t.toString()}};r.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),128>e?this.current=e:e>127&&2048>e?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},s.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=o.codex.indexOf(this._input.charAt(++this._index)),t=o.codex.indexOf(this._input.charAt(++this._index)),n=o.codex.indexOf(this._input.charAt(++this._index)),i=o.codex.indexOf(this._input.charAt(++this._index)),r=e<<2|t>>4,s=(15&t)<<4|n>>2,a=(3&n)<<6|i;return this.current=r,64!=n&&this._buffer.push(s),64!=i&&this._buffer.push(a),!0}},t.exports=o},{}],34:[function(e,t,n){!function(e,i){var r=function(e,t){return this instanceof r?this._init(e,t):new r(e,t)};r.fn=r.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(e){var t="noop";switch(typeof e){case"object":return e.a!==i&&this.a(e.a),t=e.r!==i?"fromRgb":e.l!==i?"fromHsl":e.v!==i?"fromHsv":t,this[t](e);case"string":return this.fromCSS(e);case"number":return this.fromInt(parseInt(e,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var e=new r(this.toInt()),t=["_alpha","_hSpace","_hsl","_hsv","error"],n=t.length-1;n>=0;n--)e[t[n]]=this[t[n]];return e},setHSpace:function(e){return this._hSpace="hsv"===e?e:"hsl",this},noop:function(){return this},fromCSS:function(e){var t,n=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),e.match(n)&&e.match(/\)$/)){if(t=e.replace(/(\s|%)/g,"").replace(n,"").replace(/,?\);?$/,"").split(","),t.length<3)return this._error();if(4===t.length&&(this.a(parseFloat(t.pop())),this.error))return this;for(var i=t.length-1;i>=0;i--)if(t[i]=parseInt(t[i],10),isNaN(t[i]))return this._error();return e.match(/^rgb/)?this.fromRgb({r:t[0],g:t[1],b:t[2]}):e.match(/^hsv/)?this.fromHsv({h:t[0],s:t[1],v:t[2]}):this.fromHsl({h:t[0],s:t[1],l:t[2]})}return this.fromHex(e)},fromRgb:function(e,t){return"object"!=typeof e||e.r===i||e.g===i||e.b===i?this._error():(this.error=!1,this.fromInt(parseInt((e.r<<16)+(e.g<<8)+e.b,10),t))},fromHex:function(e){return e=e.replace(/^#/,"").replace(/^0x/,""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),this.error=!/^[0-9A-F]{6}$/i.test(e),this.fromInt(parseInt(e,16))},fromHsl:function(e){var t,n,r,s,o,a,u,h;return"object"!=typeof e||e.h===i||e.s===i||e.l===i?this._error():(this._hsl=e,this._hSpace="hsl",a=e.h/360,u=e.s/100,h=e.l/100,0===u?t=n=r=h:(s=.5>h?h*(1+u):h+u-h*u,o=2*h-s,t=this.hue2rgb(o,s,a+1/3),n=this.hue2rgb(o,s,a),r=this.hue2rgb(o,s,a-1/3)),this.fromRgb({r:255*t,g:255*n,b:255*r},!0))},fromHsv:function(e){var t,n,r,s,o,a,u,h,c,l,d;if("object"!=typeof e||e.h===i||e.s===i||e.v===i)return this._error();switch(this._hsv=e,this._hSpace="hsv",t=e.h/360,n=e.s/100,r=e.v/100,u=Math.floor(6*t),h=6*t-u,c=r*(1-n),l=r*(1-h*n),d=r*(1-(1-h)*n),u%6){case 0:s=r,o=d,a=c;break;case 1:s=l,o=r,a=c;break;case 2:s=c,o=r,a=d;break;case 3:s=c,o=l,a=r;break;case 4:s=d,o=c,a=r;break;case 5:s=r,o=c,a=l}return this.fromRgb({r:255*s,g:255*o,b:255*a},!0)},fromInt:function(e,t){return this._color=parseInt(e,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===i&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e},toString:function(){var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e},toCSS:function(e,t){switch(e=e||"hex",t=parseFloat(t||this._alpha),e){case"rgb":case"rgba":var n=this.toRgb();return 1>t?"rgba( "+n.r+", "+n.g+", "+n.b+", "+t+" )":"rgb( "+n.r+", "+n.g+", "+n.b+" )";case"hsl":case"hsla":var i=this.toHsl();return 1>t?"hsla( "+i.h+", "+i.s+"%, "+i.l+"%, "+t+" )":"hsl( "+i.h+", "+i.s+"%, "+i.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var e,t,n=this.toRgb(),i=n.r/255,r=n.g/255,s=n.b/255,o=Math.max(i,r,s),a=Math.min(i,r,s),u=(o+a)/2;if(o===a)e=t=0;else{var h=o-a;switch(t=u>.5?h/(2-o-a):h/(o+a),o){case i:e=(r-s)/h+(s>r?6:0);break;case r:e=(s-i)/h+2;break;case s:e=(i-r)/h+4}e/=6}return e=Math.round(360*e),0===e&&this._hsl.h!==e&&(e=this._hsl.h),t=Math.round(100*t),0===t&&this._hsl.s&&(t=this._hsl.s),{h:e,s:t,l:Math.round(100*u)}},toHsv:function(){var e,t,n=this.toRgb(),i=n.r/255,r=n.g/255,s=n.b/255,o=Math.max(i,r,s),a=Math.min(i,r,s),u=o,h=o-a;if(t=0===o?0:h/o,o===a)e=t=0;else{switch(o){case i:e=(r-s)/h+(s>r?6:0);break;case r:e=(s-i)/h+2;break;case s:e=(i-r)/h+4}e/=6}return e=Math.round(360*e),0===e&&this._hsv.h!==e&&(e=this._hsv.h),t=Math.round(100*t),0===t&&this._hsv.s&&(t=this._hsv.s),{h:e,s:t,v:Math.round(100*u)}},toInt:function(){return this._color},toIEOctoHex:function(){var e=this.toString(),t=parseInt(255*this._alpha,10).toString(16);return 1===t.length&&(t="0"+t),"#"+t+e.replace(/^#/,"")},toLuminosity:function(){var e=this.toRgb();return.2126*Math.pow(e.r/255,2.2)+.7152*Math.pow(e.g/255,2.2)+.0722*Math.pow(e.b/255,2.2)},getDistanceLuminosityFrom:function(e){if(!(e instanceof r))throw"getDistanceLuminosityFrom requires a Color object";var t=this.toLuminosity(),n=e.toLuminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},getMaxContrastColor:function(){var e=this.toLuminosity(),t=e>=.5?"000000":"ffffff";return new r(t)},getReadableContrastingColor:function(e,t){if(!e instanceof r)return this;var n=t===i?5:t,s=e.getDistanceLuminosityFrom(this),o=e.getMaxContrastColor(),a=o.getDistanceLuminosityFrom(e);if(n>=a)return o;if(s>=n)return this;for(var u=0===o.toInt()?-1:1;n>s&&(this.l(u,!0),s=this.getDistanceLuminosityFrom(e),0!==this._color&&16777215!==this._color););return this},a:function(e){if(e===i)return this._alpha;var t=parseFloat(e);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(e){return e=e||5,this.l(-e,!0)},lighten:function(e){return e=e||5,this.l(e,!0)},saturate:function(e){return e=e||15,this.s(e,!0)},desaturate:function(e){return e=e||15,this.s(-e,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(e){e=e||1;var t=180+30*e;return this.h(t,!0)},getAnalog:function(e){e=e||1;var t=30*e;return this.h(t,!0)},getTetrad:function(e){e=e||1;var t=60*e;return this.h(t,!0)},getTriad:function(e){e=e||1;var t=120*e;return this.h(t,!0)},_partial:function(e){var t=s[e];return function(n,r){var s=this._spaceFunc("to",t.space);return n===i?s[e]:(r===!0&&(n=s[e]+n),t.mod&&(n%=t.mod),t.range&&(n=n<t.range[0]?t.range[0]:n>t.range[1]?t.range[1]:n),s[e]=n,this._spaceFunc("from",t.space,s))}},_spaceFunc:function(e,t,n){var i=t||this._hSpace,r=e+i.charAt(0).toUpperCase()+i.substr(1);return this[r](n)}};var s={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var o in s)s.hasOwnProperty(o)&&(r.fn[o]=r.fn._partial(o));"object"==typeof n?t.exports=r:e.Color=r}(this)},{}],35:[function(e,t,n){!function(e){e.fn.equalize=function(t){var n,i,r=this,s=!1,o=!1,a=0;return e.isPlainObject(t)?(n=t.equalize||"height",s=t.children||!1,o=t.reset||!1,a=t.offset||a):n=t||"height",e.isFunction(e.fn[n])?(i=n.indexOf("eight")>0?"min-height":"width",r.each(function(){var t=s?e(this).find(s):e(this).children(),r=0;t.each(function(){var t,s=e(this);o&&s.css(i,""),t=s[n](),t>r&&(r=t)}),t.css(i,r+a+"px")})):!1}}(jQuery)},{}],36:[function(e,t,n){window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims.$||(window.CornerstoneShims.$=window.jQuery),t.exports=window.CornerstoneShims.$},{}],37:[function(e,t,n){String.prototype.score=function(e,t){"use strict";if(this===e)return 1;if(""===e)return 0;var n,i,r,s,o,a=0,u=this,h=u.toLowerCase(),c=u.length,l=e.toLowerCase(),d=e.length,f=0,p=1;if(t&&(s=1-t),t)for(o=0;d>o;o+=1)r=h.indexOf(l[o],f),-1===r?p+=s:(f===r?n=.7:(n=.1," "===u[r-1]&&(n+=.8)),u[r]===e[o]&&(n+=.1),a+=n,f=r+1);else for(o=0;d>o;o+=1){if(r=h.indexOf(l[o],f),-1===r)return 0;f===r?n=.7:(n=.1," "===u[r-1]&&(n+=.8)),u[r]===e[o]&&(n+=.1),a+=n,f=r+1}return i=.5*(a/c+a/d)/p,l[0]===h[0]&&.85>i&&(i+=.15),i}},{}],38:[function(e,t,n){window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims._||(window.CornerstoneShims._=window._),t.exports=window.CornerstoneShims._},{}],39:[function(t,n,i){!function(r,s){if("function"==typeof e&&e.amd)e(["backbone","underscore"],function(e,t){return s(e,t)});else if("undefined"!=typeof i){var o=t("./../../../assets/js/src/admin/vendor/backbone-shim.js"),a=t("./../../../assets/js/src/admin/vendor/underscore-shim.js");n.exports=s(o,a)}else s(r.Backbone,r._)}(this,function(e,t){"use strict";var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.10",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer})},{"./../../../assets/js/src/admin/vendor/backbone-shim.js":32,"./../../../assets/js/src/admin/vendor/underscore-shim.js":38}],40:[function(t,n,i){!function(r,s){if("function"==typeof e&&e.amd)e(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(e,t){return r.Marionette=r.Mn=s(r,e,t)});else if("undefined"!=typeof i){var o=t("./../../../../assets/js/src/admin/vendor/backbone-shim.js"),a=t("./../../../../assets/js/src/admin/vendor/underscore-shim.js");t("backbone.wreqr"),t("backbone.babysitter");n.exports=s(r,o,a)}else r.Marionette=r.Mn=s(r,r.Backbone,r._)}(this,function(e,t,n){"use strict";var i=e.Marionette,r=e.Mn,s=t.Marionette={};s.VERSION="2.4.4",s.noConflict=function(){return e.Marionette=i,e.Mn=r,this},s.Deferred=t.$.Deferred,s.FEATURES={},s.isEnabled=function(e){return!!s.FEATURES[e]},s.extend=t.Model.extend,s.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},s.mergeOptions=function(e,t){e&&n.extend(this,n.pick(e,t))},s.getOption=function(e,t){return e&&t?e.options&&void 0!==e.options[t]?e.options[t]:e[t]:void 0},s.proxyGetOption=function(e){return s.getOption(this,e)},s._getValue=function(e,t,i){return n.isFunction(e)&&(e=i?e.apply(t,i):e.call(t)),e},s.normalizeMethods=function(e){return n.reduce(e,function(e,t,i){return n.isFunction(t)||(t=this[t]),t&&(e[i]=t),e},{},this)},s.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},s.normalizeUIKeys=function(e,t){return n.reduce(e,function(e,n,i){var r=s.normalizeUIString(i,t);return e[r]=n,e},{})},s.normalizeUIValues=function(e,t,i){return n.each(e,function(r,o){n.isString(r)?e[o]=s.normalizeUIString(r,t):n.isObject(r)&&n.isArray(i)&&(n.extend(r,s.normalizeUIValues(n.pick(r,i),t)),n.each(i,function(e){var i=r[e];n.isString(i)&&(r[e]=s.normalizeUIString(i,t))}))}),e},s.actAsCollection=function(e,t){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(i){e[i]=function(){var e=n.values(n.result(this,t)),r=[e].concat(n.toArray(arguments));return n[i].apply(n,r)}})};var o=s.deprecate=function(e,t){n.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||o._cache[e]||(o._warn("Deprecation warning: "+e),o._cache[e]=!0)};o._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},o._cache={},s._triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi;return function(i,r,s){var o=arguments.length<3;o&&(s=r,r=s[0]);var a,u="on"+r.replace(t,e),h=i[u];return n.isFunction(h)&&(a=h.apply(i,o?n.rest(s):s)),n.isFunction(i.trigger)&&(o+s.length>1?i.trigger.apply(i,o?s:[r].concat(n.drop(s,0))):i.trigger(r)),a}}(),s.triggerMethod=function(e){return s._triggerMethod(this,arguments)},s.triggerMethodOn=function(e){var t=n.isFunction(e.triggerMethod)?e.triggerMethod:s.triggerMethod;return t.apply(e,n.rest(arguments))},s.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,i()}function n(){e._isRendered=!0,i()}function i(){e._isShown&&e._isRendered&&s.isNodeAttached(e.el)&&s.triggerMethodOn(e,"dom:refresh",e)}e._isDomRefreshMonitored||(e._isDomRefreshMonitored=!0,e.on({show:t,render:n}))},function(e){function t(t,i,r,s){var o=s.split(/\s+/);n.each(o,function(n){var s=t[n];if(!s)throw new e.Error('Method "'+n+'" was configured as an event handler, but does not exist.');t.listenTo(i,r,s)})}function i(e,t,n,i){e.listenTo(t,n,i)}function r(e,t,i,r){var s=r.split(/\s+/);n.each(s,function(n){var r=e[n];e.stopListening(t,i,r)})}function s(e,t,n,i){e.stopListening(t,n,i)}function o(t,i,r,s,o){if(i&&r){if(!n.isObject(r))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});r=e._getValue(r,t),n.each(r,function(e,r){n.isFunction(e)?s(t,i,r,e):o(t,i,r,e)})}}e.bindEntityEvents=function(e,n,r){o(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){o(e,t,n,s,r)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(s);var a=["description","fileName","lineNumber","name","message","number"];return s.Error=s.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+s.VERSION+"/",constructor:function(e,t){n.isObject(e)?(t=e,e=t.message):t||(t={});var i=Error.call(this,e);n.extend(this,n.pick(i,a),n.pick(t,a)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,s.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),s.Error.extend=s.extend,s.Callbacks=function(){this._deferred=s.Deferred(),this._callbacks=[]},n.extend(s.Callbacks.prototype,{add:function(e,t){var i=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),i.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=s.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,n.extend(s.Controller.prototype,t.Events,{destroy:function(){return s._triggerMethod(this,"before:destroy",arguments),s._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:s.triggerMethod,mergeOptions:s.mergeOptions,getOption:s.proxyGetOption}),s.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize.apply(this,arguments)},s.Object.extend=s.extend,n.extend(s.Object.prototype,t.Events,{initialize:function(){},destroy:function(e){return e=e||{},this.triggerMethod("before:destroy",e),this.triggerMethod("destroy",e),this.stopListening(),this},triggerMethod:s.triggerMethod,mergeOptions:s.mergeOptions,getOption:s.proxyGetOption,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.Region=s.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new s.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),s.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e),s.MonitorDOMRefresh(e);var i=t||{},r=e!==this.currentView,o=!!i.preventDestroy,a=!!i.forceShow,u=!!this.currentView,h=r&&!o,c=r||a;if(u&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,h?this.empty():u&&c&&this.currentView.off("destroy",this.empty,this),c){e.once("destroy",this.empty,this),e._parent=this,this._renderView(e),u&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),s.triggerMethodOn(e,"before:show",e,this,t),u&&this.triggerMethod("swapOut",this.currentView,this,t);var l=s.isNodeAttached(this.el),d=[],f=n.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},i);return l&&f.triggerBeforeAttach&&(d=this._displayedViews(e),this._triggerAttach(d,"before:")),this.attachHtml(e),this.currentView=e,l&&f.triggerAttach&&(d=this._displayedViews(e),this._triggerAttach(d)),u&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),s.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var i=(t||"")+"attach";n.each(e,function(e){s.triggerMethodOn(e,i,e,this)},this)},_displayedViews:function(e){return n.union([e],n.result(e,"_getNestedViews")||[])},_renderView:function(e){e.supportsRenderLifecycle||s.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||s.triggerMethodOn(e,"render",e)},_ensureElement:function(){if(n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new s.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new s.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new s.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,s._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(e){var t=this.currentView,n=e||{},i=!!n.preventDestroy;return t?(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),i||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,i&&this.$el.contents().detach(),this):this},_destroyView:function(){var e=this.currentView;e.isDestroyed||(e.supportsDestroyLifecycle||s.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():(e.remove(),e.isDestroyed=!0),e.supportsDestroyLifecycle||s.triggerMethodOn(e,"destroy",e))},attachView:function(e){return this.currentView&&delete this.currentView._parent,e._parent=this,this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);throw new s.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var i=e.regionClass||t,r=n.omit(e,"selector","regionClass");return e.selector&&!r.el&&(r.el=e.selector),new i(r)},_buildRegionFromRegionClass:function(e){return new e}}),s.RegionManager=s.Controller.extend({constructor:function(e){this._regions={},this.length=0,s.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=s._getValue(e,this,arguments),n.reduce(e,function(e,i,r){return n.isString(i)&&(i={selector:i}),i.selector&&(i=n.defaults({},i,t)),e[r]=this.addRegion(r,i),e},{},this)},addRegion:function(e,t){var n;return n=t instanceof s.Region?t:s.Region.buildRegion(t,s.Region),this.triggerMethod("before:add:region",e,n),n._parent=this,this._store(e,n),this.triggerMethod("add:region",e,n),n},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),s.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]||this.length++,this._regions[e]=t},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this.length--,this.triggerMethod("remove:region",e,t)}}),s.actAsCollection(s.RegionManager.prototype,"_regions"),s.TemplateCache=function(e){this.templateId=e},n.extend(s.TemplateCache,{templateCaches:{},get:function(e,t){var n=this.templateCaches[e];return n||(n=new s.TemplateCache(e),this.templateCaches[e]=n),n.load(t)},clear:function(){var e,t=n.toArray(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(s.TemplateCache.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(e,n){var i=t.$(e);if(!i.length)throw new s.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i.html()},compileTemplate:function(e,t){return n.template(e,t)}}),s.Renderer={render:function(e,t){if(!e)throw new s.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var i=n.isFunction(e)?e:s.TemplateCache.get(e);return i(t)}},s.View=t.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:function(e){this.render=n.bind(this.render,this),e=s._getValue(e,this),this.options=n.extend({},n.result(this,"options"),e),this._behaviors=s.Behaviors(this),t.View.call(this,this.options),s.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,n.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=s._getValue(t,this),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"_uiBindings");return s.normalizeUIKeys(e,t||n.result(this,"ui"))},normalizeUIValues:function(e,t){var i=n.result(this,"ui"),r=n.result(this,"_uiBindings");return s.normalizeUIValues(e,r||i,t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(n.result(this,"triggers"));return n.reduce(e,function(e,t,n){return e[n]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var i=s._getValue(e||this.events,this);i=this.normalizeUIKeys(i),n.isUndefined(e)&&(this.events=i);var r={},o=n.result(this,"behaviorEvents")||{},a=this.configureTriggers(),u=n.result(this,"behaviorTriggers")||{};n.extend(r,o,i,a,u),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new s.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var e=n.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.isRendered=!1,this.remove(),n.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),n.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),n.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=n.defaults({},e,{preventDefault:!0,stopPropagation:!0}),i=n.isObject(e)?t.event:e;return function(e){e&&(e.preventDefault&&t.preventDefault&&e.preventDefault(),e.stopPropagation&&t.stopPropagation&&e.stopPropagation());var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(i,n)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return n.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=s._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],n.rest(arguments)),e},_triggerEventOnBehaviors:function(e){for(var t=s._triggerMethod,n=this._behaviors,i=0,r=n&&n.length;r>i;i++)t(n[i],e)},_triggerEventOnParentLayout:function(e,t){var i=this._parentLayoutView();if(i){var r=s.getOption(i,"childViewEventPrefix"),o=r+":"+e,a=[this].concat(t);s._triggerMethod(i,o,a);var u=s.getOption(i,"childEvents");u=s._getValue(u,i);var h=i.normalizeMethods(u);h&&n.isFunction(h[e])&&h[e].apply(i,a)}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?n.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},_parentLayoutView:function(){for(var e=this._parent;e;){if(e instanceof s.LayoutView)return e;e=e._parent}},normalizeMethods:s.normalizeMethods,mergeOptions:s.mergeOptions,getOption:s.proxyGetOption,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.ItemView=s.View.extend({constructor:function(){s.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,n.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new s.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.mixinTemplateHelpers(this.serializeData()),n=s.Renderer.render(e,t,this);return this.attachElContent(n),this}},attachElContent:function(e){return this.$el.html(e),this}}),s.CollectionView=s.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(e){this.once("render",this._initialEvents),this._initChildViewStorage(),s.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var e,t=this._isShown&&s.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),t&&this._triggerBeforeAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),t&&this._triggerAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(e,t,i){var r=n.drop(arguments,3);n.each(e,function(e){s.triggerMethodOn.apply(e,[e,i,e,t].concat(r))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,t,i){var r=void 0!==i.at&&(i.index||t.indexOf(e));if((this.getOption("filter")||r===!1)&&(r=n.indexOf(this._filteredSortedModels(r),e)),this._shouldAddChild(e,r)){this.destroyEmptyView();var s=this.getChildView(e);this.addChild(e,s,r)}},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(e){s.triggerMethodOn(e,"before:show",e)})},_onShowCalled:function(){this.children.each(function(e){s.triggerMethodOn(e,"show",e)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var e=this.children,t=this._filteredSortedModels(),i=n.some(t,function(t){return!e.findByModel(t)});if(i)this.render();else{var r=n.map(t,function(t,n){var i=e.findByModel(t);return i._index=n,i.el}),s=e.filter(function(e){return!n.contains(r,e.el)});this.triggerMethod("before:reorder"),this._appendReorderedChildren(r),n.each(s,this.removeChildView,this),this.checkEmpty(),this.triggerMethod("reorder")}},resortView:function(){s.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var e=this._filteredSortedModels(),t=n.find(e,function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this);t&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.$el.append(e)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.getOption("filter")&&this.showEmptyView())},showCollection:function(){var e,t=this._filteredSortedModels();n.each(t,function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},_filteredSortedModels:function(e){var t=this.getViewComparator(),i=this.collection.models;if(e=Math.min(Math.max(e,0),i.length-1),t){var r;e&&(r=i[e],i=i.slice(0,e).concat(i.slice(e+1))),i=this._sortModelsBy(i,t),r&&i.splice(e,0,r)}return this.getOption("filter")&&(i=n.filter(i,function(e,t){return this._shouldAddChild(e,t)},this)),i},_sortModelsBy:function(e,t){return"string"==typeof t?n.sortBy(e,function(e){return e.get(t)},this):1===t.length?n.sortBy(e,t,this):e.sort(n.bind(t,this))},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var i,r=this._isShown&&!this.isBuffering&&s.isNodeAttached(this.el),o=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(o)&&(o=o.call(this,e,this._emptyViewIndex));var a=this.buildChildView(e,t,o);a._parent=this,this.proxyChildEvents(a),a.once("render",function(){this._isShown&&s.triggerMethodOn(a,"before:show",a),r&&this._triggerBeforeAttach&&(i=this._getViewAndNested(a),this._triggerMethodMany(i,this,"before:attach"))},this),this.children.add(a),this.renderChildView(a,this._emptyViewIndex),r&&this._triggerAttach&&(i=this._getViewAndNested(a),this._triggerMethodMany(i,this,"attach")),this._isShown&&s.triggerMethodOn(a,"show",a)},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new s.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,n){var i=this.getOption("childViewOptions");i=s._getValue(i,this,[e,n]);var r=this.buildChildView(e,t,i);return this._updateIndices(r,!0,n),this.triggerMethod("before:add:child",r),this._addChildView(r,n),this.triggerMethod("add:child",r),r._parent=this,r},_updateIndices:function(e,t,n){this.getOption("sort")&&(t&&(e._index=n),this.children.each(function(n){n._index>=e._index&&(n._index+=t?1:-1)}))},_addChildView:function(e,t){var n,i=this._isShown&&!this.isBuffering&&s.isNodeAttached(this.el);this.proxyChildEvents(e),e.once("render",function(){this._isShown&&!this.isBuffering&&s.triggerMethodOn(e,"before:show",e),i&&this._triggerBeforeAttach&&(n=this._getViewAndNested(e),this._triggerMethodMany(n,this,"before:attach"))},this),this.children.add(e),this.renderChildView(e,t),i&&this._triggerAttach&&(n=this._getViewAndNested(e),this._triggerMethodMany(n,this,"attach")),this._isShown&&!this.isBuffering&&s.triggerMethodOn(e,"show",e)},renderChildView:function(e,t){return e.supportsRenderLifecycle||s.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||s.triggerMethodOn(e,"render",e),this.attachHtml(this,e,t),e},buildChildView:function(e,t,i){var r=n.extend({model:e},i),o=new t(r);return s.MonitorDOMRefresh(o),o},removeChildView:function(e){return e?(this.triggerMethod("before:remove:child",e),e.supportsDestroyLifecycle||s.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():e.remove(),e.supportsDestroyLifecycle||s.triggerMethodOn(e,"destroy",e),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1),e):e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},_createBuffer:function(){var e=document.createDocumentFragment();return n.each(this._bufferedChildren,function(t){e.appendChild(t.el)}),e},attachHtml:function(e,t,n){e.isBuffering?e._bufferedChildren.splice(n,0,t):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n,i=this.getOption("sort")&&t<this.children.length-1;return i&&(n=this.children.find(function(e){return e._index===t+1})),n?(n.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),s.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(e){var t=e||{},i=!0,r=this.children.map(n.identity);return n.isUndefined(t.checkEmpty)||(i=t.checkEmpty),this.children.each(this.removeChildView,this),i&&this.checkEmpty(),r},_shouldAddChild:function(e,t){var i=this.getOption("filter");return!n.isFunction(i)||i.call(this,e,t,this.collection)},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var i=n.toArray(arguments),r=i[0],s=this.normalizeMethods(n.result(this,"childEvents"));i[0]=t+":"+r,i.splice(1,0,e),"undefined"!=typeof s&&n.isFunction(s[r])&&s[r].apply(this,i.slice(1)),this.triggerMethod.apply(this,i)})},_getImmediateChildren:function(){return n.values(this.children._views)},_getViewAndNested:function(e){return[e].concat(n.result(e,"_getNestedViews")||[])},getViewComparator:function(){return this.getOption("viewComparator")}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){var t=this.getOption("childView")||this.constructor;return t},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&s.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=s.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);n.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},_appendReorderedChildren:function(e){var t=this.getChildViewContainer(this);t.append(e)},getChildViewContainer:function(e,t){if(e.$childViewContainer)return e.$childViewContainer;var n,i=s.getOption(e,"childViewContainer");if(i){var r=s._getValue(i,e);if(n="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r),n.length<=0)throw new s.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else n=e.$el;return e.$childViewContainer=n,n},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),s.LayoutView=s.ItemView.extend({regionClass:s.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),s.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(e,t,i){var r=this.getRegion(e);return r.show.apply(r,n.rest(arguments))},getChildView:function(e){return this.getRegion(e).currentView},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:n.partial(n.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=s._getValue(this.regions,this,[e])||{};var i=this.getOption.call(e,"regions");i=s._getValue(i,this,[e]),n.extend(t,i),t=this.normalizeUIValues(t,["selector","el"]),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new s.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return n.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),s.Behavior=s.Object.extend({constructor:function(e,t){this.view=t,this.defaults=n.result(this,"defaults")||{},this.options=n.extend({},this.defaults,e),this.ui=n.extend({},n.result(t,"ui"),n.result(this,"ui")),s.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),s.Behaviors=function(e,t){function n(e,i){return t.isObject(e.behaviors)?(i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(o)),i):{}}function i(e,t){this._view=e,this._behaviors=t,this._triggers={}}function r(e){return e._uiBindings||e.ui}var s=/^(\S+)\s*(.*)$/,o={behaviorTriggers:function(e,t){var n=new i(this,t);return n.buildBehaviorTriggers()},behaviorEvents:function(n,i){var o={};return t.each(i,function(n,i){var a={},u=t.clone(t.result(n,"events"))||{};u=e.normalizeUIKeys(u,r(n));var h=0;t.each(u,function(e,r){var o=r.match(s),u=o[1]+"."+[this.cid,i,h++," "].join(""),c=o[2],l=u+c,d=t.isFunction(e)?e:n[e];a[l]=t.bind(d,n)},this),o=t.extend(o,a)},this),o}};return t.extend(n,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,i){return t.behaviorClass?t.behaviorClass:e._getValue(n.behaviorsLookup,this,[t,i])[i]},parseBehaviors:function(e,i){return t.chain(i).map(function(i,r){var s=n.getBehaviorClass(i,r),o=new s(i,e),a=n.parseBehaviors(e,t.result(o,"behaviors"));return[o].concat(a)}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(o[i],e[i],n)})}}),t.extend(i.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(n,i){var s=t.clone(t.result(n,"triggers"))||{};s=e.normalizeUIKeys(s,r(n)),t.each(s,t.bind(this._setHandlerForBehavior,this,n,i))},_setHandlerForBehavior:function(e,t,n,i){var r=i.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[r]=this._view._buildViewTrigger(n)}}),n}(s,n),s.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var n=this.getOption("appRoutes"),i=this._getController();this.processAppRoutes(i,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){if(n.isFunction(this.onRoute)){var i=n.invert(this.getOption("appRoutes"))[e];this.onRoute(e,i,t)}},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,i){var r=e[i];if(!r)throw new s.Error('Method "'+i+'" was not found on the controller');this.route(t,i,n.bind(r,e))},mergeOptions:s.mergeOptions,getOption:s.proxyGetOption,triggerMethod:s.triggerMethod,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.Application=s.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new s.Callbacks,this.submodules={},n.extend(this,e),this._initChannel(),s.Object.apply(this,arguments)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var i=s.Module.getClass(t),r=n.toArray(arguments);return r.unshift(this),i.create.apply(i,r)},getRegionManager:function(){return new s.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var i=s.getOption(e,"regions");return n.isFunction(i)&&(i=i.call(this,e)),n.extend(t,i),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){s._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,s._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){s._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],s._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres}}),s.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},s.Module.extend=s.extend,n.extend(s.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),n.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var r=n.flatten([this,this.app,t,s,t.$,n,i]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks},triggerMethod:s.triggerMethod}),n.extend(s.Module,{create:function(e,t,i){var r=e,s=n.drop(arguments,3);t=t.split(".");var o=t.length,a=[];return a[o-1]=i,n.each(t,function(t,n){var o=r;r=this._getModule(o,t,e,i),this._addModuleDefinition(o,r,a[n],s)},this),r},_getModule:function(e,t,i,r,s){var o=n.extend({},r),a=this.getClass(r),u=e[t];return u||(u=new a(t,i,o),e[t]=u,e.submodules[t]=u),u},getClass:function(e){var t=s.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var r=this._getDefine(n),s=this._getStartWithParent(n,t);r&&t.addDefinition(r,i),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof s.Module?(i=t.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(e)?(i=e.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof s.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),s})},{"./../../../../assets/js/src/admin/vendor/backbone-shim.js":32,"./../../../../assets/js/src/admin/vendor/underscore-shim.js":38,"backbone.babysitter":39,"backbone.wreqr":44}],41:[function(t,n,i){!function(r,s){"object"==typeof i&&"undefined"!=typeof n?n.exports=s(t("./../../../assets/js/src/admin/vendor/underscore-shim.js"),t("./../../../assets/js/src/admin/vendor/backbone-shim.js")):"function"==typeof e&&e.amd?e(["underscore","backbone"],s):r.Backbone.Radio=s(r._,r.Backbone)}(this,function(e,t){"use strict";function n(e,t,n,i){var r=e[t];return n&&n!==r.callback&&n!==r.callback._callback||i&&i!==r.context?void 0:(delete e[t],!0)}function i(t,i,r,s){t||(t={});for(var o=i?[i]:e.keys(t),a=!1,u=0,h=o.length;h>u;u++)i=o[u],t[i]&&n(t,i,r,s)&&(a=!0);return a}function r(t){return h[t]||(h[t]=e.partial(a.log,t))}function s(t){return e.isFunction(t)?t:function(){return t}}var o=t.Radio,a=t.Radio={};a.VERSION="1.0.2",a.noConflict=function(){return t.Radio=o,this},a.DEBUG=!1,a._debugText=function(e,t,n){return e+(n?" on the "+n+" channel":"")+': "'+t+'"'},a.debugLog=function(e,t,n){a.DEBUG&&console&&console.warn&&console.warn(a._debugText(e,t,n))};var u=/\s+/;a._eventsApi=function(t,n,i,r){if(!i)return!1;var s={};if("object"==typeof i){for(var o in i){var a=t[n].apply(t,[o,i[o]].concat(r));u.test(o)?e.extend(s,a):s[o]=a}return s}if(u.test(i)){for(var h=i.split(u),c=0,l=h.length;l>c;c++)s[h[c]]=t[n].apply(t,[h[c]].concat(r));return s}return!1},a._callHandler=function(e,t,n){var i=n[0],r=n[1],s=n[2];switch(n.length){case 0:return e.call(t);case 1:return e.call(t,i);case 2:return e.call(t,i,r);case 3:return e.call(t,i,r,s);default:return e.apply(t,n)}};var h={};e.extend(a,{log:function(t,n){var i=e.rest(arguments,2);console.log("["+t+'] "'+n+'"',i)},tuneIn:function(e){var t=a.channel(e);return t._tunedIn=!0,t.on("all",r(e)),this},tuneOut:function(e){var t=a.channel(e);return t._tunedIn=!1,t.off("all",r(e)),delete h[e],this}}),a.Requests={request:function(t){var n=e.rest(arguments),i=a._eventsApi(this,"request",t,n);if(i)return i;var r=this.channelName,s=this._requests;if(r&&this._tunedIn&&a.log.apply(this,[r,t].concat(n)),s&&(s[t]||s["default"])){var o=s[t]||s["default"];return n=s[t]?n:arguments,a._callHandler(o.callback,o.context,n)}a.debugLog("An unhandled request was fired",t,r)},reply:function(e,t,n){return a._eventsApi(this,"reply",e,[t,n])?this:(this._requests||(this._requests={}),this._requests[e]&&a.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:s(t),context:n||this},this)},replyOnce:function(t,n,i){if(a._eventsApi(this,"replyOnce",t,[n,i]))return this;var r=this,o=e.once(function(){return r.stopReplying(t),s(n).apply(this,arguments)});return this.reply(t,o,i)},stopReplying:function(e,t,n){return a._eventsApi(this,"stopReplying",e)?this:(e||t||n?i(this._requests,e,t,n)||a.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},a._channels={},a.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return a._channels[e]?a._channels[e]:a._channels[e]=new a.Channel(e)},a.Channel=function(e){this.channelName=e},e.extend(a.Channel.prototype,t.Events,a.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var c,l,d=[t.Events,a.Commands,a.Requests];e.each(d,function(t){e.each(t,function(t,n){a[n]=function(t){return l=e.rest(arguments),c=this.channel(t),c[n].apply(c,l)}})}),a.reset=function(t){var n=t?[this._channels[t]]:this._channels;e.invoke(n,"reset")};var f=a;return f})},{"./../../../assets/js/src/admin/vendor/backbone-shim.js":32,"./../../../assets/js/src/admin/vendor/underscore-shim.js":38}],42:[function(t,n,i){!function(n){"function"==typeof e&&e.amd?e(["underscore","backbone","exports"],n):"object"==typeof i?n(t("./../../assets/js/src/admin/vendor/underscore-shim.js"),t("./../../assets/js/src/admin/vendor/backbone-shim.js"),i):n(_,Backbone,{})}(function(e,t,n){t.Stickit=n,n._handlers=[],n.addHandler=function(t){t=e.map(e.flatten([t]),function(t){return e.defaults({},t,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(t)},n.ViewMixin={_modelBindings:null,unstickit:function(t,n){if(e.isObject(n))return void e.each(n,function(e,n){this.unstickit(t,n)},this);var i=[],r=[];this._modelBindings=e.reject(this._modelBindings,function(e){return t&&e.model!==t||n&&e.config.selector!=n?void 0:(e.model.off(e.event,e.fn),r.push(e.config._destroy),i.push(e.model),!0)}),e.invoke(e.uniq(i),"trigger","stickit:unstuck",this.cid),e.each(e.uniq(r),function(e){e.call(this)},this),this.$el.off(".stickit"+(t?"."+t.cid:""),n)},stickit:function(t,n){var i=t||this.model,r=n||e.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(i,r);var s=this.remove;return s.stickitWrapped||(this.remove=function(){var e=this;return this.unstickit(),s&&(e=s.apply(this,arguments)),e}),this.remove.stickitWrapped=!0,this},addBinding:function(t,n,r){var g=t||this.model,m=".stickit."+g.cid;if(r=r||{},e.isObject(n)){var v=n;return void e.each(v,function(e,t){this.addBinding(g,t,e)},this)}var _=":el"===n?this.$el:this.$(n);if(this.unstickit(g,n),_.length){e.isString(r)&&(r={observe:r}),e.isFunction(r.observe)&&(r.observe=r.observe.call(this));var y=c(_,r),b=y.observe;y.selector=n,y.view=this;var w=y.bindId=e.uniqueId(),M=e.extend({stickitChange:y},y.setOptions);if(y._destroy=function(){s.call(this,y.destroy,_,g,y)},l(_,y,g,b),f(_,y,g,b),d(_,y,g,b),b){e.each(y.events,function(t){var r=t+m,a=function(e){var t=s.call(this,y.getVal,_,e,y,i.call(arguments,1)),n=o(y.updateModel,t,e,y);n&&u(g,b,t,M,y)},h=":el"===n?"":n;this.$el.on(r,h,e.bind(a,this))},this),e.each(e.flatten([b]),function(e){a(g,"change:"+e,y,function(e,t,n){var i=n&&n.stickitChange&&n.stickitChange.bindId;if(i!==w){var r=h(g,b,y);p(_,y,r,g)}})});var C=h(g,b,y);p(_,y,C,g,!0)}s.call(this,y.initialize,_,g,y)}}},e.extend(t.View.prototype,n.ViewMixin);var i=[].slice,r=function(t,n){var i=(n||"").split("."),r=e.reduce(i,function(e,t){return e[t]},t);return null==r?t:r},s=function(t){return t=e.isString(t)?r(this,t):t,t?t.apply(this,i.call(arguments,1)):void 0},o=function(t,n,i){if(e.isBoolean(t))return t;if(e.isFunction(t)||e.isString(t)){var r=e.last(arguments).view;return s.apply(r,arguments)}return!1},a=function(e,t,n,i){var r=n.view;e.on(t,i,r),r._modelBindings.push({model:e,event:t,fn:i,config:n})},u=function(t,n,i,r,o){var a={},u=o.view;o.onSet&&(i=s.call(u,o.onSet,i,o)),o.set?s.call(u,o.set,n,i,r,o):(a[n]=i,e.isArray(n)&&e.isArray(i)&&(a=e.reduce(n,function(t,n,r){return t[n]=e.has(i,r)?i[r]:null,t},{})),t.set(a,r))},h=function(t,n,i){var r=i.view,o=function(e){return t[i.escape?"escape":"get"](e)},a=function(e){return null==e?"":e},u=e.isArray(n)?e.map(n,o):o(n);return i.onGet&&(u=s.call(r,i.onGet,u,i)),e.isArray(u)?e.map(u,a):a(u)},c=n.getConfiguration=function(t,i){var r=[{updateModel:!1,updateMethod:"text",update:function(e,t,n,i){e[i.updateMethod]&&e[i.updateMethod](t)},getVal:function(e,t,n){return e[n.updateMethod]()}}];r=r.concat(e.filter(n._handlers,function(e){return t.is(e.selector)})),r.push(i);var s=e.extend.apply(e,r);return e.has(s,"updateView")||(s.updateView=!s.visible),s},l=function(t,n,i,r){var s=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],o=n.view;e.each(n.attributes||[],function(u){u=e.clone(u),u.view=o;var c="",l=u.observe||(u.observe=r),d=function(){var n=e.contains(s,u.name)?"prop":"attr",r=h(i,l,u);"class"===u.name?(t.removeClass(c).addClass(r),c=r):t[n](u.name,r)};e.each(e.flatten([l]),function(e){a(i,"change:"+e,n,d)}),d()})},d=function(t,n,i,r){e.each(n.classes||[],function(r,s){e.isString(r)&&(r={observe:r}),r.view=n.view;var o=r.observe,u=function(){var e=h(i,o,r);t.toggleClass(s,!!e)};e.each(e.flatten([o]),function(e){a(i,"change:"+e,n,u)}),u()})},f=function(t,n,i,r){if(null!=n.visible){var o=n.view,u=function(){var a=n.visible,u=n.visibleFn,c=h(i,r,n),l=!!c;(e.isFunction(a)||e.isString(a))&&(l=!!s.call(o,a,c,n)),u?s.call(o,u,t,l,n):t.toggle(l)};e.each(e.flatten([r]),function(e){a(i,"change:"+e,n,u)}),u()}},p=function(e,t,n,i,r){var a=t.view;o(t.updateView,n,t)&&(s.call(a,t.update,e,n,i,t),r||s.call(a,t.afterUpdate,e,n,t))};return n.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(n,i,r,s){if(n.length>1)i||(i=[]),n.each(function(n,r){var s=t.$(r),o=e.contains(i,s.val());s.prop("checked",o)});else{var o=e.isBoolean(i)?i:i===n.val();n.prop("checked",o)}},getVal:function(n){var i;if(n.length>1)i=e.reduce(n,function(e,n){var i=t.$(n);return i.prop("checked")&&e.push(i.val()),e},[]);else{i=n.prop("checked");var r=n.val();"on"!==r&&null!=r&&(i=i?n.val():null)}return i}},{selector:"select",events:["change"],update:function(n,i,o,a){var u,c=a.selectOptions,l=c&&c.collection||void 0,d=n.prop("multiple");if(!c){c={};var f=function(e){return e.map(function(e,n){var i=t.$(n).data("stickit-bind-val");return{value:void 0!==i?i:n.value,label:n.text}}).get()};n.find("optgroup").length?(l={opt_labels:[]},n.find("> option").length&&(l.opt_labels.push(void 0),e.each(n.find("> option"),function(e){l[void 0]=f(t.$(e))})),e.each(n.find("optgroup"),function(e){var n=t.$(e).attr("label");l.opt_labels.push(n),l[n]=f(t.$(e).find("option"))})):l=f(n.find("option"))}c.valuePath=c.valuePath||"value",c.labelPath=c.labelPath||"label",c.disabledPath=c.disabledPath||"disabled";var p=function(n,i,s){e.each(n,function(n){var o,a,u,h=t.$("<option/>"),l=n,f=function(t,n,i){h.text(t),l=n,h.data("stickit-bind-val",l),e.isArray(l)||e.isObject(l)||h.val(l),i===!0&&h.prop("disabled","disabled")};"__default__"===n?(o=s.label,a=s.value,u=s.disabled):(o=r(n,c.labelPath),a=r(n,c.valuePath),u=r(n,c.disabledPath)),f(o,a,u);var p=function(){return d||null==l||null==s||l!==s?e.isObject(s)&&e.isEqual(l,s)?!0:!1:!0};p()?h.prop("selected",!0):d&&e.isArray(s)&&e.each(s,function(t){e.isObject(t)&&(t=r(t,c.valuePath)),(t===l||e.isObject(t)&&e.isEqual(l,t))&&h.prop("selected",!0)}),i.append(h)})};if(n.find("*").remove(),e.isString(l)){var g=window;0===l.indexOf("this.")&&(g=this),l=l.replace(/^[a-z]*\.(.+)$/,"$1"),u=r(g,l)}else u=e.isFunction(l)?s.call(this,l,n,a):l;if(u instanceof t.Collection){var m=u,v=function(){var e=h(o,a.observe,a);s.call(this,a.update,n,e,o,a)},_=function(){m.off("add remove reset sort",v)},y=function(){_(),m.off("stickit:selectRefresh"),o.off("stickit:selectRefresh")};m.trigger("stickit:selectRefresh"),m.once("stickit:selectRefresh",_,this),m.on("add remove reset sort",v,this),o.trigger("stickit:selectRefresh"),o.once("stickit:selectRefresh",function(){o.off("stickit:unstuck",y)}),o.once("stickit:unstuck",y,this),u=u.toJSON()}if(c.defaultOption){var b=e.isFunction(c.defaultOption)?c.defaultOption.call(this,n,a):c.defaultOption;p(["__default__"],n,b)}if(e.isArray(u))p(u,n,i);else if(u.opt_labels)e.each(u.opt_labels,function(e){var r=t.$("<optgroup/>").attr("label",e);p(u[e],r,i),n.append(r)});else{var w,M=[];for(var C in u)w={},w[c.valuePath]=C,w[c.labelPath]=u[C],M.push(w);M=e.sortBy(M,c.comparator||c.labelPath),p(M,n,i)}},getVal:function(n){var i=n.find("option:selected");return n.prop("multiple")?e.map(i,function(e){return t.$(e).data("stickit-bind-val")}):i.data("stickit-bind-val")}}]),n})},{"./../../assets/js/src/admin/vendor/backbone-shim.js":32,"./../../assets/js/src/admin/vendor/underscore-shim.js":38}],43:[function(t,n,i){!function(t,i){"undefined"!=typeof n&&n.exports?n.exports=i():"function"==typeof e&&e.amd?e(i):this[t]=i()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function i(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),a=!o&&/android/i.test(e),u=/CrOS/.test(e),h=n(/edge\/(\d+(\.\d+)?)/i),c=n(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(e),d=!l&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?r={name:"Opera",opera:t,version:c||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:t,version:c||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(r={name:"Windows Phone",windowsphone:t},h?(r.msedge=t,r.version=h):(r.msie=t,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?r={name:"Chrome",chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:t,version:h}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?(r={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},c&&(r.version=c)):/sailfish/i.test(e)?r={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(r={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=t)):/silk/i.test(e)?r={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:c}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:t,version:c||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(r={name:"WebOS",webos:t,version:c||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=t)):r=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||c}:/safari/i.test(e)?{name:"Safari",safari:t,version:c}:{name:n(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(r.name=r.name||"Webkit",r.webkit=t,!r.version&&c&&(r.version=c)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!a&&!r.silk?s&&(r[s]=t,r.ios=t):r.android=t;var f="";r.windowsphone?f=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s?(f=n(/os (\d+([_\s]\d+)*) like mac os x/i),f=f.replace(/[_\s]/g,".")):a?f=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?f=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?f=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?f=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(f=n(/tizen[\/\s](\d+(\.\d+)*)/i)),f&&(r.osversion=f);var p=f.split(".")[0];return l||"ipad"==s||a&&(3==p||4==p&&!d)||r.silk?r.tablet=t:(d||"iphone"==s||"ipod"==s||a||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=t:r.x=t,r}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in n)return!0}return!1},n._detect=e,n})},{}],44:[function(e,t,n){},{}],45:[function(e,t,n){function i(){c=!1,a.length?h=a.concat(h):l=-1,h.length&&r()}function r(){if(!c){var e=setTimeout(i);c=!0;for(var t=h.length;t;){for(a=h,h=[];++l<t;)a&&a[l].run();l=-1,t=h.length}a=null,c=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,u=t.exports={},h=[],c=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||c||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],46:[function(t,n,i){(function(i,r){(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function a(e){G=e}function u(e){Z=e}function h(){return function(){i.nextTick(p)}}function c(){return function(){H(p)}}function l(){var e=0,t=new Q(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function f(){return function(){setTimeout(p,1)}}function p(){for(var e=0;J>e;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}J=0}function g(){try{var e=t,n=e("vertx");return H=n.runOnLoop||n.runOnContext,c()}catch(i){return f()}}function m(e,t){var n=this,i=n._state;if(i===oe&&!e||i===ae&&!t)return this;var r=new this.constructor(_),s=n._result;if(i){var o=arguments[i-1];Z(function(){I(i,r,o,s)})}else T(n,r,e,t);return r}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(_);return D(n,e),n}function _(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return ue.error=t,ue}}function M(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function C(e,t,n){Z(function(e){var i=!1,r=M(n,t,function(n){i||(i=!0,t!==n?D(e,n):O(e,n))},function(t){i||(i=!0,E(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,E(e,r))},e)}function x(e,t){t._state===oe?O(e,t._result):t._state===ae?E(e,t._result):T(t,void 0,function(t){D(e,t)},function(t){E(e,t)})}function k(e,t,n){t.constructor===e.constructor&&n===ie&&constructor.resolve===re?x(e,t):n===ue?E(e,ue.error):void 0===n?O(e,t):o(n)?C(e,t,n):O(e,t)}function D(e,t){e===t?E(e,y()):s(t)?k(e,t,w(t)):O(e,t)}function S(e){e._onerror&&e._onerror(e._result),R(e)}function O(e,t){e._state===se&&(e._result=t,e._state=oe,0!==e._subscribers.length&&Z(R,e))}function E(e,t){e._state===se&&(e._state=ae,e._result=t,Z(S,e))}function T(e,t,n,i){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+oe]=n,r[s+ae]=i,0===s&&e._state&&Z(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r,s=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?I(n,i,r,s):r(s);e._subscribers.length=0}}function A(){this.error=null}function V(e,t){try{return e(t)}catch(n){return he.error=n,he}}function I(e,t,n,i){var r,s,a,u,h=o(n);if(h){if(r=V(n,i),r===he?(u=!0,s=r.error,r=null):a=!0,t===r)return void E(t,b())}else r=i,a=!0;t._state!==se||(h&&a?D(t,r):u?E(t,s):e===oe?O(t,r):e===ae&&E(t,r))}function Y(e,t){try{t(function(t){D(e,t)},function(t){E(e,t)})}catch(n){E(e,n)}}function j(e){return new ge(this,e).promise}function B(e){function t(e){D(r,e)}function n(e){E(r,e)}var i=this,r=new i(_);if(!q(e))return E(r,new TypeError("You must pass an array to race.")),r;for(var s=e.length,o=0;r._state===se&&s>o;o++)T(i.resolve(e[o]),void 0,t,n);return r}function N(e){var t=this,n=new t(_);return E(n,e),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(e){this._id=fe++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&F(),this instanceof L?Y(this,e):P())}function U(e,t){this._instanceConstructor=e,this.promise=new e(_),Array.isArray(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):E(this.promise,this._validationError())}function z(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=pe)}var W;W=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,G,$,q=W,J=0,Z=function(e,t){ne[J]=e,ne[J+1]=t,J+=2,2===J&&(G?G(p):$())},X="undefined"!=typeof window?window:void 0,K=X||{},Q=K.MutationObserver||K.WebKitMutationObserver,ee="undefined"!=typeof i&&"[object process]"==={}.toString.call(i),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3);$=ee?h():Q?l():te?d():void 0===X&&"function"==typeof t?g():f();var ie=m,re=v,se=void 0,oe=1,ae=2,ue=new A,he=new A,ce=j,le=B,de=N,fe=0,pe=L;L.all=ce,L.race=le,L.resolve=re,L.reject=de,L._setScheduler=a,L._setAsap=u,L._asap=Z,L.prototype={constructor:L,then:ie,"catch":function(e){return this.then(null,e)}};var ge=U;U.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},U.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===se&&e>n;n++)this._eachEntry(t[n],n)},U.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===re){var r=w(e);if(r===ie&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===pe){var s=new n(_);k(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},U.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===se&&(this._remaining--,e===ae?E(i,n):this._result[t]=n),0===this._remaining&&O(i,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){n._settledAt(oe,t,e)},function(e){n._settledAt(ae,t,e)})};var me=z,ve={Promise:pe,polyfill:me};"function"==typeof e&&e.amd?e(function(){return ve}):"undefined"!=typeof n&&n.exports?n.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),me()}).call(this)}).call(this,t("_process"),window||{})},{_process:45}],47:[function(t,n,i){!function(t){function r(e,t){this.list=e,this.options=t=t||{};var n,i,s,o;for(n=0,o=["sort","shouldSort"],i=o.length;i>n;n++)s=o[n],this.options[s]=s in t?t[s]:r.defaultOptions[s];for(n=0,o=["searchFn","sortFn","keys","getFn","include"],i=o.length;i>n;n++)s=o[n],this.options[s]=t[s]||r.defaultOptions[s]}var s=function(e,t){if(t=t||{},this.options=t,this.options.location=t.location||s.defaultOptions.location,this.options.distance="distance"in t?t.distance:s.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:s.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||s.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen>this.options.maxPatternLength)throw new Error("Pattern length is too long");this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet()};s.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},s.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},s.prototype._bitapScore=function(e,t){var n=e/this.patternLen,i=Math.abs(this.options.location-t);return this.options.distance?n+i/this.options.distance:i?1:n},s.prototype.search=function(e){if(e=this.options.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0};var t,n,i,r,s,o,a,u,h,c=e.length,l=this.options.location,d=this.options.threshold,f=e.indexOf(this.pattern,l),p=this.patternLen+c,g=1,m=[];for(-1!=f&&(d=Math.min(this._bitapScore(0,f),d),f=e.lastIndexOf(this.pattern,l+this.patternLen),-1!=f&&(d=Math.min(this._bitapScore(0,f),d))),f=-1,t=0;t<this.patternLen;t++){for(i=0,r=p;r>i;)this._bitapScore(t,l+r)<=d?i=r:p=r,r=Math.floor((p-i)/2+i);for(p=r,s=Math.max(1,l-r+1),o=Math.min(l+r,c)+this.patternLen,a=Array(o+2),a[o+1]=(1<<t)-1,n=o;n>=s;n--)if(h=this.patternAlphabet[e.charAt(n-1)],0===t?a[n]=(a[n+1]<<1|1)&h:a[n]=(a[n+1]<<1|1)&h|((u[n+1]|u[n])<<1|1)|u[n+1],a[n]&this.matchmask&&(g=this._bitapScore(t,n-1),d>=g)){if(d=g,f=n-1,m.push(f),!(f>l))break;s=Math.max(1,2*l-f)}if(this._bitapScore(t+1,l)>d)break;u=a}return{isMatch:f>=0,score:g}};var o=function(e,t,n){var i,r,s;if(t){s=t.indexOf("."),-1!==s?(i=t.slice(0,s),r=t.slice(s+1)):i=t;var u=e[i];if(u)if(r||"string"!=typeof u&&"number"!=typeof u)if(a.isArray(u))for(var h=0,c=u.length;c>h;h++)o(u[h],r,n);else r&&o(u,r,n);else n.push(u)}else n.push(e);return n},a={deepValue:function(e,t){return o(e,t,[])},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)}};r.defaultOptions={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:s,sortFn:function(e,t){return e.score-t.score},getFn:a.deepValue,keys:[]},r.prototype.set=function(e){return this.list=e,e},r.prototype.search=function(e){var t,n,i,r,s=new this.options.searchFn(e,this.options),o=this.list,u=o.length,h=this.options,c=this.options.keys,l=c.length,d=[],f={},p=[],g=function(e,t,n){if(void 0!==e&&null!==e)if("string"==typeof e)i=s.search(e),i.isMatch&&(r=f[n],r?r.score=Math.min(r.score,i.score):(f[n]={item:t,score:i.score},d.push(f[n])));else if(a.isArray(e))for(var o=0;o<e.length;o++)g(e[o],t,n)};if("string"==typeof o[0])for(var m=0;u>m;m++)g(o[m],m,m);else for(var m=0;u>m;m++)for(n=o[m],t=0;l>t;t++)g(h.getFn(n,c[t]),n,m);h.shouldSort&&d.sort(h.sortFn);for(var v=h.id?function(e){d[e].item=h.getFn(d[e].item,h.id)[0]}:function(){},_=function(e){var t;if(h.include.length>0){t={item:d[e].item};for(var n=0;n<h.include.length;n++){var i=h.include[n];t[i]=d[e][i]}}else t=d[e].item;return t},m=0,y=d.length;y>m;m++)v(m),p.push(_(m));return p},"object"==typeof i?n.exports=r:"function"==typeof e&&e.amd?e(function(){return r}):t.Fuse=r}(this)},{}],48:[function(t,n,i){!function(t,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof e&&e.amd?e(r):t.moment=r()}(this,function(){"use strict";function e(){return jn.apply(null,arguments)}function i(e){jn=e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,i){return Te(e,t,n,i,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return null==e._pf&&(e._pf=c()),e._pf}function d(e){if(null==e._isValid){var t=l(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function f(e){var t=h(NaN);return null!=e?u(l(t),e):l(t).userInvalidated=!0,t}function p(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=l(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Nn.length>0)for(n in Nn)i=Nn[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function g(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Fn===!1&&(Fn=!0,e.updateOffset(this),Fn=!1)}function m(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function v(e){return 0>e?Math.ceil(e):Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=v(t)),n}function y(e,t,n){var i,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&_(e[i])!==_(t[i]))&&o++;return o+s}function b(){}function w(e){return e?e.toLowerCase().replace("_","-"):e}function M(e){for(var t,n,i,r,s=0;s<e.length;){for(r=w(e[s]).split("-"),t=r.length,n=w(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=C(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(r,n,!0)>=t-1)break;t--}s++}return null}function C(e){var i=null;if(!Pn[e]&&"undefined"!=typeof n&&n&&n.exports)try{i=Bn._abbr,t("./locale/"+e),x(i)}catch(r){}return Pn[e]}function x(e,t){var n;return e&&(n="undefined"==typeof t?D(e):k(e,t),n&&(Bn=n)),Bn._abbr}function k(e,t){return null!==t?(t.abbr=e,Pn[e]=Pn[e]||new b,Pn[e].set(t),x(e),Pn[e]):(delete Pn[e],null)}function D(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Bn;if(!r(e)){if(t=C(e))return t;e=[e]}return M(e)}function S(e,t){var n=e.toLowerCase();Ln[n]=Ln[n+"s"]=Ln[t]=e}function O(e){return"string"==typeof e?Ln[e]||Ln[e.toLowerCase()]:void 0}function E(e){var t,n,i={};for(n in e)a(e,n)&&(t=O(n),t&&(i[t]=e[n]));return i}function T(t,n){return function(i){return null!=i?(A(this,t,i),e.updateOffset(this,n),this):R(this,t)}}function R(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function A(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function V(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=O(e),"function"==typeof this[e])return this[e](t);return this}function I(e,t,n){var i=""+Math.abs(e),r=t-i.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function Y(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(Hn[e]=r),t&&(Hn[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}),n&&(Hn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,i=e.match(Un);for(t=0,n=i.length;n>t;t++)Hn[i[t]]?i[t]=Hn[i[t]]:i[t]=j(i[t]);return function(r){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(r,e):i[t];return s}}function N(e,t){return e.isValid()?(t=F(t,e.localeData()),Wn[t]=Wn[t]||B(t),Wn[t](e)):e.localeData().invalidDate()}function F(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(zn.lastIndex=0;i>=0&&zn.test(e);)e=e.replace(zn,n),zn.lastIndex=0,i-=1;return e}function P(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function L(e,t,n){oi[e]=P(t)?t:function(e){return e&&n?n:t}}function U(e,t){return a(oi,e)?oi[e](t._strict,t._locale):new RegExp(z(e))}function z(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)ai[e[n]]=i}function H(e,t){W(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function G(e,t,n){null!=t&&a(ai,e)&&ai[e](t,n._a,n,e)}function $(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function q(e){return this._months[e.month()]}function J(e){return this._monthsShort[e.month()]}function Z(e,t,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function X(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),$(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function K(t){return null!=t?(X(this,t),e.updateOffset(this,!0),this):R(this,"Month")}function Q(){return $(this.year(),this.month())}function ee(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[hi]<0||n[hi]>11?hi:n[ci]<1||n[ci]>$(n[ui],n[hi])?ci:n[li]<0||n[li]>24||24===n[li]&&(0!==n[di]||0!==n[fi]||0!==n[pi])?li:n[di]<0||n[di]>59?di:n[fi]<0||n[fi]>59?fi:n[pi]<0||n[pi]>999?pi:-1,l(e)._overflowDayOfYear&&(ui>t||t>ci)&&(t=ci),l(e).overflow=t),e}function te(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ne(e,t){var n=!0;return u(function(){return n&&(te(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function ie(e,t){vi[e]||(te(t),vi[e]=!0)}function re(e){var t,n,i=e._i,r=_i.exec(i);if(r){for(l(e).iso=!0,t=0,n=yi.length;n>t;t++)if(yi[t][1].exec(i)){e._f=yi[t][0];break}for(t=0,n=bi.length;n>t;t++)if(bi[t][1].exec(i)){e._f+=(r[6]||" ")+bi[t][0];break}i.match(ii)&&(e._f+="Z"),Ce(e)}else e._isValid=!1}function se(t){var n=wi.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(re(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function oe(e,t,n,i,r,s,o){var a=new Date(e,t,n,i,r,s,o);return 1970>e&&a.setFullYear(e),a}function ae(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ue(e){return he(e)?366:365}function he(e){return e%4===0&&e%100!==0||e%400===0}function ce(){return he(this.year())}function le(e,t,n){var i,r=n-t,s=n-e.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Re(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function de(e){return le(e,this._week.dow,this._week.doy).week}function fe(){return this._week.dow}function pe(){return this._week.doy}function ge(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function me(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ve(e,t,n,i,r){var s,o=6+r-i,a=ae(e,0,1+o),u=a.getUTCDay();return r>u&&(u+=7),n=null!=n?1*n:r,s=1+o+7*(t-1)-u+n,{year:s>0?e:e-1,dayOfYear:s>0?s:ue(e-1)+s}}function _e(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ye(e,t,n){return null!=e?e:null!=t?t:n}function be(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function we(e){var t,n,i,r,s=[];if(!e._d){for(i=be(e),e._w&&null==e._a[ci]&&null==e._a[hi]&&Me(e),e._dayOfYear&&(r=ye(e._a[ui],i[ui]),e._dayOfYear>ue(r)&&(l(e)._overflowDayOfYear=!0),n=ae(r,0,e._dayOfYear),e._a[hi]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[li]&&0===e._a[di]&&0===e._a[fi]&&0===e._a[pi]&&(e._nextDay=!0,e._a[li]=0),e._d=(e._useUTC?ae:oe).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[li]=24)}}function Me(e){var t,n,i,r,s,o,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,o=4,n=ye(t.GG,e._a[ui],le(Re(),1,4).year),i=ye(t.W,1),r=ye(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=ye(t.gg,e._a[ui],le(Re(),s,o).year),i=ye(t.w,1),null!=t.d?(r=t.d,s>r&&++i):r=null!=t.e?t.e+s:s),a=ve(n,i,r,o,s),e._a[ui]=a.year,e._dayOfYear=a.dayOfYear}function Ce(t){if(t._f===e.ISO_8601)return void re(t);t._a=[],l(t).empty=!0;var n,i,r,s,o,a=""+t._i,u=a.length,h=0;for(r=F(t._f,t._locale).match(Un)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(U(s,t))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&l(t).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),h+=i.length),Hn[s]?(i?l(t).empty=!1:l(t).unusedTokens.push(s),G(s,i,t)):t._strict&&!i&&l(t).unusedTokens.push(s);l(t).charsLeftOver=u-h,a.length>0&&l(t).unusedInput.push(a),l(t).bigHour===!0&&t._a[li]<=12&&t._a[li]>0&&(l(t).bigHour=void 0),t._a[li]=xe(t._locale,t._a[li],t._meridiem),we(t),ee(t)}function xe(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function ke(e){var t,n,i,r,s;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Ce(t),d(t)&&(s+=l(t).charsLeftOver,s+=10*l(t).unusedTokens.length,l(t).score=s,(null==i||i>s)&&(i=s,n=t));u(e,n||t)}function De(e){if(!e._d){var t=E(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],we(e)}}function Se(e){var t=new g(ee(Oe(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Oe(e){var t=e._i,n=e._f;return e._locale=e._locale||D(e._l),null===t||void 0===n&&""===t?f({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new g(ee(t)):(r(n)?ke(e):n?Ce(e):s(t)?e._d=t:Ee(e),e))}function Ee(t){var n=t._i;void 0===n?t._d=new Date:s(n)?t._d=new Date(+n):"string"==typeof n?se(t):r(n)?(t._a=o(n.slice(0),function(e){return parseInt(e,10)}),we(t)):"object"==typeof n?De(t):"number"==typeof n?t._d=new Date(n):e.createFromInputFallback(t)}function Te(e,t,n,i,r){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=e,s._f=t,s._strict=i,Se(s)}function Re(e,t,n,i){return Te(e,t,n,i,!1)}function Ae(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Re();for(n=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](n))&&(n=t[i]);return n}function Ve(){var e=[].slice.call(arguments,0);return Ae("isBefore",e)}function Ie(){var e=[].slice.call(arguments,0);return Ae("isAfter",e)}function Ye(e){var t=E(e),n=t.year||0,i=t.quarter||0,r=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,u=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*h+6e4*u+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=D(),this._bubble()}function je(e){return e instanceof Ye}function Be(e,t){Y(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)})}function Ne(e){var t=(e||"").match(ii)||[],n=t[t.length-1]||[],i=(n+"").match(Di)||["-",0,0],r=+(60*i[1])+_(i[2]);return"+"===i[0]?r:-r}function Fe(t,n){var i,r;return n._isUTC?(i=n.clone(),r=(m(t)||s(t)?+t:+Re(t))-+i,i._d.setTime(+i._d+r),e.updateOffset(i,!1),i):Re(t).local()}function Pe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Le(t,n){var i,r=this._offset||0;return null!=t?("string"==typeof t&&(t=Ne(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=Pe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?it(this,Ke(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Pe(this)}function Ue(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function ze(e){return this.utcOffset(0,e)}function We(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pe(this),"m")),this}function He(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ne(this._i)),this}function Ge(e){return e=e?Re(e).utcOffset():0,(this.utcOffset()-e)%60===0}function $e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qe(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(p(e,this),e=Oe(e),e._a){var t=e._isUTC?h(e._a):Re(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Je(){return!this._isUTC}function Ze(){return this._isUTC}function Xe(){return this._isUTC&&0===this._offset}function Ke(e,t){var n,i,r,s=e,o=null;return je(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(o=Si.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:_(o[ci])*n,h:_(o[li])*n,m:_(o[di])*n,s:_(o[fi])*n,ms:_(o[pi])*n}):(o=Oi.exec(e))?(n="-"===o[1]?-1:1,s={y:Qe(o[2],n),M:Qe(o[3],n),d:Qe(o[4],n),h:Qe(o[5],n),m:Qe(o[6],n),s:Qe(o[7],n),w:Qe(o[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=tt(Re(s.from),Re(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),i=new Ye(s),je(e)&&a(e,"_locale")&&(i._locale=e._locale),i}function Qe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function et(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function tt(e,t){var n;return t=Fe(t,e),e.isBefore(t)?n=et(e,t):(n=et(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function nt(e,t){return function(n,i){var r,s;return null===i||isNaN(+i)||(ie(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Ke(n,i),it(this,r,e),this}}function it(t,n,i,r){var s=n._milliseconds,o=n._days,a=n._months;r=null==r?!0:r,s&&t._d.setTime(+t._d+s*i),o&&A(t,"Date",R(t,"Date")+o*i),a&&X(t,R(t,"Month")+a*i),r&&e.updateOffset(t,o||a)}function rt(e,t){var n=e||Re(),i=Fe(n,this).startOf("day"),r=this.diff(i,"days",!0),s=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(t&&t[s]||this.localeData().calendar(s,this,Re(n)))}function st(){return new g(this)}function ot(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Re(e),+this>+e):(n=m(e)?+e:+Re(e),n<+this.clone().startOf(t))}function at(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Re(e),+e>+this):(n=m(e)?+e:+Re(e),+this.clone().endOf(t)<n)}function ut(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ht(e,t){var n;return t=O(t||"millisecond"),"millisecond"===t?(e=m(e)?e:Re(e),+this===+e):(n=+Re(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function ct(e,t,n){var i,r,s=Fe(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=O(t),"year"===t||"month"===t||"quarter"===t?(r=lt(this,s),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-s,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?r:v(r)}function lt(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(r,"months");return 0>t-s?(n=e.clone().add(r-1,"months"),i=(t-s)/(s-n)):(n=e.clone().add(r+1,"months"),i=(t-s)/(n-s)),-(r+i)}function dt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ft(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pt(t){var n=N(this,t||e.defaultFormat);return this.localeData().postformat(n)}function gt(e,t){return this.isValid()?Ke({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.from(Re(),e)}function vt(e,t){return this.isValid()?Ke({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _t(e){return this.to(Re(),e)}function yt(e){var t;return void 0===e?this._locale._abbr:(t=D(e),null!=t&&(this._locale=t),this)}function bt(){return this._locale}function wt(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Mt(e){return e=O(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function Ct(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function kt(){return this._offset?new Date(+this):this._d}function Dt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ot(){return d(this)}function Et(){return u({},l(this))}function Tt(){return l(this).overflow}function Rt(e,t){Y(0,[e,e.length],0,t)}function At(e,t,n){return le(Re([e,11,31+t-n]),t,n).week}function Vt(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function It(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Yt(){return At(this.year(),1,4)}function jt(){var e=this.localeData()._week;return At(this.year(),e.dow,e.doy)}function Bt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Nt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ft(e){return this._weekdays[e.day()]}function Pt(e){return this._weekdaysShort[e.day()]}function Lt(e){return this._weekdaysMin[e.day()]}function Ut(e){var t,n,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Re([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function zt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nt(e,this.localeData()),this.add(e-t,"d")):t}function Wt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ht(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Gt(e,t){Y(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function $t(e,t){return t._meridiemParse}function qt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Jt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Zt(e,t){t[pi]=_(1e3*("0."+e))}function Xt(){return this._isUTC?"UTC":""}function Kt(){return this._isUTC?"Coordinated Universal Time":""}function Qt(e){return Re(1e3*e)}function en(){return Re.apply(null,arguments).parseZone()}function tn(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function nn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function rn(){return this._invalidDate}function sn(e){return this._ordinal.replace("%d",e)}function on(e){return e}function an(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)}function un(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function hn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function cn(e,t,n,i){var r=D(),s=h().set(i,t);return r[n](s,e)}function ln(e,t,n,i,r){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,r);var s,o=[];for(s=0;i>s;s++)o[s]=cn(e,s,n,r);return o}function dn(e,t){return ln(e,t,"months",12,"month")}function fn(e,t){return ln(e,t,"monthsShort",12,"month")}function pn(e,t){return ln(e,t,"weekdays",7,"day")}function gn(e,t){return ln(e,t,"weekdaysShort",7,"day")}function mn(e,t){return ln(e,t,"weekdaysMin",7,"day")}function vn(){var e=this._data;return this._milliseconds=Xi(this._milliseconds),this._days=Xi(this._days),this._months=Xi(this._months),e.milliseconds=Xi(e.milliseconds),e.seconds=Xi(e.seconds),e.minutes=Xi(e.minutes),e.hours=Xi(e.hours),e.months=Xi(e.months),e.years=Xi(e.years),this}function _n(e,t,n,i){var r=Ke(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function yn(e,t){return _n(this,e,t,1)}function bn(e,t){return _n(this,e,t,-1)}function wn(e){return 0>e?Math.floor(e):Math.ceil(e)}function Mn(){var e,t,n,i,r,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||0>=s&&0>=o&&0>=a||(s+=864e5*wn(xn(a)+o),o=0,a=0),u.milliseconds=s%1e3,e=v(s/1e3),u.seconds=e%60,t=v(e/60),u.minutes=t%60,n=v(t/60),u.hours=n%24,o+=v(n/24),r=v(Cn(o)),a+=r,o-=wn(xn(r)),i=v(a/12),a%=12,u.days=o,u.months=a,u.years=i,this}function Cn(e){return 4800*e/146097}function xn(e){return 146097*e/4800}function kn(e){var t,n,i=this._milliseconds;if(e=O(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+Cn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(xn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Dn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)}function Sn(e){return function(){return this.as(e)}}function On(e){return e=O(e),this[e+"s"]()}function En(e){return function(){return this._data[e]}}function Tn(){return v(this.days()/7)}function Rn(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function An(e,t,n){var i=Ke(e).abs(),r=fr(i.as("s")),s=fr(i.as("m")),o=fr(i.as("h")),a=fr(i.as("d")),u=fr(i.as("M")),h=fr(i.as("y")),c=r<pr.s&&["s",r]||1===s&&["m"]||s<pr.m&&["mm",s]||1===o&&["h"]||o<pr.h&&["hh",o]||1===a&&["d"]||a<pr.d&&["dd",a]||1===u&&["M"]||u<pr.M&&["MM",u]||1===h&&["y"]||["yy",h];return c[2]=t,c[3]=+e>0,c[4]=n,Rn.apply(null,c)}function Vn(e,t){return void 0===pr[e]?!1:void 0===t?pr[e]:(pr[e]=t,!0)}function In(e){var t=this.localeData(),n=An(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Yn(){var e,t,n,i=gr(this._milliseconds)/1e3,r=gr(this._days),s=gr(this._months);e=v(i/60),t=v(e/60),i%=60,e%=60,n=v(s/12),s%=12;var o=n,a=s,u=r,h=t,c=e,l=i,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(h||c||l?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(l?l+"S":""):"P0D"}var jn,Bn,Nn=e.momentProperties=[],Fn=!1,Pn={},Ln={},Un=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wn={},Hn={},Gn=/\d/,$n=/\d\d/,qn=/\d{3}/,Jn=/\d{4}/,Zn=/[+-]?\d{6}/,Xn=/\d\d?/,Kn=/\d{1,3}/,Qn=/\d{1,4}/,ei=/[+-]?\d{1,6}/,ti=/\d+/,ni=/[+-]?\d+/,ii=/Z|[+-]\d\d:?\d\d/gi,ri=/[+-]?\d+(\.\d{1,3})?/,si=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,oi={},ai={},ui=0,hi=1,ci=2,li=3,di=4,fi=5,pi=6;Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),Y("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),L("M",Xn),L("MM",Xn,$n),L("MMM",si),L("MMMM",si),W(["M","MM"],function(e,t){t[hi]=_(e)-1}),W(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[hi]=r:l(n).invalidMonth=e});var gi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vi={};e.suppressDeprecationWarnings=!1;var _i=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],wi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ne("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),S("year","y"),L("Y",ni),L("YY",Xn,$n),L("YYYY",Qn,Jn),L("YYYYY",ei,Zn),L("YYYYYY",ei,Zn),W(["YYYYY","YYYYYY"],ui),W("YYYY",function(t,n){n[ui]=2===t.length?e.parseTwoDigitYear(t):_(t)}),W("YY",function(t,n){n[ui]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var Mi=T("FullYear",!1);Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),L("w",Xn),L("ww",Xn,$n),L("W",Xn),L("WW",Xn,$n),H(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=_(e)});var Ci={dow:0,doy:6};Y("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),L("DDD",Kn),L("DDDD",qn),W(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),e.ISO_8601=function(){};var xi=ne("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Re.apply(null,arguments);return this>e?this:e}),ki=ne("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Re.apply(null,arguments);return e>this?this:e});Be("Z",":"),Be("ZZ",""),L("Z",ii),L("ZZ",ii),W(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ne(e)});var Di=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Si=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Oi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ke.fn=Ye.prototype;var Ei=nt(1,"add"),Ti=nt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ri=ne("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Rt("gggg","weekYear"),Rt("ggggg","weekYear"),Rt("GGGG","isoWeekYear"),Rt("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),L("G",ni),L("g",ni),L("GG",Xn,$n),L("gg",Xn,$n),L("GGGG",Qn,Jn),L("gggg",Qn,Jn),L("GGGGG",ei,Zn),L("ggggg",ei,Zn),H(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=_(e)}),H(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),Y("Q",0,0,"quarter"),S("quarter","Q"),L("Q",Gn),W("Q",function(e,t){t[hi]=3*(_(e)-1)}),Y("D",["DD",2],"Do","date"),S("date","D"),L("D",Xn),L("DD",Xn,$n),L("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),W(["D","DD"],ci),W("Do",function(e,t){t[ci]=_(e.match(Xn)[0],10)});var Ai=T("Date",!0);Y("d",0,"do","day"),Y("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),Y("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),Y("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),L("d",Xn),L("e",Xn),L("E",Xn),L("dd",si),L("ddd",si),L("dddd",si),H(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:l(n).invalidWeekday=e}),H(["d","e","E"],function(e,t,n,i){t[i]=_(e)});var Vi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ii="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Yi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,function(){return this.hours()%12||12}),Gt("a",!0),Gt("A",!1),S("hour","h"),L("a",$t),L("A",$t),L("H",Xn),L("h",Xn),L("HH",Xn,$n),L("hh",Xn,$n),W(["H","HH"],li),W(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),W(["h","hh"],function(e,t,n){t[li]=_(e),l(n).bigHour=!0});var ji=/[ap]\.?m?\.?/i,Bi=T("Hours",!0);Y("m",["mm",2],0,"minute"),S("minute","m"),L("m",Xn),L("mm",Xn,$n),W(["m","mm"],di);var Ni=T("Minutes",!1);Y("s",["ss",2],0,"second"),S("second","s"),L("s",Xn),L("ss",Xn,$n),W(["s","ss"],fi);var Fi=T("Seconds",!1);Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),L("S",Kn,Gn),L("SS",Kn,$n),L("SSS",Kn,qn);var Pi;for(Pi="SSSS";Pi.length<=9;Pi+="S")L(Pi,ti);for(Pi="S";Pi.length<=9;Pi+="S")W(Pi,Zt);var Li=T("Milliseconds",!1);Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var Ui=g.prototype;Ui.add=Ei,Ui.calendar=rt,Ui.clone=st,Ui.diff=ct,Ui.endOf=Mt,Ui.format=pt,Ui.from=gt,Ui.fromNow=mt,Ui.to=vt,Ui.toNow=_t,Ui.get=V,Ui.invalidAt=Tt,Ui.isAfter=ot,Ui.isBefore=at,Ui.isBetween=ut,Ui.isSame=ht,Ui.isValid=Ot,Ui.lang=Ri,Ui.locale=yt,Ui.localeData=bt,Ui.max=ki,Ui.min=xi,Ui.parsingFlags=Et,Ui.set=V,Ui.startOf=wt,Ui.subtract=Ti,Ui.toArray=Dt,Ui.toObject=St,Ui.toDate=kt,Ui.toISOString=ft,Ui.toJSON=ft,Ui.toString=dt,Ui.unix=xt,Ui.valueOf=Ct,Ui.year=Mi,Ui.isLeapYear=ce,Ui.weekYear=Vt,Ui.isoWeekYear=It,Ui.quarter=Ui.quarters=Bt,Ui.month=K,Ui.daysInMonth=Q,Ui.week=Ui.weeks=ge,Ui.isoWeek=Ui.isoWeeks=me,Ui.weeksInYear=jt,Ui.isoWeeksInYear=Yt,Ui.date=Ai,Ui.day=Ui.days=zt,Ui.weekday=Wt,Ui.isoWeekday=Ht,Ui.dayOfYear=_e,Ui.hour=Ui.hours=Bi,Ui.minute=Ui.minutes=Ni,Ui.second=Ui.seconds=Fi,Ui.millisecond=Ui.milliseconds=Li,Ui.utcOffset=Le,Ui.utc=ze,Ui.local=We,Ui.parseZone=He,Ui.hasAlignedHourOffset=Ge,Ui.isDST=$e,Ui.isDSTShifted=qe,Ui.isLocal=Je,Ui.isUtcOffset=Ze,Ui.isUtc=Xe,Ui.isUTC=Xe,Ui.zoneAbbr=Xt,Ui.zoneName=Kt,Ui.dates=ne("dates accessor is deprecated. Use date instead.",Ai),Ui.months=ne("months accessor is deprecated. Use month instead",K),Ui.years=ne("years accessor is deprecated. Use year instead",Mi),Ui.zone=ne("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ue);var zi=Ui,Wi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Gi="Invalid date",$i="%d",qi=/\d{1,2}/,Ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Zi=b.prototype;Zi._calendar=Wi,Zi.calendar=tn,Zi._longDateFormat=Hi,Zi.longDateFormat=nn,Zi._invalidDate=Gi,Zi.invalidDate=rn,Zi._ordinal=$i,Zi.ordinal=sn,Zi._ordinalParse=qi,Zi.preparse=on,Zi.postformat=on,Zi._relativeTime=Ji,Zi.relativeTime=an,Zi.pastFuture=un,Zi.set=hn,Zi.months=q,Zi._months=gi,Zi.monthsShort=J,Zi._monthsShort=mi,Zi.monthsParse=Z,Zi.week=de,Zi._week=Ci,Zi.firstDayOfYear=pe,Zi.firstDayOfWeek=fe,Zi.weekdays=Ft,Zi._weekdays=Vi,Zi.weekdaysMin=Lt,Zi._weekdaysMin=Yi,Zi.weekdaysShort=Pt,Zi._weekdaysShort=Ii,Zi.weekdaysParse=Ut,Zi.isPM=qt,Zi._meridiemParse=ji,Zi.meridiem=Jt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=ne("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=ne("moment.langData is deprecated. Use moment.localeData instead.",D);var Xi=Math.abs,Ki=Sn("ms"),Qi=Sn("s"),er=Sn("m"),tr=Sn("h"),nr=Sn("d"),ir=Sn("w"),rr=Sn("M"),sr=Sn("y"),or=En("milliseconds"),ar=En("seconds"),ur=En("minutes"),hr=En("hours"),cr=En("days"),lr=En("months"),dr=En("years"),fr=Math.round,pr={s:45,m:45,h:22,d:26,M:11},gr=Math.abs,mr=Ye.prototype;mr.abs=vn,mr.add=yn,mr.subtract=bn,mr.as=kn,mr.asMilliseconds=Ki,mr.asSeconds=Qi,mr.asMinutes=er,mr.asHours=tr,mr.asDays=nr,mr.asWeeks=ir,mr.asMonths=rr,mr.asYears=sr,mr.valueOf=Dn,mr._bubble=Mn,mr.get=On,mr.milliseconds=or,mr.seconds=ar,mr.minutes=ur,mr.hours=hr,mr.days=cr,mr.weeks=Tn,mr.months=lr,mr.years=dr,mr.humanize=In,mr.toISOString=Yn,mr.toString=Yn,mr.toJSON=Yn,mr.locale=yt,mr.localeData=bt,mr.toIsoString=ne("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Yn),mr.lang=Ri,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),L("x",ni),L("X",ri),W("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),W("x",function(e,t,n){n._d=new Date(_(e))}),e.version="2.10.6",i(Re),e.fn=zi,e.min=Ve,e.max=Ie,e.utc=h,e.unix=Qt,e.months=dn,e.isDate=s,e.locale=x,e.invalid=f,e.duration=Ke,e.isMoment=m,e.weekdays=pn,e.parseZone=en,e.localeData=D,e.isDuration=je,e.monthsShort=fn,e.weekdaysMin=mn,e.defineLocale=k,e.weekdaysShort=gn,e.normalizeUnits=O,e.relativeTimeThreshold=Vn;var vr=e;return vr})},{}],49:[function(t,n,i){!function(r,s){"use strict";var o;if("object"==typeof i){try{o=t("moment")}catch(a){}n.exports=s(o)}else"function"==typeof e&&e.amd?e(function(e){var t="moment";try{o=e(t)}catch(n){}return s(o)}):r.Pikaday=s(r.moment)}(this,function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,i=window.document,r=window.setTimeout,s=function(e,t,i,r){n?e.addEventListener(t,i,!!r):e.attachEvent("on"+t,i)},o=function(e,t,i,r){n?e.removeEventListener(t,i,!!r):e.detachEvent("on"+t,i)},a=function(e,t,n){var r;i.createEvent?(r=i.createEvent("HTMLEvents"),r.initEvent(t,!0,!1),r=y(r,n),e.dispatchEvent(r)):i.createEventObject&&(r=i.createEventObject(),r=y(r,n),e.fireEvent("on"+t,r))},u=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},h=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},c=function(e,t){h(e,t)||(e.className=""===e.className?t:e.className+" "+t)},l=function(e,t){e.className=u((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},f=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},p=function(e){var t=e.getDay();return 0===t||6===t},g=function(e){return e%4===0&&e%100!==0||e%400===0},m=function(e,t){return[31,g(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},v=function(e){f(e)&&e.setHours(0,0,0,0)},_=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var i,r;for(i in t)r=void 0!==e[i],r&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?f(t[i])?n&&(e[i]=new Date(t[i].getTime())):d(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=y({},t[i],n):(n||!r)&&(e[i]=t[i]);return e},b=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},w={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},M=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},C=function(e){if(e.isEmpty)return'<td class="is-empty"></td>';var t=[];return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&t.push("is-selected"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},x=function(e,t,n){var i=new Date(n,0,1),r=Math.ceil(((new Date(n,t,e)-i)/864e5+i.getDay()+1)/7);return'<td class="pika-week">'+r+"</td>"},k=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},D=function(e){return"<tbody>"+e.join("")+"</tbody>"},S=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;7>t;t++)n.push('<th scope="col"><abbr title="'+M(e,t)+'">'+M(e,t,!0)+"</abbr></th>");return"<thead>"+(e.isRTL?n.reverse():n).join("")+"</thead>"},O=function(e,t,n,i,r){var s,o,a,u,h,c=e._o,l=n===c.minYear,f=n===c.maxYear,p='<div class="pika-title">',g=!0,m=!0;for(a=[],s=0;12>s;s++)a.push('<option value="'+(n===r?s-t:12+s-t)+'"'+(s===i?" selected":"")+(l&&s<c.minMonth||f&&s>c.maxMonth?"disabled":"")+">"+c.i18n.months[s]+"</option>");for(u='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+a.join("")+"</select></div>",d(c.yearRange)?(s=c.yearRange[0],o=c.yearRange[1]+1):(s=n-c.yearRange,o=1+n+c.yearRange),a=[];o>s&&s<=c.maxYear;s++)s>=c.minYear&&a.push('<option value="'+s+'"'+(s===n?" selected":"")+">"+s+"</option>");return h='<div class="pika-label">'+n+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+a.join("")+"</select></div>",p+=c.showMonthAfterYear?h+u:u+h,l&&(0===i||c.minMonth>=i)&&(g=!1),f&&(11===i||c.maxMonth<=i)&&(m=!1),0===t&&(p+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(p+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),p+="</div>"},E=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+S(e)+D(t)+"</table>"},T=function(o){var a=this,u=a.config(o);a._onMouseDown=function(e){if(a._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(h(t,"is-disabled")||(h(t,"pika-button")&&!h(t,"is-empty")?(a.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),u.bound&&r(function(){a.hide(),u.field&&u.field.blur()},100)):h(t,"pika-prev")?a.prevMonth():h(t,"pika-next")&&a.nextMonth()),h(t,"pika-select"))a._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},a._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(h(t,"pika-select-month")?a.gotoMonth(t.value):h(t,"pika-select-year")&&a.gotoYear(t.value))},a._onInputChange=function(n){var i;n.firedBy!==a&&(t?(i=e(u.field.value,u.format),i=i&&i.isValid()?i.toDate():null):i=new Date(Date.parse(u.field.value)),f(i)&&a.setDate(i),a._v||a.show())},a._onInputFocus=function(){a.show()},a._onInputClick=function(){a.show()},a._onInputBlur=function(){var e=i.activeElement;do if(h(e,"pika-single"))return;while(e=e.parentNode);a._c||(a._b=r(function(){a.hide()},50)),a._c=!1},a._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,i=t;if(t){!n&&h(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),s(t,"change",a._onChange)));do if(h(i,"pika-single")||i===u.trigger)return;while(i=i.parentNode);a._v&&t!==u.trigger&&i!==u.trigger&&a.hide()}},a.el=i.createElement("div"),a.el.className="pika-single"+(u.isRTL?" is-rtl":"")+(u.theme?" "+u.theme:""),s(a.el,"mousedown",a._onMouseDown,!0),s(a.el,"touchend",a._onMouseDown,!0),s(a.el,"change",a._onChange),u.field&&(u.container?u.container.appendChild(a.el):u.bound?i.body.appendChild(a.el):u.field.parentNode.insertBefore(a.el,u.field.nextSibling),s(u.field,"change",a._onInputChange),u.defaultDate||(t&&u.field.value?u.defaultDate=e(u.field.value,u.format).toDate():u.defaultDate=new Date(Date.parse(u.field.value)),u.setDefaultDate=!0));var c=u.defaultDate;f(c)?u.setDefaultDate?a.setDate(c,!0):a.gotoDate(c):a.gotoDate(new Date),u.bound?(this.hide(),a.el.className+=" is-bound",s(u.trigger,"click",a._onInputClick),s(u.trigger,"focus",a._onInputFocus),s(u.trigger,"blur",a._onInputBlur)):this.show()};return T.prototype={config:function(e){this._o||(this._o=y({},w,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,f(t.minDate)||(t.minDate=!1),f(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||w.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return f(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),f(e)){var n=this._o.minDate,i=this._o.maxDate;f(n)&&n>e?e=n:f(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(f(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=r<n.getTime()||i.getTime()<r}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){v(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth(),this.draw()},setMaxDate:function(e){v(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth(),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t=this._o,n=t.minYear,i=t.maxYear,s=t.minMonth,o=t.maxMonth,a="";this._y<=n&&(this._y=n,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=i&&(this._y=i,!isNaN(o)&&this._m>o&&(this._m=o));for(var u=0;u<t.numberOfMonths;u++)a+='<div class="pika-lendar">'+O(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year)+this.render(this.calendars[u].year,this.calendars[u].month)+"</div>";if(this.el.innerHTML=a,t.bound&&"hidden"!==t.field.type&&r(function(){t.trigger.focus()},1),"function"==typeof this._o.onDraw){var h=this;r(function(){h._o.onDraw.call(h)},0)}}},adjustPosition:function(){var e,t,n,r,s,o,a,u,h,c;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,r=this.el.offsetHeight,s=window.innerWidth||i.documentElement.clientWidth,o=window.innerHeight||i.documentElement.clientHeight,a=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)c=e.getBoundingClientRect(),u=c.left+window.pageXOffset,h=c.bottom+window.pageYOffset;else for(u=t.offsetLeft,h=t.offsetTop+t.offsetHeight;t=t.offsetParent;)u+=t.offsetLeft,h+=t.offsetTop;(this._o.reposition&&u+n>s||this._o.position.indexOf("right")>-1&&u-n+e.offsetWidth>0)&&(u=u-n+e.offsetWidth),(this._o.reposition&&h+r>o+a||this._o.position.indexOf("top")>-1&&h-r-e.offsetHeight>0)&&(h=h-r-e.offsetHeight),this.el.style.left=u+"px",this.el.style.top=h+"px"}},render:function(e,t){var n=this._o,i=new Date,r=m(e,t),s=new Date(e,t,1).getDay(),o=[],a=[];v(i),n.firstDay>0&&(s-=n.firstDay,0>s&&(s+=7));for(var u=r+s,h=u;h>7;)h-=7;u+=7-h;for(var c=0,l=0;u>c;c++){var d=new Date(e,t,1+(c-s)),g=f(this._d)?_(d,this._d):!1,y=_(d,i),b=s>c||c>=r+s,w=n.startRange&&_(n.startRange,d),M=n.endRange&&_(n.endRange,d),D=n.startRange&&n.endRange&&n.startRange<d&&d<n.endRange,S=n.minDate&&d<n.minDate||n.maxDate&&d>n.maxDate||n.disableWeekends&&p(d)||n.disableDayFn&&n.disableDayFn(d),O={day:1+(c-s),month:t,year:e,isSelected:g,isToday:y,isDisabled:S,isEmpty:b,isStartRange:w,isEndRange:M,isInRange:D};a.push(C(O)),7===++l&&(n.showWeekNumber&&a.unshift(x(c-s,t,e)),o.push(k(a,n.isRTL)),a=[],l=0)}return E(n,o)},isVisible:function(){return this._v},show:function(){this._v||(l(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(s(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&o(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",c(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),o(this.el,"mousedown",this._onMouseDown,!0),o(this.el,"touchend",this._onMouseDown,!0),o(this.el,"change",this._onChange),this._o.field&&(o(this._o.field,"change",this._onInputChange),this._o.bound&&(o(this._o.trigger,"click",this._onInputClick),o(this._o.trigger,"focus",this._onInputFocus),o(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},T})},{moment:48}],50:[function(t,n,i){!function(t,r){"function"==typeof e&&e.amd?e([],function(){return t.svg4everybody=r()}):"object"==typeof i?n.exports=r():t.svg4everybody=r()}(this,function(){function e(e,t){if(t){var n=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),i=document.createDocumentFragment(),r=t.cloneNode(!0);for(n&&e.setAttribute("viewBox",n);r.childNodes.length;)i.appendChild(r.firstChild);e.appendChild(i)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var n=document.createElement("x");n.innerHTML=t.responseText,t.s.splice(0).map(function(t){e(t[0],n.querySelector("#"+t[1].replace(/(\W)/g,"\\$1")))})}},t.onreadystatechange()}function n(n){function i(){for(var n,l,d=0;d<s.length;)if(n=s[d],l=n.parentNode,l&&/svg/i.test(l.nodeName)){var f=n.getAttribute("xlink:href");if(r){var p=new Image,g=l.getAttribute("width"),m=l.getAttribute("height");p.src=o(f,l,n),g&&p.setAttribute("width",g),m&&p.setAttribute("height",m),l.replaceChild(p,n)}else if(a&&(!u||u(f,l,n))){var v=f.split("#"),_=v[0],y=v[1];if(l.removeChild(n),_.length){var b=c[_]=c[_]||new XMLHttpRequest;b.s||(b.s=[],b.open("GET",_),b.send()),b.s.push([l,y]),t(b)}else e(l,document.getElementById(y))}}else d+=1;h(i,17)}n=n||{};var r,s=document.getElementsByTagName("use"),o=n.fallback||function(e){return e.replace(/\?[^#]+/,"").replace("#",".").replace(/^\./,"")+".png"+(/\?[^#]+/.exec(e)||[""])[0]};r="nosvg"in n?n.nosvg:/\bMSIE [1-8]\b/.test(navigator.userAgent),r&&(document.createElement("svg"),document.createElement("use"));var a="polyfill"in n?n.polyfill:r||/\bEdge\/12\b|\bMSIE [1-8]\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,u=n.validate,h=window.requestAnimationFrame||setTimeout,c={};a&&i()}return n})},{}],51:[function(t,n,i){("undefined"!=typeof n&&function(e){n.exports=e()}||"function"==typeof e&&function(t){e("underscoreDeepExtend",t)}||function(e){window.underscoreDeepExtend=e()})(function(){return function(e){return function(t){var n=/#{\s*?_\s*?}/,i=Array.prototype.slice,r=Object.prototype.hasOwnProperty;return e.each(i.call(arguments,1),function(i){for(var s in i)if(r.call(i,s))if(e.isUndefined(t[s])||e.isFunction(t[s])||e.isNull(i[s])||e.isDate(i[s]))t[s]=i[s];else if(e.isString(i[s])&&n.test(i[s]))e.isString(t[s])&&(t[s]=i[s].replace(n,t[s]));else if(e.isArray(t[s])||e.isArray(i[s])){if(!e.isArray(t[s])||!e.isArray(i[s]))throw"Error: Trying to combine an array with a non-array ("+s+")";t[s]=e.reject(e.deepExtend(t[s],i[s]),function(t){return e.isNull(t)})}else if(e.isObject(t[s])||e.isObject(i[s])){if(!e.isObject(t[s])||!e.isObject(i[s]))throw"Error: Trying to combine an object with a non-object ("+s+")";t[s]=e.deepExtend(t[s],i[s])}else t[s]=i[s]}),t}}})},{}]},{},[13])(13)})
;;
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CS_builder=e()}}(function(){var define;return function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({defaults:{message:cs.l18n("confirm-message"),subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[]},initialize:function(){this.listenTo(this.view,"confirm:warn:open",this.open),this.listenTo(cs.confirm,"accept",this.accept),this.listenTo(cs.confirm,"decline",this.decline)},events:function(){var e={},t=this.options.ui||"confirmWarn";return e["click @ui."+t]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{view:this.view}))},accept:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:accept")},decline:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:decline")}})},{}],2:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({initialize:function(){this.listenTo(this.view,"confirm:open",this.open)},events:function(){var e={},t=this.options.ui||"confirm";return e["click @ui."+t]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{allowQuickConfirm:this.view.canQuickConfirm,accept:_.bind(this.accept,this),decline:_.bind(this.decline,this)}),this.view)},accept:function(){this.view.triggerMethod("confirm:accept")},decline:function(){this.view.triggerMethod("confirm:decline")}})},{}],3:[function(e,t,n){t.exports.Confirm=e("./confirm"),t.exports.ConfirmWarn=e("./confirm-warn")},{"./confirm":2,"./confirm-warn":1}],4:[function(e,t,n){var i=e("mousetrap");e("mousetrap/plugins/global-bind/mousetrap-global-bind"),Cornerstone.Vendor.Mousetrap=i,Cornerstone.Vendor.NProgress=e("nprogress"),Cornerstone.Vendor.dragula=e("../vendor/dragula"),e("perfect-scrollbar/jquery")(Backbone.$),e("../vendor/pointer-events-polyfill"),e("../vendor/rgbaster"),e("../vendor/jquery.growl"),e("../vendor/jquery.visible"),Cornerstone.Vendor.HTMLHint=e("../vendor/htmlhint").HTMLHint,e("./utility/jquery.shadow-height"),e("./utility/string-replace-all"),cs.registerComponents(e("./components")),cs.updateConfig(csBuilderData),cs.updateRegistry({start:["mn-extensions","template-loader","view-loader","model-loader","keybindings","builder"],editor:["editor","post-handler","options","navigator","element-pane","template-manager","layout","layout-templates","inspector","settings","skeleton","element-manager","cheatsheet"],preview:["preview","render-queue"]})},{"../vendor/dragula":122,"../vendor/htmlhint":123,"../vendor/jquery.growl":124,"../vendor/jquery.visible":125,"../vendor/pointer-events-polyfill":126,"../vendor/rgbaster":127,"./components":25,"./utility/jquery.shadow-height":29,"./utility/string-replace-all":31,mousetrap:136,"mousetrap/plugins/global-bind/mousetrap-global-bind":137,nprogress:138,"perfect-scrollbar/jquery":139}],5:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data=Backbone.Radio.channel("cs:data"),cs.extra=Backbone.Radio.channel("cs:extra"),cs.observer=Backbone.Radio.channel("cs:observer"),cs.tooltips=Backbone.Radio.channel("cs:tooltips"),cs.search=Backbone.Radio.channel("cs:search"),cs.confirm=Backbone.Radio.channel("cs:confirm"),cs.message=Backbone.Radio.channel("cs:message"),this.cs.loadComponents(this.cs.config("isPreview")?"preview":"editor"),this.browserDetection(),document.onmousemove=function(e){cs.mouse=_.pick(e,"clientX","clientY","pageX","pageY")}},browserDetection:function(){var e=Cornerstone.Vendor.bowser;e.msie&&Backbone.$("body").addClass("cs-browser-msie cs-browser-msie-"+parseInt(e.version)),e.msedge&&Backbone.$("body").addClass("cs-browser-msedge cs-browser-msedge-"+parseInt(e.version))}})},{}],6:[function(e,t,n){t.exports=Cornerstone.Component.extend({bindings:{ark:"up up down down left right left right b a enter"},initialize:function(e){cs.keybind=Backbone.Radio.channel("cs:keybind"),this.listenTo(cs.events,"editor:init",this.setup),this.listenTo(cs.events,"preview:iframe:reloaded",this.setup),this.common()},setup:function(){this.listenTo(cs.global,"keybind",function(e){cs.keybind.trigger(e)}),this.bindings=_.extend(cs.config("keybindings"),this.bindings),_.each(this.bindings,function(e,t){var n=void 0,i=["keypress","keyup","keydown"];_.each(i,function(t){0==e.indexOf(t+":")&&(n=t,e=e.replace(t+":",""))}),Cornerstone.Vendor.Mousetrap.bindGlobal(e,function(){cs.global.trigger("keybind",t)},n)})},common:function(){this.listenTo(cs.keybind,"delete-confirm",function(){cs.data.reply("delete:confirm:key",!0),cs.events.trigger("delete:confirm:key",!0)}),this.listenTo(cs.keybind,"delete-release",function(){cs.data.reply("delete:confirm:key",!1),cs.events.trigger("delete:confirm:key",!1)})}})},{}],7:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.Behaviors=e("../../behaviors"),Cornerstone.Mn.Behaviors.behaviorsLookup=_.bind(function(){return this.Behaviors},this)}})},{"../../behaviors":3}],8:[function(e,t,n){t.exports=Cornerstone.Component.extend({modelLookup:function(e){return this.Models[e]||this.Models.Base},collectionLookup:function(e){return this.Collections[e]||this.Collections.Base}})},{}],9:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.render=this,this.cache={},this.jobs={},this.timing={};var e=parseInt(cs.config("remoteRenderDelay"),10);this.run=_.debounce(_.bind(this.run,this),e);var t=setTimeout(_.bind(function(){this.trigger("primed")},this),2*e);this.once("add",function(){clearTimeout(t)}),this.on("hold",function(e){this.holdRender=!!e,!1===e&&this.run()})},onQueue:function(e){var t=e.definition.get("flags");this.trigger("add",e);var n=e.toJSON(),i={};if(t.child){var o=e.collection.getParent();o&&(i.parent=o.getDataForChild())}_.isEmpty(i)||(n._transient=i),this.queue(e.cid,t._v,n,function(t){this.cache[e.cid]=t,e.trigger("remote:render")})},preRender:function(e){var t="new:"+e;if(!this.cache[t]){var n=cs.elementLibrary.lookup(e),i=new Cornerstone.Models.Element({_type:e}),o=i.toJSON();delete i,this.queue(t,n.get("flags")._v,o,function(e){this.cache[t]=e})}},shadow:function(e,t){var n=this.cache[t];n&&(this.cache[e.cid]=_.isFunction(n)?n:_.clone(n))},getCache:function(e){var t=this.cache[e.cid];return t||(this.triggerMethod("queue",e),t=cs.template("loading")),t},queue:function(e,t,n,i){var o=Date.now();this.timing[e]=o,this.jobs[e]={data:n,provider:t,ts:o,callback:i},this.holdRender||this.run()},run:function(e){if(!e){var t=_.map(this.jobs,function(e,t){return{jobID:t,ts:e.ts,provider:e.provider,data:e.data||{}}});e={post_id:cs.post.get("post_id"),batch:t},(cs.raw_markup||top&&top.cs&&top.cs.raw_markup)&&(e.raw_markup=!0),this.registeredJobs=_.clone(this.jobs),this.jobs={}}cs.ajax("cs_render_element",e,{success:_.bind(function(e){var t=[];e.scripts&&(t=t.concat(_.map(e.scripts,function(e,t){return function(n){cs.preview.trigger("late:script:enqueue",t,e,n)}},this))),e.styles&&(t=t.concat(_.map(e.styles,function(e,t){return function(n){cs.preview.trigger("late:style:enqueue",t,e,n)}},this))),t=t.concat(_.map(e.jobs,function(e,t){return _.bind(function(n){return e.ts<this.timing[t]?void n():(0===e.markup.indexOf("%%TMPL%%")&&(e.markup=e.markup.replace("%%TMPL%%",""),e.markup=_.template(e.markup)),""===e.markup&&(e.markup=cs.template("empty-element")),this.registeredJobs[t]&&!this.jobs[t]&&(this.registeredJobs[t].callback.call(this,e.markup),delete this.registeredJobs[t]),void n())},this)},this)),Cornerstone.serial(t).done(_.bind(function(e){this.trigger("primed"),e&&console.log(e)},this))},this)})},isRunning:function(){return _.keys(this.registeredJobs).length>0}})},{}],10:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.loadTemplates(e(this.cs.Config.isPreview?"../../../tmp/templates-elements.js":"../../../tmp/templates-builder.js")),this.listenTo(cs.events,"editor:init",this.populateIcons)},populateIcons:function(){cs.config("fontAwesome");var e={};_.each(_.pairs(cs.Config.fontAwesome),function(t){e[t[1]]=e[t[1]]||new Array,e[t[1]].push(t[0])}),this.icons=e,cs.data.reply("get:icons",this.icons)}})},{"../../../tmp/templates-builder.js":119,"../../../tmp/templates-elements.js":120}],11:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.events,"editor:init",this.registerControlViews),this.listenTo(cs.events,"editor:init",this.registerSkeletonViews),this.listenTo(cs.events,"preview:init",this.registerElementViews)},registerElementViews:function(){window.Cornerstone.ElementViews={Base:e("../../views/preview/base")},_.extend(window.Cornerstone.ElementViews,e("../../views/preview")),cs.events.trigger("register:element:views")},registerSkeletonViews:function(){window.Cornerstone.SkeletonViews={Base:e("../../views/skeleton/base")},_.extend(window.Cornerstone.SkeletonViews,e("../../views/skeleton")),cs.events.trigger("register:skeleton:views")},registerControlViews:function(){window.Cornerstone.ControlViews={Base:e("../../views/controls/base")},_.extend(window.Cornerstone.ControlViews,e("../../views/controls")),cs.events.trigger("register:control:views")},elementLookup:function(e){return Cornerstone.ElementViews[e]||Cornerstone.ElementViews.Base},skeletonLookup:function(e){return Cornerstone.SkeletonViews[e]||Cornerstone.SkeletonViews.Base}})},{"../../views/controls":46,"../../views/controls/base":32,"../../views/preview":103,"../../views/preview/base":97,"../../views/skeleton":116,"../../views/skeleton/base":114}],12:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("cheatsheet:data",!1)},fetchSheets:function(){cs.ajax("cs_cheatsheet",{post_id:this.cs.post.get("post_id")},{success:function(e){e&&e.sheets&&_.isArray(e.sheets)&&cs.data.reply("cheatsheet:data",e.sheets)}})}})},{}],13:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){cs.global=Backbone.Radio.channel("cs:remote"),this.listenToOnce(cs.global,"preview:primed",this.primed),Backbone.$(window).on("load",_.bind(this.loadView,this)),Backbone.$("#preview-frame").on("load",_.bind(this.loadIFrame,this)),Backbone.$(window).resize(function(e){cs.events.trigger("editor:resize",e)}),cs.events.trigger("editor:init"),this.listenTo(cs.elements,"element:deleted",function(){cs.global.trigger("kill:observer")})},primed:function(t){this.clearPreloader(),e("../../utility/custom-media-manager"),cs.global.reply("editor:ready",!0),cs.global.trigger("editor:ready"),t&&cs.message.trigger("notice",cs.l18n("preview-late"))},loadView:function(){var t=e("../../views/main/editor");this.view=new t({el:"#editor"}),this.view.render()},loadIFrame:function(){var e=document.getElementById("preview-frame").contentWindow;return e.cs&&e.cs.preview?void e.cs.preview.trigger("iframe:ready",this,cs):(console.log("Unable to initialize preview. iFrame failed to load."),void _.defer(function(){cs.global.trigger("preview:primed"),cs.global.trigger("preview:failure",cs.l18n("preview-failure1"))}))},clearPreloader:function(){$preloader=Backbone.$("#preloader").addClass("cs-preloader-fade").one("transitionend",function(){$preloader.remove()}),_.delay(function(){$preloader&&$preloader.remove()},2e3)}})},{"../../utility/custom-media-manager":27,"../../views/main/editor":89}],14:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.elementLibrary.registerContext("builder",this.elementFilter)},elementFilter:function(e){var t=e.get("flags");return 0==e.get("active")||!_.contains(["builder","all"],t.context)||t.child?!1:!0}})},{}],15:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.global,"element:delete",this.elDelete),this.listenTo(cs.global,"element:erase",this.erase),this.listenTo(cs.global,"element:duplicate",this.duplicate)},elDelete:function(e,t){function n(){_.defer(function(){cs.elements.trigger("delete",{model:e})})}function i(){_.defer(function(){cs.elements.trigger("add:item",e.get("_type"),e.collection.parent),cs.elements.trigger("delete",{model:e})})}var t=t||{};if(e.collection&&e.collection.parent&&e.collection.parent.atFloor())return void(t.noConfirm?i():cs.confirm.trigger("open",{message:cs.l18n("sortable-at-floor"),accept:i,allowQuickConfirm:!0}));if(t.noConfirm)n();else{var o=e.elements&&e.elements.length>0?"confirm-element-delete-contents":"confirm-element-delete";cs.confirm.trigger("open",{message:cs.l18n(o).replace("%s",e.definition.get("ui").title),accept:n,allowQuickConfirm:!0})}},erase:function(e,t){function n(){_.defer(function(){cs.elements.trigger("erase",{model:e})})}var t=t||{};t.noConfirm?n():cs.confirm.trigger("open",{message:cs.l18n("columns-erase-confirm"),accept:n,allowQuickConfirm:!0})},duplicate:function(e){cs.elements.trigger("duplicate",e)}})},{}],16:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={primary:new Cornerstone.InspectionSupervisor,secondary:new Cornerstone.InspectionSupervisor,expansion:new Cornerstone.InspectionSupervisor},this.resetInspector("primary"),this.listenTo(cs.events,"inspect:element",this.inspectElement),this.listenTo(cs.events,"expand:control",this.expansionSource),this.listenTo(cs.events,"expand:close",this.expansionClose),cs.navigate.reply("inspector:heading",cs.l18n("inspector-heading"))},inspectElement:function(e,t,n){var t=_.isUndefined(t)?!0:t,n=n||!0,i=e,o=!1;if(e.definition.get("flags").child){var s=e.collection.getParent();i=s.definition?s:!1,o=e}i&&(this.updateInspector("primary",i),t&&cs.navigate.trigger("inspector:home"),n&&cs.global.trigger("autoscroll",i.cid)),cs.config("debug")&&(cs.nowInspecting=i),o&&(this.updateInspector("secondary",o),t&&cs.navigate.trigger("inspector:item"))},resetInspector:function(e){"primary"==e&&(this.resetInspector("secondary"),this.setHeading(!1)),this.updateInspector(e,new Cornerstone.Models.Proxyable,[],[])},expansionSource:function(e,t){this.updateInspector("expansion",e,_.filter(e.definition.getControls(),function(e){return t==e.name})),cs.events.trigger("expand:control:open")},expansionClose:function(){this.inspect.expansion.reset()},updateInspector:function(e,t,n,i){if(this.inspect[e]){var o;this.listenToOnce(t,"imminent:replacement",function(e){this.listenToOnce(e,"created",function(e){this.inspectElement(e,!1),clearTimeout(o)})}),this.listenToOnce(t,"destroy",function(t){o=setTimeout(_.bind(function(){this.resetInspector(e,null)},this),5)}),n||(n=t.definition.getControls()),i||(i=this.getMetaControls(e,t)),this.inspect[e].source({name:"meta",source:t,controls:i}),this.inspect[e].source({name:"element",source:t,controls:n}),this.inspect[e].rebuildControls(),"primary"==e&&t.definition&&this.setHeading(t.definition.get("ui").title)}},getMetaControls:function(e,t){var n=[],i=t.definition.get("ui"),o=t.definition.get("name"),s="_internal"==t.definition.get("flags").context;if("primary"==e&&("settings"!==cs.navigate.request("active:pane")&&n.push({type:"breadcrumbs"}),i.helpText&&n.push({type:"info-box",ui:{title:i.helpText.title||"",message:i.helpText.message||""}}),!s)){var r=_.contains(["section","row","column"],o)?o:"element";n.push({type:r+"-actions"})}return n},setHeading:function(e){e||(e=cs.l18n("inspector-heading")),cs.navigate.reply("inspector:heading",e),cs.navigate.trigger("refresh:inspector:heading")},getPrimaryControls:function(){return this.inspect.primary.controls},getSecondaryControls:function(){return this.inspect.secondary.controls},getExpansionControls:function(){return this.inspect.expansion.controls}})},{}],17:[function(e,t,n){t.exports=Cornerstone.Component.extend({nativeSections:["themeco-pages","themeco-blocks"],userSections:["user-pages","user-blocks"],initialize:function(){this.data=new Backbone.Model({title:cs.l18n("templates-title")}),this.controls=new Cornerstone.Collections.Control,this.listenTo(cs.templates,"ready",this.setup),this.listenTo(cs.templates,"add",this.setup),this.listenTo(cs.templates,"remove",this.setup)},setup:function(){var e=new Cornerstone.Collections.Control;e.add({name:"info",type:"info-box",ui:{title:cs.l18n("templates-info-title"),message:cs.l18n("templates-info-description")}}),e.add({name:"action",type:"template-actions",ui:{divider:!0}}),e.add({name:"title",type:"template-save-dialog",condition:{action:"save"}}),e.add({name:"uploader",type:"template-upload-dialog",condition:{action:"upload"}});var t,n,i,o;o=cs.component("template-manager"),i=[],_.each(_.union(this.nativeSections,this.userSections),function(s){var r=o.templates.section(s);t=r.map(_.bind(function(e){return _.contains(this.userSections,s)&&i.push(e),{value:e.get("slug"),label:e.get("title")}},this)),n=s.indexOf("page")>-1?"page":"block",e.add({name:s,type:"template-select",ui:{title:cs.l18n("templates-"+s),buttonText:cs.l18n("templates-insert"),divider:"block"==n,compact:"block"==n},options:{choices:t,templateType:n}})},this),t=i.map(function(e){var t="block"==e.get("type")?cs.l18n("templates-remove-block"):cs.l18n("templates-remove-page");return{value:e.get("slug"),label:t.replace("%s",e.get("title"))}}),e.add({name:"user-removals",type:"template-remove",ui:{title:cs.l18n("templates-remove-label"),buttonText:cs.l18n("templates-remove")},options:{choices:t,templateType:"remove"}}),e.invoke("setProxy",this.data);var s=this.controls;this.controls=e,cs.templates.trigger("control:reset"),s.reset()}})},{}],18:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={},this.inspect.primary=new Cornerstone.InspectionSupervisor([{name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"help_text",key:"disabled",type:"info-box",ui:{title:cs.l18n("layout-info-title"),message:cs.l18n("layout-info-description")}},{name:"layout_actions",key:"disabled",type:"layout-actions",options:{divider:!0}}]},{name:"section",source:cs.post.data,controls:[{name:"sections",key:"elements",type:"sortable-sections"}]}]),this.inspect.secondary=new Cornerstone.InspectionSupervisor([{name:"section",source:new Cornerstone.Models.Proxyable,controls:[]},{name:"row",source:new Cornerstone.Models.Proxyable,controls:[]}]),cs.navigate.reply("layout:active:row",!1),this.listenTo(cs.events,"inspect:layout",this.inspectorDetector),this.listenTo(cs.events,"add:section",function(){cs.elements.trigger("add:item","section",cs.post.data,cs.l18n("section-numeric"))}),this.listenTo(cs.global,"incoming:element",function(e){cs.post.data.elements.isEmpty()&&(cs.events.trigger("add:section"),this.listenToOnce(cs.global,"incoming:element:end",function(e){try{var t=cs.post.data.elements.first();t.elements.first().elements.first().elements.isEmpty()&&cs.elements.trigger("delete",{model:t})}catch(n){}}))})},inspectSection:function(e,t,n){e&&(t||(t=e.elements.first()),cs.global.trigger("autoscroll",t.cid),cs.navigate.reply("layout:active:row",t),this.inspect.secondary.source({name:"section",source:e,controls:e.definition.getControls("_layout")}),this.inspect.secondary.source({name:"row",source:t,controls:t.definition.getControls("_layout")}),this.inspect.secondary.rebuildControls(),_.isFunction(n)&&n())},inspectRow:function(e){e&&this.inspectSection(e.collection.parent,e)},inspectorDetector:function(e,t){function n(){t.navigate&&cs.navigate.trigger("layout:rows")}var t=t||{};e.get("_type");switch(e.get("_type")){case"section":this.inspectSection(e,null,n);break;case"row":this.inspectSection(e.collection.parent,e,n);break;case"column":this.inspectSection(e.collection.parent.collection.parent,e.collection.parent,n)}}})},{}],19:[function(e,t,n){t.exports=Cornerstone.Component.extend({panes:{layout:["rows","templates"],elements:[],inspector:["item"],settings:["item"]},initialize:function(){cs.navigate=Backbone.Radio.channel("cs:navigate"),cs.navigate.reply("auto:focus",!1),this.listenTo(cs.navigate,"pane",this.killObserver),this.listenTo(cs.navigate,"subpane:opened",this.killObserver),this.listenTo(cs.navigate,"pane:switch",function(){cs.extra.trigger("flyout","none")}),this.listenTo(cs.global,"auto:focus",_.debounce(function(e){cs.navigate.reply("auto:focus",e),cs.navigate.trigger("auto:focus",e)},10,!0)),this.listenTo(cs.global,"inspect",function(e){cs.events.trigger("inspect:element",e,!0),cs.confirm.trigger("abort")}),cs.extra.reply("get:collapse",!1),_.each(this.panes,function(e,t){this.listenTo(cs.navigate,t+":home",function(e){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t)}),_.each(e,function(e){this.listenTo(cs.navigate,t+":"+e,function(n){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t,e)})},this)},this),this.listenTo(cs.global,"nav:kylelements",function(){cs.navigate.trigger("elements:home")})},killObserver:function(){cs.global.trigger("kill:observer")}})},{}],20:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.options=Backbone.Radio.channel("cs:options"),cs.options.reply("help:text","false"==localStorage.cs_options_help_text?!1:!0),cs.options.reply("skeleton:mode","true"==localStorage.cs_options_skeleton_mode),this.listenTo(cs.extra,"toggle",function(e){var t=!cs.options.request(e);cs.options.reply(e,t),cs.options.trigger(e,t),localStorage.setItem("cs_options_"+e.replaceAll(":","_"),t?"true":"false")})}})},{}],21:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.post=new Cornerstone.Post(cs.config("post")),this.listenTo(cs.events,"action:save",this.save),this.listenTo(cs.data,"save:success",this.saveSuccess),this.listenTo(cs.data,"save:error",this.saveError),this.listenTo(cs.global,"preview:primed",function(){this.listenTo(cs.channel,"page:unsaved",function(){cs.changed=!0})}),cs.data.reply("saved:last",null),window.onbeforeunload=function(e){return cs.changed?cs.l18n("home-onbeforeunload"):void 0}},saveSuccess:function(){cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last"),cs.changed=!1,"settings"==cs.navigate.request("active:pane")&&(localStorage.CornerstonePane="settings",location.reload())},save:function(){cs.data.trigger("save"),Cornerstone.Vendor.NProgress.configure({showSpinner:!1,speed:850,minimum:.925}),Cornerstone.Vendor.NProgress.start(),cs.ajax("cs_endpoint_save",_.omit(this.cs.post.toJSON(),["_type"]),{success:function(e){cs.data.trigger("save:success",e)},error:function(e){cs.data.trigger("save:error",e)},always:function(e){Cornerstone.Vendor.NProgress.done()}})}})},{}],22:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("settings:ready",!1),this.listenTo(cs.data,"save",this.save),this.listenTo(cs.global,"editor:ready",this.fetchSections),this.listenTo(cs.global,"settings:pingback",this.setupListeners)},save:function(){1==cs.data.request("settings:ready")&&this.cs.post.set("settings",this.getSettingData())},fetchSections:function(){cs.ajax("cs_setting_sections",{post_id:this.cs.post.get("post_id")},{success:_.bind(this.loadSettings,this)})},loadSettings:function(e){this.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"settings-actions",key:"disabled",type:"settings-actions"}]}),this.cs.settingSections=new Backbone.Collection(e.models),this.settings=new Cornerstone.Collections.Setting(e.data);var t=this.settings.findWhere({_section:"general"});t&&window.localStorage.getItem("cornerstone_auto_draft")===cs.post.data.get("post_id").toString()&&(localStorage.removeItem("cornerstone_auto_draft"),"draft"===t.get("post_status")&&t.set("post_status","publish")),this.settings.each(function(e){e.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:e,controls:e.section.get("controls")})}),cs.data.reply("settings:ready",!0),cs.global.trigger("settings:ready")},getSettings:function(){return this.settings},getSettingData:function(){return this.settings.invoke("updateChildData"),this.settings.toJSON()},getPrimaryControls:function(){return this.inspect.controls},setupListeners:function(){var e=this.settings.findWhere({_section:"general"});if(e?(window.localStorage.getItem("cornerstone_auto_draft")===cs.post.data.get("post_id").toString()&&(localStorage.removeItem("cornerstone_auto_draft"),"draft"===e.get("post_status")&&(console.log("MATCH"),e.set("post_status","publish"))),this.listenTo(e,"change:custom_css",function(e,t){cs.global.trigger("update:custom_css",t)}),cs.global.trigger("update:custom_css",e.get("custom_css"))):cs.warn("Unable to load Custom CSS because Cornerstone settings are corrupted."),e=this.settings.findWhere({_section:"responsive-text"})){var t=_.debounce(function(){cs.global.trigger("update:responsive_text",_.map(e.elements.toProxy().toJSON(),function(e){return _.pick(e,"selector","compression","min_size","max_size")}))},5);this.listenTo(e.elements,"model:change",t),this.listenTo(e.elements,"add",t),this.listenTo(e.elements,"remove",t),t()}else cs.warn("Unable to load Responsive Text because Cornerstone settings are corrupted. ")}})},{}],23:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("skeleton:preview:height",Backbone.$(window).height()),this.enabled=cs.options.request("skeleton:mode")||!1,this.toggle(this.enabled,!0),this.listenTo(cs.keybind,"skeleton-mode",function(){cs.extra.trigger("toggle","skeleton:mode")}),this.listenTo(cs.options,"skeleton:mode",function(e){this.toggle(e||void 0)}),this.listenTo(cs.global,"preview:resize",function(e){var t=e.Body.height>1?Math.min(e.Window.height,e.Body.height):e.Window.height;cs.data.reply("skeleton:preview:height",t),cs.events.trigger("resize:skeleton")}),this.listenTo(cs.global,"preview:failure",function(e){this.toggle(!0),this.locked=!0,cs.message.trigger("error",e),Backbone.$("body").addClass("cs-recovery-mode")})},toggle:function(e,t){return this.locked?void cs.message.trigger("warning",cs.l18n("skeleton-locked")):(_.isUndefined(e)&&(e=!this.enabled),this.enabled=e,cs.options.reply("skeleton:mode",this.enabled),t||cs.events.trigger("toggle:skeleton:mode",this.enabled),void Backbone.$("body").toggleClass("cs-skeleton-active",this.enabled).toggleClass("cs-skeleton-inactive",!this.enabled))}})},{}],24:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.templates=Backbone.Radio.channel("cs:templates"),this.templates=new Cornerstone.Collections.Template,this.selections=new Backbone.Collection,this.listenToOnce(cs.global,"preview:primed",this.requestTemplates),this.on("templates:recieved",this.loadTemplates),this.listenTo(cs.templates,"import",this.importTemplate),this.listenTo(cs.templates,"save",this.save),this.listenTo(cs.templates,"delete",this.deletion),this.listenTo(cs.templates,"download",this.blockDownload)},requestTemplates:function(){cs.ajax("cs_templates",{},{success:_.bind(function(e,t){this.templates.add(e),cs.templates.trigger("ready",this)},this)})},importTemplate:function(e,t){function n(){cs.render.trigger("hold",!1),cs.message.trigger("error",cs.l18n("templates-error-import"))}if("string"==typeof e){var i=this.templates.findWhere({slug:e});e=i?i.get("elements"):[]}var o=cs.post.elements();return"page"==t&&o.reset(),e&&e.length&&0!=e.length?("row"==e[0].elType&&(e=this.convertLegacy(_.clone(e))),void cs.ajax("cs_template_migration",{elements:e},{success:_.bind(function(e){var i=[];cs.render.trigger("hold",!0);new Promise(function(t,n){function s(){i.length<=0&&t();var e=i.pop();_.isFunction(e)&&e()}i=_.map(e.elements,function(e){return function(){try{o.create(e)}catch(t){return console.warn("Template import error",t),void n()}_.defer(s)}},this),i.reverse(),s()}).then(function(){cs.render.trigger("hold",!1),cs.message.trigger("success","page"==t?cs.l18n("templates-page-updated"):cs.l18n("templates-block-inserted"))},n)},this),error:n,always:function(e){cs.log("template_migration",e)}})):void cs.message.trigger("error",cs.l18n("templates-error-import"))},convertLegacy:function(e){var t=["bg_type","bg_color","bg_image","bg_pattern_toggle","parallax","bg_video","bg_video_poster","margin","padding","border_style","border_color","visibility","class","style"];return _.map(e,function(e){var n=_.pick(e,t);return n.elType="section",n.elements=[],n.elements.push(_.omit(e,t)),n})},save:function(e,t){var n=_.extend(_.pick(cs.post.toJSON(),["elements"]),{type:e||"block",title:t||"Untitled"});cs.ajax("cs_save_template",n,{success:_.bind(function(e){this.templates.add(e.template),cs.templates.trigger("add",this),cs.message.trigger("success",cs.l18n("templates-saved"),4e3)},this),error:function(e){cs.message.trigger("error",cs.l18n("templates-error-save"),1e4)},always:function(e){cs.log("save_template",e)}})},deletion:function(e){var t=this.templates.findWhere({slug:e});t&&(t.destroy(),this.deleteRemote(e),cs.templates.trigger("remove",this))},deleteRemote:function(e){cs.ajax("cs_delete_template",{slug:e},{success:function(e){cs.message.trigger("success",cs.l18n("templates-delete-success"),4e3)},error:function(e){cs.message.trigger("error",cs.l18n("templates-error-delete"),1e4)},always:function(e){cs.log("delete_template",e)}})},blockDownload:function(e){try{!!new Blob}catch(t){return void cs.message.trigger("error",cs.l18n("browser-no-can"))}var e=e||"template",n={title:e,elements:cs.post.toJSON().elements},i=e.replace(/\s+/g,"_"),o=JSON.stringify(n,null,2);Cornerstone.Vendor.FileSaver.saveAs(new Blob([o],{type:"text/plain;charset=utf-8"}),i+".csl")}})},{}],25:[function(e,t,n){t.exports={builder:e("./common/builder"),"mn-extensions":e("./common/mn-extensions"),"template-loader":e("./common/template-loader"),"view-loader":e("./common/view-loader"),"model-loader":e("./common/model-loader"),"render-queue":e("./common/render-queue"),keybindings:e("./common/keybindings"),editor:e("./editor/editor"),"element-pane":e("./editor/element-library"),navigator:e("./editor/navigator"),options:e("./editor/options"),layout:e("./editor/layout"),"layout-templates":e("./editor/layout-templates"),inspector:e("./editor/inspector"),"post-handler":e("./editor/post-handler"),settings:e("./editor/settings"),"template-manager":e("./editor/template-manager"),skeleton:e("./editor/skeleton"),"element-manager":e("./editor/element-manager"),cheatsheet:e("./editor/cheatsheet"),preview:e("./preview/preview")}},{"./common/builder":5,"./common/keybindings":6,"./common/mn-extensions":7,"./common/model-loader":8,"./common/render-queue":9,"./common/template-loader":10,"./common/view-loader":11,"./editor/cheatsheet":12,"./editor/editor":13,"./editor/element-library":14,"./editor/element-manager":15,"./editor/inspector":16,"./editor/layout":18,"./editor/layout-templates":17,"./editor/navigator":19,"./editor/options":20,"./editor/post-handler":21,"./editor/settings":22,"./editor/skeleton":23,"./editor/template-manager":24,"./preview/preview":26}],26:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){Backbone.$(document).ready(function(){Backbone.$("#cs-content").empty()}),cs.preview=Backbone.Radio.channel("cs:preview"),cs.observer=Backbone.Radio.channel("cs:observer"),xData.isPreview=!0,this.listenTo(cs.preview,"iframe:ready",this.reload),cs.events.trigger("preview:init"),cs.preview.reply("responsive:text",null),this.listenTo(cs.preview,"responsive:text",this.responsiveTextUpdate),this.listenTo(cs.preview,"late:script:enqueue",this.lateScriptEnqueue),this.listenTo(cs.preview,"late:style:enqueue",this.lateStyleEnqueue),cs.config("useLegacyAjax")&&(window.ajaxurl=cs.config("fallbackAjaxUrl"))},reload:function(t){cs.global=t.cs.global,t.cs.render=cs.render,this.cs.post=t.cs.post,0==Backbone.$("#cs-content").length&&(console.log("Unable to initialize preview. #cs-content missing."),this.noContentArea=!0);var n=e("../../views/main/preview.js");this.view=new n({el:"#cs-content",model:this.cs.post.data}),this.view.render(),this.sendWindowDimensions(),this.listenToOnce(cs.render,"primed",this.primed),_.delay(_.bind(function(){this.primed(!0),this.sendWindowDimensions()},this),9e3),this.listenTo(cs.global,"settings:ready",this.settingsPingback),this.listenTo(cs.global,"update:custom_css",this.customCSS),this.listenTo(cs.global,"update:responsive_text",this.responsiveText),cs.events.trigger("preview:iframe:reloaded"),cs.observer.reply("get:collapse",!1),this.listenTo(cs.global,"set:collapse",function(e){cs.observer.reply("get:collapse",e)}),Backbone.$(window).resize(function(){cs.events.trigger("preview:resize")}),this.listenTo(cs.events,"preview:resize",this.sendWindowDimensions)},sendWindowDimensions:function(){var e=Backbone.$("body"),t=Backbone.$(window);cs.global.trigger("preview:resize",{Window:{width:t.width(),height:t.height()},Body:{width:e.width(),height:e.height()}})},primed:function(e){this.isPrimed||cs.global.request("editor:ready")||(this.isPrimed=!0,cs.global.trigger("preview:primed",e||!1),this.noContentArea&&_.defer(function(){cs.global.trigger("preview:failure",cs.l18n("preview-failure2"))}))},settingsPingback:function(){cs.global.trigger("settings:pingback")},customCSS:function(e){Backbone.$("#cornerstone-custom-page-css").html(e)},responsiveText:function(e){cs.preview.reply("responsive:text",e),Backbone.$(window).trigger("fittextReset"),cs.preview.trigger("responsive:text")},responsiveTextUpdate:function(e){var e=e||Backbone,t=cs.preview.request("responsive:text");t&&_.each(t,function(t){var n=e.$(t.selector);_.defer(function(){n.css("font-size",""),n.csFitText(t.compression,{minFontSize:t.min_size,maxFontSize:t.max_size})})},this)},lateScriptEnqueue:function(e,t,n){if(0==Backbone.$('script[data-cs-handle="'+e+'"]').length&&t.src){var i=setTimeout(function(){cs.warn("Unable to load: "+e),n()},1e4);if(t.before){var o=Backbone.$('<script data-cs-script-extra="'+e+'">'+t.before+"</script>");Backbone.$("body").append(o)}var s=document.createElement("script");Backbone.$("body").append(s),s.onload=function(){clearTimeout(i),cs.log("Cornerstone | Runtime script loaded: "+e),_.defer(n)},s.src=t.src,Backbone.$(s).attr("data-cs-handle",e)}else n()},lateStyleEnqueue:function(e,t,n){if(0==Backbone.$('script[data-cs-handle="'+e+'"]').length&&t.tag){var i=setTimeout(function(){cs.warn("Unable to load: "+e),n()},1e4),o=Backbone.$(t.tag);o[0].onload=function(){clearTimeout(i),cs.log("Cornerstone | Runtime style loaded: "+e),_.defer(n)},Backbone.$("head").append(o),n()}else n()}})},{"../../views/main/preview.js":93}],27:[function(e,t,n){var i=wp.media,o=i.view.l10n;wp.media.view.MediaFrame.Cornerstone=wp.media.view.MediaFrame.Post.extend({createStates:function(){var e=this.options;this.states.add([new i.controller.Library({id:"insert",title:o.insertMediaTitle,priority:20,toolbar:"main-insert",filterable:"all",library:i.query(e.library),multiple:e.multiple?"reset":!1,editable:!0,allowLocalEdits:!0,displaySettings:!1,displayUserSettings:!0}),new i.controller.Embed({metadata:e.metadata}),new i.controller.EditImage({model:e.editImage})]),i.view.settings.post.featuredImageId&&this.states.add(new i.controller.FeaturedImage)}})},{}],28:[function(e,t,n){var i={editorCloned:function(e,t,n){return"mirror"!=n?void Backbone.$(t).trigger("dragula:cloned",e):(Backbone.$(t).trigger("dragula:mirror",e),void _.defer(function(){Backbone.$(t).trigger("dragula:start",e),cs.global.trigger("dragging",!0)}))},skeletonEnd:function(e){cs.global.trigger("dragging",!1),cs.events.trigger("skeleton:dragging",!1)},skeletonStart:function(e,t){var n=Backbone.$(e);cs.events.trigger("skeleton:dragging",!0,n.attr("data-element-type")),n.trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift:child")},cancel:function(e,t,n){Backbone.$(e).trigger("dragula:dragend")},drop:function(e,t,n,i){Backbone.$(e).trigger("dragula:drop",[t,n,i]),Backbone.$(t).trigger("dragula:receive",[e,n,i])},over:function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")},out:function(e,t,n){Backbone.$(t).trigger("dragula:out")},shadow:function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}};t.exports=i},{}],29:[function(e,t,n){!function(e){var t=e('<div class="shadow-height x-section" style="position:absolute;top:200%;visibility:hidden;"></div>');e.fn.shadowHeight=function(){if(!(this.length<1)){var e=this.length>1?this.eq(0):this,n=e.clone();t.empty().appendTo("#cs-content"),t.append(n);var i=n.outerHeight();return 1>i&&(n.addClass("cf"),i=n.outerHeight()),t.detach(),n.remove(),i}},e.fn.csPointInsideElement=function(e,t){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,i=n.offset(),o=e>i.left&&e<i.left+n.width(),s=t>i.top&&t<i.top+n.height();return o&&s}},e.fn.focusEnd=function(){return this.each(function(){if(e(this).focus(),"function"==typeof this.setSelectionRange){var t=2*e(this).val().length;this.setSelectionRange(t,t),this.scrollTop=99999999}})},e.fn.cleanPaste=function(){function t(e){return e.replace(/\u200B/g,"")}function n(n){try{var i=t(n.originalEvent.clipboardData.getData("text")),o=this.value.substr(0,this.selectionStart)+i,s=this.value.substr(this.selectionEnd,this.value.length);this.value=o+s,this.setSelectionRange(o.length,o.length),n.preventDefault(),e(this).change()}catch(n){}}return this.each(function(){e(this).off("paste",n).on("paste",n)})}}(jQuery)},{}],30:[function(e,t,n){t.exports.reduceFractions=function(e){reductions=[{f:"2/4",r:"1/2"},{f:"2/6",r:"1/3"},{f:"3/6",r:"1/2"},{f:"4/6",r:"2/3"}];var t=e;return _(reductions).each(function(e){var n=new RegExp(e.f,"g");t=t.replace(n,e.r)}),t},t.exports.layoutIsValid=function(e){return _(["1/1","1/2 + 1/2","2/3 + 1/3","1/3 + 2/3","1/3 + 1/3 + 1/3","3/4 + 1/4","1/4 + 3/4","1/2 + 1/2","1/2 + 1/4 + 1/4","1/4 + 1/2 + 1/4","1/4 + 1/4 + 1/2","1/4 + 1/4 + 1/4 + 1/4","4/5 + 1/5","1/5 + 4/5","3/5 + 2/5","2/5 + 3/5","3/5 + 1/5 + 1/5","1/5 + 3/5 + 1/5","1/5 + 1/5 + 3/5","2/5 + 2/5 + 1/5","2/5 + 1/5 + 2/5","1/5 + 2/5 + 2/5","2/5 + 1/5 + 1/5 + 1/5","1/5 + 2/5 + 1/5 + 1/5","1/5 + 1/5 + 2/5 + 1/5","1/5 + 1/5 + 1/5 + 2/5","1/5 + 1/5 + 1/5 + 1/5 + 1/5","5/6 + 1/6","1/6 + 5/6","2/3 + 1/3","1/3 + 2/3","2/3 + 1/6 + 1/6","1/6 + 2/3 + 1/6","1/6 + 1/6 + 2/3","1/2 + 1/2","1/2 + 1/3 + 1/6","1/2 + 1/6 + 1/3","1/3 + 1/2 + 1/6","1/3 + 1/6 + 1/2","1/6 + 1/2 + 1/3","1/6 + 1/3 + 1/2","1/2 + 1/6 + 1/6 + 1/6","1/6 + 1/2 + 1/6 + 1/6","1/6 + 1/6 + 1/2 + 1/6","1/6 + 1/6 + 1/6 + 1/2","1/3 + 1/3 + 1/3","1/3 + 1/3 + 1/6 + 1/6","1/3 + 1/6 + 1/3 + 1/6","1/3 + 1/6 + 1/6 + 1/3","1/6 + 1/3 + 1/3 + 1/6","1/6 + 1/3 + 1/6 + 1/3","1/6 + 1/6 + 1/3 + 1/3","1/3 + 1/6 + 1/6 + 1/6 + 1/6","1/6 + 1/3 + 1/6 + 1/6 + 1/6","1/6 + 1/6 + 1/3 + 1/6 + 1/6","1/6 + 1/6 + 1/6 + 1/3 + 1/6","1/6 + 1/6 + 1/6 + 1/6 + 1/3","1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6"]).contains(e)}},{}],31:[function(e,t,n){String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t)}},{}],32:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({tagName:"li",template:"controls/base",controlName:"default",bindings:{},canCompact:!0,baseEvents:{"click button.cs-expand-control":"expandControl"},controlEvents:{},events:function(){return _.extend(this.baseEvents,this.controlEvents)},constructor:function(){this.className="cs-control cs-control-"+this.controlName,CS.Mn.CompositeView.apply(this,arguments),this.configureProxy(),this.listenTo(this.model,"set:proxy",this.configureProxy),this.on("render",this.baseRender),this.listenTo(cs.options,"help:text",this.render),_.isFunction(this.controlTemplate)||_.isFunction(cs.template(this.controlTemplate))||(this.controlTemplate="controls/"+this.controlName)},configureProxy:function(){if(this.proxy&&this.stopListening(this.proxy),this.proxy=this.model.proxy||null,!_.isNull(this.proxy)){var e=this.model.get("key");if(this.proxy.definition&&!this.proxy.has(e)&&!_.contains(["elements","disabled"],e))return void cs.warn("Element ["+this.proxy.definition.get("name")+"] missing ["+e+"] attribute.",this.proxy);var t=this.model.get("condition");t&&_.each(_.keys(t),function(e){e.indexOf(":not")==e.length-4&&(e=e.replace(":not","")),0==e.indexOf("parent:")&&(e=e.replace("parent:","")),this.listenTo(this.proxy,"change:"+e,this.toggleVisibility)},this),this.triggerMethod("proxy:ready")}},toggleVisibility:function(){var e=!0,t=this.model.get("condition");if(!_.isNull(this.proxy)&&t){var n=_.filter(_.keys(t),_.bind(function(e){var n=t[e],i=e.indexOf(":not")==Math.abs(e.length-4);i&&(e=e.replace(":not","")),0==e.indexOf("parent:")?(source=this.proxy.getSourceParent().toProxy(),e=e.replace("parent:","")):source=this.proxy;var o=source.get(e),s=_.isArray(n)?_.contains(n,o):o==n;return i?s:!s},this));e=_.isEmpty(n)}var i=this.$el.hasClass("hide"),o=i&&e||!i&&!e;this.$el.toggleClass("hide",!e),o&&cs.navigate.trigger("scrollbar:update"),this.triggerMethod("custom:visibility",e,o)},baseRender:function(){this.triggerMethod("before:base:render");var e=this.model.get("ui"),t=this.model.get("options");(!e.title&&this.canCompact||t.compact)&&this.$el.addClass("cs-control-compact"),(e.divider||this.divider)&&this.$el.addClass("cs-control-divider"),this.$el.attr("data-name",this.model.get("name")),this.toggleVisibility(),this.stickitBindings(),this.triggerMethod("after:base:render"),this.$("input,textarea").cleanPaste()},stickitBindings:function(){var e=this.bindingSelector||"input[type=hidden]",t={observe:this.model.get("key")};this.binding&&_.extend(t,this.binding),this.addBinding(this.proxy,e,t),this.stickit(this.proxy)},serializeData:function(){var e=this.model.get("options"),t=_.clone(this.model.get("ui"));t.message&&0==t.message.indexOf("[HelpText]")&&(t.message=t.message.replace("[HelpText]","")),cs.options.request("help:text")||e.helpText===!1||(t.message=!1);var n=_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{controlTemplate:this.controlTemplate,controlType:this.model.get("type"),ui:t});return n.ui.title&&(n.ui.title=this.replacePlaceholders(n.ui.title)),n.ui.tooltip&&(n.ui.tooltip=this.replacePlaceholders(n.ui.tooltip)),n.ui.message&&(n.ui.message=this.replacePlaceholders(n.ui.message)),this.proxy&&_.extend(n,this.proxy.toJSON()),_.isFunction(this.controlData)&&_.extend(n,this.controlData()),n},baseTextReplacements:{"%%element-name%%":function(){return this.proxy?this.proxy.definition.get("name"):""},"%%element-type%%":function(){return this.proxy?this.proxy.get("_type"):""},"%%icon%%":function(){return this.proxy?cs.icon(this.proxy.definition.get("icon")):""},"%%icon-nav-elements-solid%%":function(){return cs.icon("interface/nav-elements-solid")},"%%icon-nav-settings-solid%%":function(){return cs.icon("interface/nav-settings-solid")}},replacePlaceholders:function(e){return _.each(_.extend(this.textReplacements||{},this.baseTextReplacements),_.bind(function(t,n){-1!=e.indexOf(n)&&(e=e.replace(new RegExp(n,"g"),t.apply(this)))},this)),e},notLiveTrigger:function(){var e=this.model.get("options");e.notLive&&cs.data.trigger("control:not:live",this.model.proxy.get("name")+"_"+this.model.get("name"),e.notLive)},expandControl:function(){this.triggerMethod("before:expand"),this.$el.addClass("cs-control-expanded"),cs.events.trigger("expand:control",this.proxy.getSource(),this.model.get("name"),this),this.listenToOnce(cs.events,"expand:close",this.expandClose)},expandClose:function(){this.proxy.refresh(),this.$el.removeClass("cs-control-expanded"),this.render(),this.triggerMethod("after:expand")}})},{}],33:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-breadcrumbs cs-control-divider",template:"inspector/breadcrumbs",controlName:"breadcrumbs",events:{"click button":"inspect","mouseover button":"mouseOver","mouseout button":"mouseOut"},initialize:function(){this.levels=this.findLevels([],this.model.proxy.getSource())},mouseOver:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:start")},mouseOut:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:end")},inspect:function(e){var t=this.buttonLevel(e);t&&cs.events.trigger("inspect:element",t.model,!1)},buttonLevel:function(e){return this.levels[parseInt(this.$(e.currentTarget).data("level"))]},findLevels:function(e,t){"section"!=t.get("_type")&&t.collection&&t.collection.parent&&(e=this.findLevels(e,t.collection.parent));var n={label:t.definition.get("ui").title,model:t};switch(t.get("_type")){case"section":n.title=t.get("title"),n.label=cs.l18n("section");break;case"row":n.label=cs.l18n("row");break;case"column":n.label=cs.l18n("column")}return e.push(n),e},serializeData:function(){return{items:_.first(this.levels,4),count:this.levels.length,rtl:cs.config("isRTL")}},onRender:function(){this.levels.length<=1&&!this.levels[0].title&&this.$el.toggleClass("hide",!0)}})},{}],34:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"choose",binding:{initialize:function(e,t,n){var i=this.model.get("options");this.$("li").on("click",_.bind(function(e){var o=this.$(e.currentTarget).data("choice");_.isUndefined(i.offValue)||o!=t.get(n.observe)||(o=i.offValue),t.set(n.observe,o)},this));var o=_.bind(function(e,t){var o=n.observe?t:null;o||""==o||(o=i.choices&&i.choices.length>0?i.choices[0].value:"none"),this.$("li").removeClass("active").siblings("[data-choice="+(""==o?"none":o)+"]").addClass("active")},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],35:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"div",className:"cs-control-external cs-control-code-editor",template:_.template("<textarea></textarea>"),initialize:function(){this.listenTo(cs.navigate,"open:code:editor",function(e){e==this.model.get("key")&&this.$("textarea").csCodeEditorShow()})},onRender:function(){var e,t;this.$("textarea").val(this.model.proxy.get(this.model.get("key"))),e=this.model.get("options"),t=e.settings||{},t=_.extend(t,{change:_.bind(function(e){this.model.proxy.set(this.model.get("key"),e.doc.getValue())},this)}),_.defer(_.bind(function(){this.$el.detach(),Backbone.$("body").append(this.$el),this.$("textarea").csCodeEditor(t)},this))}})},{}],36:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"color",bindingSelector:"input[type=text].cs-color-input",onAfterBaseRender:function(){var e=this.model.get("options")||{},t={outputFormat:e.output_format||null};this.$(".cs-color-input").huebert(t)}})},{}],37:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/column-actions",controlName:"actions",ui:{confirm:".action.erase",layout:".action.manage-layout"},events:{"click @ui.layout":"layout"},behaviors:{Confirm:{message:cs.l18n("columns-erase-confirm")}},canQuickConfirm:!0,initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},onConfirmAccept:function(){cs.elements.trigger("erase",{model:this.proxy.getSource()})}})},{}],38:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({tagName:"ul",className:"cs-controls",initialize:function(){this.repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),4),this.listenTo(this.collection,"add",this.repaint),this.listenTo(this.collection,"remove",this.repaint),this.listenTo(this.collection,"reset",this.repaint),this.listenTo(cs.navigate,"auto:focus",this.autoFocus)},getChildView:function(e){return cs.controlLookup(e.get("type"))},onRender:function(){_.defer(_.bind(function(){this.$el.toggleClass("empty",this.collection.isEmpty()),this.autoFocus()},this))},autoFocus:function(){var e=cs.navigate.request("auto:focus");if(!1!==e){var t=this.$('[data-name="'+e+'"]');t.length>0&&!t.hasClass("cs-control-expanded")&&(cs.navigate.reply(!1),t.find('input[type="text"],textarea').focusEnd())}}})},{}],39:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/custom-markup",controlName:"custom-markup",controlData:function(){var e=this.model.get("options"),t=e.html||"";return{message:t}}})},{}],40:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"date",binding:{initialize:function(e,t,n){function i(e){var i=s(t.get(n.observe)),o=e+a.delimiter+i.format;t.set(n.observe,o)}function o(){var e=s(t.get(n.observe)),i=e.date+a.delimiter+r(Backbone.$(this).val());t.set(n.observe,i)}function s(e){var t,n,i;if(e){var t=e.split(a.delimiter);t[0]&&(n=Cornerstone.Vendor.moment(t[0]),n=n.isValid()?n:!1),t[1]&&(i=t[1])}return n||(n=Cornerstone.Vendor.moment()),{date:n.toString(),format:r(i),moment:n}}function r(e){return _.contains(l,e)?e:a.default_format||"Do MMMM YYYY"}var a=this.model.get("options"),l=a.available_formats;if(!l||!l.length){var c=a.default_format||"Do MMMM YYYY";l=[c]}var u=this.$(".cs-date-input"),d=this.$(".cs-date-format select");this.picker=new Cornerstone.Vendor.Pikaday({field:u[0],bound:!1,container:this.$(".cs-date-picker-entry")[0],theme:"cs-date-picker",isRTL:cs.config("isRTL"),i18n:this.localize(),onSelect:i}),a.choose_format||this.$(".cs-date-format").hide(),d.on("change",o);var p=_.bind(function(e,t){t=s(t);Cornerstone.Vendor.moment(t.date,t.format);u.val(t.moment.format(t.format)),this.picker.config({format:t.format}),this.picker.setMoment(t.moment,!0);var n=_.reduce(l,function(e,n){var i=n==t.format?" selected":"";return e+'<option value="'+n+'"'+i+">"+t.moment.format(n)+"</option>"},"");d.empty(),d.append(Backbone.$(n))},this);p(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,p)}},localize:function(){return{previousMonth:cs.l18n("prev-month"),nextMonth:cs.l18n("next-month"),months:cs.l18n("moment-months").split("_"),weekdays:cs.l18n("moment-weekdays").split("_"),weekdaysShort:cs.l18n("moment-weekdays-short").split("_")}},onBeforeDestroy:function(){this.picker.destroy()}})},{}],41:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"dimensions",binding:{initialize:function(e,t,n){var i=this.model.get("options");i.lock&&_.each(i.lock,function(e,t){this.$("[data-edge="+t+"]").prop("disabled",!0).val(e)},this),this.$("button.save");var o=function(){var e=t.get(n.observe);return e?_.clone(e):["0px","0px","0px","0px","unlinked"]};this.$("button.cs-link-dimensions").click(function(){var e=o();state="linked"==e[4]?"unlinked":"linked","linked"==state&&(e=_.map(e,function(){return e[0]})),e[4]=state,i.lock&&_.each(i.lock,function(t,n){"top"==n&&(e[0]=t),"right"==n&&(e[1]=t),"bottom"==n&&(e[2]=t),"left"==n&&(e[3]=t)},this),t.set(n.observe,e)}),this.$("[data-edge]").on("change keyup",_.bind(function(e){$changed=this.$(e.currentTarget);var s=o(),r=$changed.val().trim();""==r&&(r="0px"),"linked"==s[4]?(s=_.map(s,function(){return r}),s[4]="linked"):(s[$changed.parent().index()]=r,s[4]="unlinked"),i.lock&&_.each(i.lock,function(e,t){"top"==t&&(s[0]=e),"right"==t&&(s[1]=e),"bottom"==t&&(s[2]=e),"left"==t&&(s[3]=e)},this),t.set(n.observe,s)},this));var s=_.bind(function(e,t){$top=this.$("[data-edge=top]"),$right=this.$("[data-edge=right]"),$bottom=this.$("[data-edge=bottom]"),$left=this.$("[data-edge=left]"),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),this.$("button.cs-link-dimensions").toggleClass("active","linked"==t[4])},this);s(t,o()),this.listenTo(t,"change:"+n.observe,s)}}})},{}],42:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"editor",controlTemplate:"controls/textarea",bindingSelector:"textarea.cs-wp-editor",binding:{events:["keyup","change","cut","paste","focus"],onSet:function(e){return this.textReplace(e)},onGet:function(e){return this.textReplace(e)}},onProxyReady:function(){this.editorID="cswpeditor"+this.cid,tinyMCEPreInit.mceInit[this.editorID]=_.clone(tinyMCEPreInit.mceInit.cswpeditor),tinyMCEPreInit.mceInit[this.editorID].id=this.editorID,tinyMCEPreInit.mceInit[this.editorID].selector="#"+this.editorID,tinyMCEPreInit.qtInit[this.editorID]={buttons:"strong,em,del,link,img,close",id:this.editorID},tinyMCEPreInit.mceInit[this.editorID].setup=_.bind(function(e){var t=_.debounce(_.bind(function(){e.save(),this.$(".cs-wp-editor").trigger("change")},this),150);e.on("keyup change NodeChange",t)},this),this.markup=cs.config("editorMarkup").replace(new RegExp("cswpeditor","g"),this.editorID).replace(new RegExp("%%PLACEHOLDER%%","g"),this.proxy.get("content"))},updateContent:function(){},attachElContent:function(e){return this.$el.html(this.markup),this.$el.append(cs.template("controls/expand-control-button")()),this},onRender:function(){this.$(".button.insert-media.add_media").html('<span class="wp-media-buttons-icon"></span>'),this.$(".wp-media-buttons").children().not("#insert-media-button,#cs-insert-shortcode-button").detach(),_.defer(_.bind(function(){quicktags(tinyMCEPreInit.qtInit[this.editorID]),switchEditors.go(this.editorID,"html"),wpActiveEditor=this.editorID,_.defer(function(){delete QTags.instances[0]})},this))},onDestroy:function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,this.editorID),delete QTags.instances[this.editorID],delete tinyMCEPreInit.mceInit[this.editorID],delete tinyMCEPreInit.qtInit[this.editorID]},replacements:{},textReplace:function(e){return e},onBeforeExpand:function(){switchEditors.go(this.editorID,"html")},onExpandedOpen:function(){}})},{}],43:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/element-actions",controlName:"actions",ui:{duplicate:".action.duplicate","delete":".action.delete"},events:{"click @ui.duplicate":"duplicate","click @ui.delete":"elDelete"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},duplicate:function(){cs.global.trigger("element:duplicate",this.proxy.getSource())},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],44:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"icon-choose",childViewContainer:"ul.cs-choose",childView:CS.Mn.ItemView.extend({tagName:"li",template:"controls/icon-choose-item"}),controlEvents:{"keyup .cs-search-input":"search","search .cs-search-input":"search"},initialize:function(){this.iconData=cs.data.request("get:icons"),this.filteredIcons=this.iconData,this.iconNames=cs.config("fontAwesome"),this.lazyUpdateSearch=_.debounce(this.updateSearch,250)},search:function(){this.lazyUpdateSearch(this.$(".cs-search-input").val().toLowerCase().trim())},updateSearch:function(e){if(_.defer(_.bind(this.deferRender,this)),""==e)return void(this.filteredIcons=this.iconData);var t={};_.each(this.iconData,function(n,i){var o=_.reduce(n,function(t,n){return t+n.score(e)},0);o>.5&&(t[i]=n)}),this.filteredIcons=t},binding:{initialize:function(e,t,n){this.$("ul").on("click","li",_.bind(function(e){var i=this.$(e.currentTarget).data("choice");return i==t.get(n.observe)?void t.set(n.observe,""):(this.$prevIcon&&this.$prevIcon.removeClass("active"),this.$prevIcon=this.$(e.currentTarget),this.click=!0,t.set(n.observe,i),void this.$(e.currentTarget).addClass("active"))},this));var i=_.bind(function(e,t){if(this.$prevIcon&&this.$prevIcon.removeClass("active"),t&&""!=t){this.$prevIcon=this.$(".cs-icons-inner li[data-choice="+t+"]"),this.$prevIcon.addClass("active");var n=this.$prevIcon.position();!this.click&&n&&this.$(".cs-icons-inner").scrollTop(n.top).perfectScrollbar("update"),this.click=!1}},this);this.on("deferred:render",function(){i(t,t.get(n.observe))}),this.listenTo(t,"change:"+n.observe,i)}},onRender:function(){this.$("ul.cs-choose").empty();var e=0;_.each(this.filteredIcons,function(t,n){e++>20||this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:n,choice:t[0],choices:t.join(" ")}))},this),this.$(".cs-icons-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){if(this.$("ul.cs-choose").empty(),_.each(this.filteredIcons,function(e,t){this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:t,choice:e[0],choices:e.join(" ")}))},this),this.expanded){var e=this.$(".cs-icons-outer");e.removeClass("cs-expandable").addClass("cs-expanded");var t=e.outerHeight(),n=e.outerWidth();e.css({"max-width":n-n%50+2,"max-height":t-(t-70)%50})}this.$(".cs-icons-inner").perfectScrollbar("update"),this.trigger("deferred:render")},onExpandedOpen:function(){this.expanded=!0,_.delay(_.bind(function(){this.$(".cs-search-input").focus()},this),25)}})},{}],45:[function(e,t,n){var i=Cornerstone.ControlViews.Base.extend({controlName:"image",binding:{initialize:function(e,t,n){this.$(".cs-image").on("click",_.bind(function(e){if(!this.$(e.currentTarget).hasClass("empty"))return void t.set(n.observe,"");var o=i.uploader;o.off("insert"),o.off("select"),o.on("insert",_.bind(function(){var e=o.state().get("selection").first().toJSON();t.set(n.observe,e.url)},this)),o.on("select",function(){var e=o.state();e&&"embed"==e.get("id")&&t.set(n.observe,e.props.get("url"))}),o.open()},this));var o=_.bind(function(e,t){var n=!t||""==t;this.$(".cs-image").toggleClass("empty",n).css({backgroundImage:n?"none":"url("+t+")"})},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}},initialize:function(){i.createMediaFrame()},onRender:function(){var e=this.model.get("options");this.$(".cs-image").toggleClass("pattern",e.pattern===!0)}},{uploader:null,createMediaFrame:function(){null==this.uploader&&(this.uploader=new wp.media.view.MediaFrame.Cornerstone({className:"media-frame cs-media-frame",multiple:!1,title:"THAT TITLE THOUG",library:{type:"image"},button:{text:"Insert Image"}}))}});t.exports=i},{}],46:[function(e,t,n){t.exports={title:e("./title"),toggle:e("./toggle"),text:e("./text"),textarea:e("./textarea"),editor:e("./editor"),"code-editor":e("./code-editor"),image:e("./image"),select:e("./select"),wpselect:e("./wpselect"),sortable:e("./sortable"),number:e("./number"),color:e("./color"),choose:e("./choose"),"multi-choose":e("./multi-choose"),"icon-choose":e("./icon-choose"),dimensions:e("./dimensions"),date:e("./date"),"info-box":e("./info-box"),"custom-markup":e("./custom-markup"),breadcrumbs:e("./breadcrumbs"),"element-actions":e("./element-actions"),"column-actions":e("./column-actions"),"row-actions":e("./row-actions"),"section-actions":e("./section-actions"),"settings-actions":e("./settings-actions"),"layout-actions":e("./layout/layout-actions"),"template-actions":e("./layout/template-actions"),"template-select":e("./layout/template-select"),"template-remove":e("./layout/template-remove"),"sortable-sections":e("./layout/sortable-sections"),"sortable-rows":e("./layout/sortable-rows"),"column-layout":e("./layout/column-layout"),"column-order":e("./layout/column-order"),"template-save-dialog":e("./layout/template-save-dialog"),"template-upload-dialog":e("./layout/template-upload-dialog")}},{"./breadcrumbs":33,"./choose":34,"./code-editor":35,"./color":36,"./column-actions":37,"./custom-markup":39,"./date":40,"./dimensions":41,"./editor":42,"./element-actions":43,"./icon-choose":44,"./image":45,"./info-box":47,"./layout/column-layout":48,"./layout/column-order":50,"./layout/layout-actions":51,"./layout/sortable-rows":52,"./layout/sortable-sections":53,"./layout/template-actions":54,"./layout/template-remove":55,"./layout/template-save-dialog":56,"./layout/template-select":57,"./layout/template-upload-dialog":58,"./multi-choose":59,"./number":60,"./row-actions":61,"./section-actions":62,"./select":63,"./settings-actions":64,"./sortable":67,"./text":68,"./textarea":69,"./title":70,"./toggle":71,"./wpselect":72}],47:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/info-box",controlName:"info-box",onCustomVisibility:function(){this.$el.toggleClass("hide",!cs.options.request("help:text"))}})},{}],48:[function(e,t,n){var i=e("../../../utility/row-validator");t.exports=Cornerstone.ControlViews.Base.extend({controlName:"column-layout",bindings:{"#column-layout":{observe:"_column_layout",events:["blur"],onSet:"formatColumnLayout",updateModel:"confirmFormat",initialize:function(e,t,n){this.$("#column-layout").keyup(function(e){13===e.keyCode&&Backbone.$(this).blur()}),setActive=_.bind(function(e,t){if("custom"!=t){var n=t.split(" + ");e.elements.each(function(e){if(_.isEmpty(n))return void e.set("_active",!1);e.set("_active",!0);var t=n.shift();e.set("size",t)}),e.elements.sort()}return this.$("#column-layout").hide(),this.$("li").removeClass("active"),$active=this.$('li[data-layout="'+t+'"]'),$active.length?void $active.addClass("active"):(this.$("li.custom").addClass("active"),void this.$("#column-layout").show())},this),this.$("ul li").click(_.bind(function(e){if($target=this.$(e.currentTarget),$target.hasClass("custom"))return void setActive(t,"custom");var o=$target.attr("data-layout");i.layoutIsValid(o)&&(t.set(n.observe,o),this.$("#column-layout").val(o))},this)),setActive(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,setActive),this.listenTo(t,"position:updated",this.render),this.listenTo(t.elements,"sort",function(){var e=[];t.elements.each(function(t){t.get("_active")&&e.push(t.get("size"))}),t.set("_column_layout",e.join(" + ").trim())})}}},formatColumnLayout:function(e,t){return i.reduceFractions(_.map(e.split("+"),function(e){return e.trim()}).join(" + "))},confirmFormat:function(e,t,n){return i.layoutIsValid(this.formatColumnLayout(e))},textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}}})},{"../../../utility/row-validator":30}],49:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",template:"controls/column-order-item",ui:{handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.handle":"click:action"},modelEvents:{"change:title":"render"},className:function(){return"cs-column-order-item cs-"+this.model.get("size").replace("/","-")},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],50:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({controlName:"column-order",emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"column empty",template:!1}),dragulaConfig:function(){return{offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},direction:"horizontal",revertOnSpill:!0}},getChildView:function(){return e("./column-order-item")},filterBy:"_active",canAdd:!1,textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}},onChildviewClickAction:function(e){cs.events.trigger("inspect:element",e.model)},getSortableContainer:function(){return this.$("ul.cs-column-order")[0]}})},{"../sortable":67,"./column-order-item":49}],51:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"layout/actions",controlName:"actions",ui:{"new":".action.new",templates:".action.templates"},events:{"click @ui.new":"addItem","click @ui.templates":"openTemplates"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},addItem:function(){cs.events.trigger("add:section")},openTemplates:function(){cs.navigate.trigger("layout:templates")}})},{}],52:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({emptyView:!1,wideControls:!0,confirmMessage:cs.l18n("layout-row-delete-confirm"),actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")},{icon:"search",tooltip:cs.l18n("tooltip-inspect")}],customChildTitle:function(e){return cs.l18n("row-numeric").replace("%s",this.children.length)},onChildviewClickActionAlt:function(e){cs.events.trigger("inspect:element",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model)},onChildviewRender:function(e){var t=cs.navigate.request("layout:active:row");t&&e.model&&t.cid==e.model.cid&&e.$el.addClass("active")},onRemoveItem:function(e){var t=cs.navigate.request("layout:active:row");t&&e&&t.cid==e.cid&&_.defer(_.bind(function(){this.inspectFirst()},this))},inspectFirst:function(){cs.events.trigger("inspect:layout",this.collection.first())},onResetLastItem:function(){this.inspectFirst()}})},{"../sortable":67}],53:[function(e,t,n){var i=e("../sortable");t.exports=i.extend({emptyView:!1,canAdd:!1,confirmMessage:cs.l18n("layout-row-delete-confirm"),onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model,{navigate:!0}),cs.navigate.trigger("auto:focus","title")},onAfterBaseRender:function(){this.$el.toggleClass("hide",0==this.collection.length)}})},{"../sortable":67}],54:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-template-actions cs-control-divider",template:"layout/sub-templates/template-actions",controlName:"actions",ui:{save:".action.save",upload:".action.upload"},events:{"click @ui.save":"save","click @ui.upload":"upload"},initialize:function(e){cs.channel.trigger("block:gen"),this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},save:function(){this.proxy.set("action","save")},upload:function(){this.proxy.set("action","upload")}})},{}],55:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{remove:"button.remove"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"remove",message:cs.l18n("templates-remove-message")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){cs.templates.trigger("delete",this.$("select").val())}})},{}],56:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/save-dialog",controlName:"template-save-dialog",bindingSelector:"input[type=text]",ui:{download:".action.download",save:".action.save",close:"button.close"},events:{"click @ui.download":"download","click @ui.save":"save","click @ui.close":"close"},behaviors:{Confirm:{ui:"save",message:cs.l18n("templates-save-message"),yep:cs.l18n("templates-save-yep"),nope:cs.l18n("templates-save-nope")}},onConfirmAccept:function(){cs.templates.trigger("save","page",this.proxy.get("title")),this.close()},onConfirmDecline:function(){cs.templates.trigger("save","block",this.proxy.get("title")),this.close()},download:function(){cs.templates.trigger("download",this.proxy.get("title")),this.proxy.set("action","none")},close:function(){this.proxy.set("action","none")},onCustomVisibility:function(e){e&&this.$('input[type="text"]').focus()}})},{}],57:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{page:"button.page",block:"button.block"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"page",message:cs.l18n("templates-overwrite-message"),yep:cs.l18n("templates-overwrite-yep"),nope:cs.l18n("templates-overwrite-nope")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"page")},this))},onInsertBlock:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"block")},this))}})},{}],58:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/upload-dialog",controlName:"template-upload-dialog",ui:{upload:"button.process",close:"button.close"},events:{"click @ui.close":"close","click @ui.upload":"confirmUpload"},initialize:function(){this.listenTo(cs.data,"template:upload:complete",this.uploadComplete)},confirmUpload:function(){cs.confirm.trigger("open",{message:cs.l18n("templates-upload-message"),accept:_.bind(this.uploadPage,this),decline:_.bind(this.uploadBlock,this),yep:cs.l18n("templates-upload-yep"),nope:cs.l18n("templates-upload-nope")})},uploadPage:function(){this.deferredUpload("page")},uploadBlock:function(){this.deferredUpload("block")},deferredUpload:function(e){_.defer(_.bind(this.upload,this),e)},upload:function(e){cs.message.trigger("notice","Cornerstone is uploading your template...");var t=this.$("#template-upload")[0].files[0];if(!t||t.name.match(/.+\.csl/)){var n=new FileReader;n.onload=function(t){cs.data.trigger("template:upload:complete",JSON.parse(n.result),e)};try{n.readAsText(t)}catch(i){cs.message.trigger("error",cs.l18n("templates-error-read"))}}else cs.message.trigger("error",cs.l18n("templates-error-upload")),console.warn("Invalid template file")},uploadComplete:function(e,t){cs.templates.trigger("import",e.elements,t),this.resetForm(),this.close()},resetForm:function(){var e=this.$("#template-upload");e.replaceWith(e.clone())},close:function(){this.proxy.set("action","none")}})},{}],59:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"multi-choose",controlTemplate:"controls/choose",binding:{initialize:function(e,t,n){this.$("li").on("click",_.bind(function(e){var i=_.clone(t.get(n.observe)),o=this.$(e.currentTarget).data("choice");_.isArray(i)||(i=[]),_.contains(i,o)?i=_.without(i,o):i.push(o),t.set(n.observe,i),t.trigger("change:"+n.observe,t,i,{})},this));var i=_.bind(function(e,t){this.$("li").removeClass("active").siblings(_.reduce(t||[],function(e,t){return e+",[data-choice="+t+"]"},".always-on")).addClass("active")},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],60:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"number",bindingSelector:"input[type=number]"})},{}],61:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/row-actions",controlName:"actions",ui:{layout:".action.manage-layout","delete":".action.delete"},events:{"click @ui.delete":"elDelete","click @ui.layout":"layout"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],62:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],63:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"select",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onAfterBaseRender:function(){var e=this.model.get("options");_.each(e.choices,function(e){e.disabled&&this.$('option[value="'+e.value+'"]').prop("disabled",!0)},this)}})},{}],64:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"settings/actions",controlName:"actions",ui:{triggerCSS:".action.css",triggerJS:".action.js"},events:{"click @ui.triggerJS":"triggerJS","click @ui.triggerCSS":"triggerCSS"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0,this.jsMessage=_.once(function(){})},triggerCSS:function(){cs.navigate.trigger("open:code:editor","custom_css")},triggerJS:function(){return cs.config("unfilteredHTML")?(cs.navigate.trigger("open:code:editor","custom_js"),void this.jsMessage()):void cs.message.trigger("notice",cs.l18n("settings-js-denied"),8e3)}})},{}],65:[function(e,t,n){var i=e("./sortable-item");t.exports=i.extend({className:"sortable-item wide-controls",template:"controls/sortable-item-wide",ui:{action:"button.action1",confirm:"button.action2",actionAlt:"button.action3",handle:"span.handle"},triggers:{"click @ui.action":"clickAction","click @ui.actionAlt":"clickActionAlt","click @ui.handle":"click:handle"}})},{"./sortable-item":66}],66:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item",template:"controls/sortable-item",ui:{action:"button.action1",confirm:"button.action2",handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.action":"clickAction","click @ui.handle":"click:handle"},modelEvents:{"change:title":"render"},behaviors:{Confirm:{message:function(){return this.atFloor()?cs.l18n("sortable-at-floor"):this.confirmMessage},yep:function(){return cs.l18n("confirm-yep")},nope:function(){return this.atFloor()?cs.l18n("confirm-back"):cs.l18n("confirm-nope")}},ConfirmWarn:{message:function(){return cs.l18n("sortable-at-cap")},yep:function(){return""},nope:function(){return cs.l18n("confirm-back")}}},canQuickConfirm:!0,updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},serializeData:function(){var e=_.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{actions:this.actions});return _.isFunction(this.customTitle)?e.title=this.customTitle(this):e.title=this.model.get(this.title_field),e},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],67:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"sortable",childViewContainer:"ul",actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")}],wideControls:!1,getChildView:function(){return e(this.wideControls?"./sortable-item-wide":"./sortable-item")},confirmMessage:cs.l18n("sortable-remove"),dragulaConfig:function(){return{offset:function(e,t,n){return e.y=Backbone.$(n).height()/2,e},revertOnSpill:!0}},buildChildView:function(e,t,n){var i=new t(_.extend({model:e},n));return i.atFloor=_.bind(function(){return this.floor>=this.collection.length},this),i.atCap=_.bind(function(){return!_.isNull(this.capacity)&&this.capacity<=this.collection.length},this),_.isFunction(this.customChildTitle)&&(i.customTitle=_.bind(this.customChildTitle,this)),i.title_field=this.title_field,i.actions=this.actions,i.confirmMessage=this.confirmMessage,i},emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item empty",template:"controls/sortable-empty",events:{"click span.handle":"click"},click:function(e){this.triggerMethod("empty:click:add",e)}}),sort:!1,filterBy:!1,canAdd:!0,canCompact:!1,ui:{add:"button.cs-add-sortable-item"},events:{"click @ui.add":"addItem"},initialize:function(){this.drake=Cornerstone.Vendor.dragula(_.result(this,"dragulaConfig")),this.drake.on("drag",function(e){cs.events.trigger("preview:no-pointer",!0)}),this.drake.on("dragend",function(e){cs.events.trigger("preview:no-pointer",!1)}),this.drake.on("drop",function(e,t,n,i){Backbone.$(e).trigger("dragula:drop",[t,n,i])})},controlData:function(){var e={canAdd:this.canAdd};return!_.isNull(this.capacity)&&this.collection.length>=this.capacity&&(e.canAdd=!1),e.empty=0==this.collection.length,e},onChildviewEmptyClickAdd:function(e){this.addItem()},onChildviewUpdatePosition:function(e,t,n,i){_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},filter:function(e,t,n){return this.filterBy?e.get(this.filterBy):!0},onProxyReady:function(){this.collection=this.proxy.elements,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"add",this.render);var e=this.model.get("options");e.type&&(this.collection.childType=e.type),this.floor=e.floor||0,this.title_field=e.title_field||"title",this.capacity=e.capacity?e.capacity:null},onChildviewClickAction:function(e){e.atCap()?e.trigger("confirm:warn:open"):cs.elements.trigger("duplicate",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:element",e.model,!1);var t="settings"==cs.navigate.request("active:pane")?"settings":"inspector";cs.navigate.trigger(t+":item")},onChildviewConfirmAccept:function(e){var t=e.atFloor();this.triggerMethod("remove:item",e.model),cs.elements.trigger("delete",{model:e.model}),t&&(this.addItem(),this.triggerMethod("reset:last:item"))},getSortableContainer:function(){return this.$("ul.cs-sortable")[0]},onRender:function(){this.drake.containers=[],this.drake.containers.push(this.getSortableContainer()),this.triggerMethod("after:render")},addItem:function(){var e=this.model.get("options"),t=e.newTitle||cs.l18n("sortable-default");cs.elements.trigger("add:item",e.element,this.proxy,t,e.title_field)},onDestroy:function(){this.drake.destroy()}})},{"./sortable-item":66,"./sortable-item-wide":65}],68:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"text",bindingSelector:"input[type=text]",controlEvents:{"blur input":"notLiveTrigger"},onRender:function(){var e=this.model.get("options");e.placeholder&&this.$("input[type=text]").attr("placeholder",e.placeholder)}})},{}],69:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"textarea",bindingSelector:"textarea",htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},onProxyReady:function(){var e=this.model.get("options");e.expandable||e.expandable===!1||(e.expandable=e.controlTitle||!0,this.model.set("options",e))},onRender:function(){var e=this.model.get("options");if(e.placeholder&&this.$("textarea").attr("placeholder",e.placeholder),e.htmlhint){var t=this.$("textarea");t.on("blur",_.bind(function(){var e=_.map(Cornerstone.Vendor.HTMLHint.verify(t.val(),this.htmlhint),function(e){return e.rule.id});_.isEmpty(e)||cs.message.trigger("error",CS.Mn.Renderer.render("utility/htmlhint",{errors:e}),7e3)},this))}},onExpandedOpen:function(){}})},{}],70:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"title",divider:!0,canCompact:!1,bindingSelector:"input[type=text]",ui:{inspect:"button.cs-title-button"},triggers:{"click @ui.inspect":"inspect"},onInspect:function(){cs.events.trigger("inspect:element",this.proxy.getSource())}})},{}],71:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"toggle",binding:{initialize:function(e,t,n){this.$("ul.cs-toggle").on("click",_.bind(function(e){t.set(n.observe,this.$(e.currentTarget).hasClass("off")),this.notLiveTrigger()},this));var i=_.bind(function(e,t){var t=t||this.model.get("default")||!1;this.$(".cs-toggle").toggleClass("on",t).toggleClass("off",!t)},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}}})},{}],72:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"wpselect",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onBeforeBaseRender:function(){var e=this.model.get("options");this.$select=Backbone.$(e.markup||'<select class="empty"></select>'),this.wpDefault=this.$select.val(),this.$(".cs-wp-select").append(this.$select)}})},{}],73:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-confirm",template:"extra/confirm",defaultConfig:{message:cs.l18n("confirm-message"),allowQuickConfirm:!1,subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[],view:null},events:{"click .yep":"acceptDebounce","click .nope":"declineDebounce"},initialize:function(e){this.data=_.clone(this.defaultConfig),this.acceptDebounced=_.debounce(_.bind(this.accept,this),500,!0),this.declineDebounced=_.debounce(_.bind(this.decline,this),500,!0),this.listenTo(cs.confirm,"abort",this.declineDebounce),this.listenTo(cs.confirm,"open",this.open)},acceptDebounce:function(){this.acceptDebounced()},declineDebounce:function(){this.declineDebounced()},open:function(e,t){return this.context=t||{},this.data=_.extend(_.clone(this.defaultConfig),e),this.data.allowQuickConfirm&&cs.data.request("delete:confirm:key")?void this.accept():(this.render(),void this.$el.addClass("active"))},serializeData:function(){var e=_.clone(this.data);return _.isFunction(e.message)&&(e.message=e.message.call(this.context)),_.isFunction(e.subtext)&&(e.subtext=e.subtext.call(this.context)),_.isFunction(e.classes)&&(e.classes=e.classes.call(this.context)),_.isFunction(e.yep)&&(e.yep=e.yep.call(this.context)),_.isFunction(e.nope)&&(e.nope=e.nope.call(this.context)),e.classes.unshift("cs-confirm-content"),e.contentClass=e.classes.join(" "),e},accept:function(){_.isFunction(this.data.accept)&&this.data.accept(),this.close()},decline:function(){_.isFunction(this.data.decline)&&this.data.decline(),this.close()},close:function(){this.context=null,this.data={},this.$el.removeClass("active")}})},{}],74:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"button",className:"expand cs-icon",template:!1,attributes:{"data-cs-icon":cs.fontIcon("play-circle")},events:{click:"collapse"},initialize:function(){Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),this.listenTo(cs.extra,"flyout:collapse",function(){Backbone.$("body").toggleClass("cs-editor-active",!1).toggleClass("cs-editor-inactive",!0),cs.extra.trigger("set:collapse",!0)}),this.listenTo(cs.extra,"set:collapse",function(e){cs.extra.reply("get:collapse",e),cs.global.trigger("set:collapse",e)})},collapse:function(e){cs.extra.trigger("set:collapse",!1),Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),cs.extra.trigger("flyout","collapse")}})},{}],75:[function(e,t,n){var i=e("../controls/control-collection");t.exports=CS.Mn.ItemView.extend({className:"cs-expanded-content-outer",template:"extra/expanded-control",events:{"click .cs-expanded-close":"shutdown",keyup:"escape"},initialize:function(e){this.listenTo(cs.extra,"set:collapse",this.collape),this.linkedView=null,this.listenTo(cs.events,"expand:control:open",this.open)},onRender:function(){this.controlView=new i({collection:cs.component("inspector").getExpansionControls()}),this.controlView.render(),this.$(".cs-expanded-content-inner").append(this.controlView.$el)},open:function(){this.controlView.render(),_.defer(_.bind(function(){this.$el.addClass("active"),this.controlView.children.each(function(e){e.triggerMethod("expanded:open")});var e=this.$("textarea");console.log(e),e.height(.6*this.$el.height()),_.delay(function(){e.focusEnd()},100)},this))},escape:function(e){27===e.keyCode&&this.shutdown()},collape:function(e){e&&this.shutdown()},shutdown:function(){this.$el.removeClass("active"),_.delay(function(){cs.events.trigger("expand:close")},200)}})},{"../controls/control-collection":38}],76:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-home",template:"extra/home",initialize:function(){this.listenTo(cs.channel,"save:complete",this.render),this.listenTo(cs.channel,"update:saved:last",this.render)},serializeData:function(){var e=cs.data.request("saved:last"),t=2,n={savedLastMessage:_.isNull(e)?cs.l18n("home-unsaved"):cs.l18n("home-saved-last").replace("%s",e.fromNow()),savedLastClass:_.isNull(e)||e.isBefore(new Date((new Date).getTime()-6e4*t))?"warn":"happy",dashboardEditUrl:cs.config("dashboardEditUrl"),frontEndUrl:cs.config("frontEndUrl")};return n}})},{}],77:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-options",getChildView:function(e){return cs.controlLookup(e.get("type"))},template:_.template('<div id="options-controls"><ul class="cs-controls"></ul></div>'),childViewContainer:"ul.cs-controls",initialize:function(){this.collection=cs.component("options").inspect.controls}})},{}],78:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-respond",template:"extra/respond",events:{"click button":"handleClick"},initialize:function(){cs.extra.reply("width","xl"),this.listenTo(cs.extra,"respond:width",this.setRespond)},handleClick:function(e){this.$("button").removeClass("active"),this.$(".cs-respond-labels div").removeClass("active"),this.$(e.currentTarget).addClass("active");var t=this.$(e.currentTarget).data("respond");cs.extra.reply("width",t),this.$('.cs-respond-labels div[data-respond="'+t+'"]').addClass("active"),cs.extra.trigger("respond:width",t)},onRender:function(){var e=cs.extra.request("width");this.$('button[data-respond="'+e+'"]').addClass("active"),this.$('.cs-respond-labels [data-respond="'+e+'"]').addClass("active")},setRespond:function(e){var t=Backbone.$(".cs-preview");t.removeClass("cs-respond-xl cs-respond-lg cs-respond-md cs-respond-sm cs-respond-xs"),e&&t.addClass("cs-respond-"+e)}})},{}],79:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-saved",template:"extra/save-complete",messages:cs.l18n("save-complete-messages"),serializeData:function(){return{message:this.messages[Math.floor(Math.random()*this.messages.length)]}},onRender:function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},onSaveComplete:function(){return cs.config("visualEnhancements")?(this.$el.css({display:"table"}).addClass("saved-in"),void setTimeout(_.bind(function(){this.$el.animate({opacity:0},650,"linear",_.bind(function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},this)).removeClass("saved-in").addClass("saved-out"),setTimeout(_.bind(function(){this.render()},this),1e3)},this),1e3)):void cs.message.trigger("success",cs.l18n("save-complete-simple"),1250)}})},{}],80:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control-empty",template:"inspector/blank-state"})},{}],81:[function(e,t,n){var i=e("../controls/control-collection"),o=e("../main/base-pane");t.exports=o.extend({name:"inspector",initialize:function(){this.listenTo(cs.navigate,"refresh:inspector:heading",this.updateHeading)},onShowContent:function(){this.Content.show(new i({collection:cs.component("inspector").getPrimaryControls(),emptyView:e("./empty-controls")}))},updateHeading:function(){this.$("h2").text(cs.navigate.request("inspector:heading"))},onOpenSubItem:function(){this.Sub.show(new i({collection:cs.component("inspector").getSecondaryControls(),emptyView:e("./empty-controls")}))},updateSerializeData:function(e){var t=cs.navigate.request("inspector:heading");return t&&(e.heading=t),e}})},{"../controls/control-collection":38,"../main/base-pane":88,"./empty-controls":80}],82:[function(e,t,n){var i=e("../controls/control-collection"),o=e("../main/base-pane");t.exports=o.extend({name:"layout",onShowContent:function(){this.Content.show(new i({collection:cs.component("layout").inspect.primary.controls}))},onOpenSubRows:function(){e("./sub-row/layout-sub-rows");this.Sub.show(new i({collection:cs.component("layout").inspect.secondary.controls}))},onOpenSubTemplates:function(){var t=e("./sub-templates/layout-sub-templates");this.Sub.show(new t)}})},{"../controls/control-collection":38,"../main/base-pane":88,"./sub-row/layout-sub-rows":83,"./sub-templates/layout-sub-templates":84}],83:[function(e,t,n){e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-row/layout-sub-row",className:"cs-pane-content-inner row",regions:{Controls:"#layout-row-controls"},initialize:function(){},setActiveRow:function(e){},onBeforeShow:function(){}})},{"../../controls/control-collection":38}],84:[function(e,t,n){var i=e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-templates/layout-sub-template",className:"cs-pane-content-inner templates",regions:{Controls:"#layout-template-controls"},initialize:function(){this.listenTo(cs.templates,"control:reset",function(){this.onBeforeShow()})},onBeforeShow:function(){this.Controls.show(new i({collection:cs.component("layout-templates").controls}))}})},{"../../controls/control-collection":38}],85:[function(e,t,n){var i=e("../main/base-pane");t.exports=i.extend({name:"elements",paneTemplate:"library/search",paneEvents:{"keyup #elements-search":"search","search #elements-search":"search"},onShowContent:function(){var t=e("./library-list");cs.search.reply("elements",""),this.Content.show(new t({collection:cs.elementLibrary.get("builder")}))},search:function(){var e=cs.elementLibrary.search("builder",this.$("#elements-search").val().toLowerCase().trim());cs.search.reply("elements",e),cs.search.trigger("elements"),this.$(".cs-pane-content-inner").perfectScrollbar("update")},onNavigate:function(){this.$("#elements-search").focus()}})},{"../main/base-pane":88,"./library-list":87}],86:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-element-stub",template:"library/element-stub",attributes:function(){var e={};return cs.options.request("skeleton:mode")||"function"==typeof MouseEvent||(e.draggable="true"),e},initialize:function(){this.listenTo(cs.events,"toggle:skeleton:mode",function(){this.$el.attr(_.extend({},_.result(this,"attributes")))}),this.listenTo(cs.global,"drag:exit",function(){this.clone&&(Backbone.$(this.clone).hide(),Backbone.$("#preview").one("mouseleave",_.bind(function(){cs.global.trigger("drag:resume")},this)))}),this.listenTo(cs.global,"drag:resume",function(){this.clone&&Backbone.$(this.clone).show()})},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{icon:cs.icon(this.model.get("icon"))})},events:{"dragstart.h5s":"setData","dragend.h5s":"endDrag","dragula:start":"dragStart","dragula:cloned":"watchClone"},watchClone:function(e,t){Backbone.$(t).on("dragula:dragend",function(){cs.global.trigger("incoming:element:end")})},endDrag:function(e){cs.global.trigger("dragging",!1)},dragStart:function(e,t){this.clone=t,cs.global.trigger("incoming:element",this.model.get("name"))},setData:function(e){cs.global.trigger("dragging",!0,!0),cs.global.trigger("incoming:element",this.model.get("name"),!0);var t=e.originalEvent.dataTransfer;t.effectAllowed="copy",t.dropEffect="copy";var n=JSON.stringify({action:"create",_type:this.model.get("name")}),i=this.$("svg");i.length&&"function"==typeof t.setDragImage&&t.setDragImage(i[0],25,25),t.setData("text",n)}})},{}],87:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({className:"cs-elements",childView:e("./element-stub"),childViewContainer:".cs-pane-section ul",initialize:function(){this.listenTo(cs.search,"elements",this.render)},onBeforeRender:function(){this.searchResults=cs.search.request("elements")||""},viewComparator:function(e){var t=_.isArray(this.searchResults)?this.searchResults:[];return _.indexOf(t,e.get("name"))},filter:function(e,t,n){return this.searchResults&&""!=this.searchResults?_.contains(this.searchResults,e.get("name")):!0}})},{"./element-stub":86}],88:[function(e,t,n){var i=CS.Mn.LayoutView.extend({name:"undefined",className:function(){return"cs-pane "+this.name},template:"main/pane",paneTemplate:!1,regions:{Content:"#content",Sub:"#sub"},events:function(){return _.extend({"click button.cs-builder-sub-back":"back"},this.paneEvents)},paneEvents:{},onBaseOpenSub:function(e){this.Sub.empty(),cs.navigate.trigger("subpane:opened",this.name+":"+e),this.triggerMethod("open:sub"),this.triggerMethod("open:sub:"+e),this.$(".cs-builder-sub").addClass("active").find(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},onBaseCloseSub:function(){this.$(".cs-builder-sub").removeClass("active"),this.Sub&&this.Sub.show(new Cornerstone.Mn.ItemView({template:_.template(this.$("#sub").html())})),this.triggerMethod("close:sub")},back:function(){cs.navigate.trigger(this.name+":home")},onBeforeShow:function(){this.Sub.empty(),this.Content.empty(),this.triggerMethod("show:content")},serializeData:function(){var e=_.extend(CS.Mn.LayoutView.prototype.serializeData.apply(this,arguments),{heading:cs.l18n(this.name+"-heading"),returnButtonText:cs.l18n(this.name+"-return"),paneTemplate:this.paneTemplate,name:this.name});return _.isFunction(this.updateSerializeData)?this.updateSerializeData(e):e}});t.exports=i},{}],89:[function(e,t,n){var i=e("./header"),o=e("./footer"),s=e("../extra/expansion"),r=e("./skeleton");t.exports=CS.Mn.LayoutView.extend({template:"main/editor",regions:{Header:"#header",Pane:"#pane",Footer:"#footer",Expansion:"#expand",Skeleton:"#skeleton"},panes:{layout:e("../layout/layout"),elements:e("../library/element-library"),inspector:e("../inspector/inspector"),settings:e("../settings/settings")},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane),this.listenTo(cs.navigate,"scrollbar:update",this.scrollbarUpdate),this.listenTo(cs.options,"editor:position",this.setEditorPosition),this.listenTo(cs.message,"notice",this.growlNotice),this.listenTo(cs.message,"success",this.growlSuccess),this.listenTo(cs.message,"error",this.growlError),this.listenTo(cs.data,"control:not:live",this.controlNotLive),this.sentControlMessages=[],Backbone.$("#cornerstone").on("mouseenter mouseleave",".cs-sortable li.sortable-item",_.bind(this.sortableHover,this)),"settings"==localStorage.CornerstonePane&&(cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last")),this.listenTo(cs.events,"preview:no-pointer",this.togglePreviewPointerEvents),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.keybindingToggleClasses()},onRender:function(){var e=localStorage.CornerstonePane;localStorage.CornerstonePane=!1,cs.data.reply("scrollbar:width",this.getScrollbarWidth()),this.changePane(_.has(this.panes,e)?e:"layout"),this.Header.show(new i),this.Footer.show(new o),this.Expansion.show(new s),this.Skeleton.show(new r({model:cs.post.data})),this.Expansion.$el.detach(),this.$el.after(this.Expansion.$el),this.Skeleton.$el.detach(),this.$el.after(this.Skeleton.$el),this.setEditorPosition()},changePane:function(e,t){cs.tooltips.trigger("kill"),this.activePane!=e&&(cs.navigate.trigger("pane:switch"),this.Pane.show(new this.panes[e])),this.activePane=e,this.Pane.currentView.triggerMethod("navigate"),cs.navigate.reply("active:pane",this.activePane),t?this.Pane.currentView.triggerMethod("base:open:sub",t):this.Pane.currentView.triggerMethod("base:close:sub"),this.$(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},sortableHover:function(e){Backbone.$(e.currentTarget).toggleClass("hover","mouseenter"===e.type)},controlNotLive:function(e,t){_.contains(this.sentControlMessages,e)||(this.sentControlMessages.push(e),cs.message.trigger("notice",cs.l18n(t)))},growlNotice:function(e,t){this.growlMessage({title:cs.l18n("message-notice"),style:"notice"},arguments)},growlSuccess:function(){this.growlMessage({title:cs.l18n("message-success"),style:"success"},arguments)},growlError:function(){this.growlMessage({title:cs.l18n("message-error"),style:"error"},arguments)},growlMessage:function(e,t){var n={message:"",duration:4e3};t&&t[0]&&(n.message=t[0]),t&&t[1]&&(n.duration=t[1]),t&&t[2]&&(n.title=t[2]);var i=_.extend(e,n);i.duration<5e3&&(i.close=""),Backbone.$.growl(i);var o=cs.data.request("scrollbar:width");o>0&&Backbone.$("#growls").css({right:o})},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);
var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},scrollbarUpdate:function(){this.$(".cs-pane-content-inner").perfectScrollbar("update")},setEditorPosition:function(){Backbone.$("#cornerstone").toggleClass("cs-right","right"==cs.options.request("editor:position"))},keybindingToggleClasses:function(){this.listenTo(cs.events,"delete:confirm:key",function(e){Backbone.$("body").toggleClass("cs-delete-confirm",e)})},togglePreviewPointerEvents:function(e){Backbone.$("#preview").toggleClass("no-pointer")},toggleDragging:function(e){Backbone.$("body").toggleClass("cs-hide-cursor",e)}})},{"../extra/expansion":75,"../inspector/inspector":81,"../layout/layout":82,"../library/element-library":85,"../settings/settings":113,"./footer":90,"./header":91,"./skeleton":94}],90:[function(e,t,n){var i=e("../extra/expand"),o=e("../extra/confirm"),s=e("../extra/home"),r=e("../extra/respond"),a=(e("../extra/options"),e("../extra/save-complete"));t.exports=CS.Mn.ItemView.extend({template:"main/footer",ui:{home:"button.home",collapse:"button.collapse",helptext:"button.help-text",skeleton:"button.skeleton-mode",respond:"button.respond",save:"button.save"},events:{"click @ui.home":"toggleHome","click @ui.collapse":"toggleCollapse","click @ui.helptext":"toggleHelpText","click @ui.skeleton":"toggleSkeletonMode","click @ui.respond":"toggleRespond","click @ui.save":"save"},initialize:function(){this.listenTo(cs.extra,"flyout:updated",this.toggleMode),this.listenTo(cs.data,"save:success",this.saveComplete),this.listenTo(cs.data,"save:error",this.saveComplete),this.listenTo(cs.tooltips,"kill",this.killTooltip),Backbone.$("#cornerstone").on("mouseenter mouseleave","[data-tooltip-message]",_.bind(this.toggleTooltip,this)),this.modules={home:new s,expand:new i,respond:new r,save:new a,confirm:new o},this.panels=_.pick(this.modules,"home","expand","respond","save","confirm"),cs.extra.on("collapse",function(e){cs.global.trigger("collapse","on"==e)}),this.panelMode="none",this.listenTo(cs.extra,"flyout",function(e,t){var n=e!=this.panelMode;cs.extra.trigger("flyout:updated",e,n,this.panelMode),e!=this.panelMode&&cs.extra.trigger("flyout:"+e),this.panelMode=n?e:"none";var i="none"!=this.panelMode,e=this.panelMode;i?_.delay(function(){Backbone.$(".cs-editor").addClass("flyout").attr("data-flyout",e),cs.navigate.trigger("scrollbar:update")},650):(Backbone.$(".cs-editor").removeClass("flyout").attr("data-flyout","none"),cs.navigate.trigger("scrollbar:update"))}),this.listenTo(cs.extra,"toggle",function(e){_.defer(_.bind(function(){this.$('button[data-toggle="'+e+'"]').toggleClass("active",cs.options.request(e))},this))}),this.listenTo(cs.global,"preview:failure",function(){this.$("button.skeleton-mode").prop("disabled",!0)})},onRender:function(){var e=this.$(".cs-editor-extra");_.each(this.modules,function(t){e.append(t.render().$el)}),this.$("button[data-toggle]").each(function(){var e=Backbone.$(this);e.toggleClass("active",cs.options.request(e.attr("data-toggle")))})},toggleTooltip:function(e){var t=Backbone.$(e.currentTarget).data("tooltip-message"),n="mouseenter"===e.type&&t&&cs.options.request("help:text");return n&&this.$(".cs-tooltip-inner").text(t),this.tooltipTimer?(window.clearTimeout(this.tooltipTimer),void(this.tooltipTimer=void 0)):void(this.tooltipTimer=window.setTimeout(_.bind(function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",n)},this),n?333:250))},killTooltip:function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",!1)},toggleHome:function(){cs.extra.trigger("flyout","home")},toggleCollapse:function(){cs.extra.trigger("flyout","collapse")},toggleHelpText:function(){cs.extra.trigger("toggle","help:text")},toggleSkeletonMode:function(){cs.extra.trigger("toggle","skeleton:mode")},toggleRespond:function(e){cs.extra.trigger("flyout","respond")},save:function(){this.$("button.save").prop("disabled",!0),cs.events.trigger("action:save")},saveComplete:function(){this.$("button.save").removeProp("disabled"),this.panels.save.triggerMethod("save:complete")},saveError:function(){this.$("button.save").removeProp("disabled"),cs.message.trigger("error",cs.l18n("save-error"),3e4)},toggleMode:function(e,t,n){this.$("nav button.has-flyout").removeClass("active"),_.each(this.panels,function(e){e.$el.removeClass("active")}),t&&(this.$("button.has-flyout."+e).addClass("active"),this.$(".cs-editor-extra .cs-"+e).addClass("active"))}})},{"../extra/confirm":73,"../extra/expand":74,"../extra/home":76,"../extra/options":77,"../extra/respond":78,"../extra/save-complete":79}],91:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"nav",template:"main/header",events:{"click button.layout":"layout","click button.inspector":"inspector","click button.elements":"elements","click button.settings":"settings"},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane)},onRender:function(){this.changePane(cs.navigate.request("active:pane"))},layout:function(){cs.navigate.trigger("pane","layout")},inspector:function(){cs.navigate.trigger("pane","inspector")},elements:function(){cs.navigate.trigger("pane","elements")},settings:function(){cs.navigate.trigger("pane","settings")},changePane:function(e){this.$("."+e).addClass("active").siblings().removeClass("active")}})},{}],92:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({template:"observer",className:"cs-observer",initialize:function(){this.lazyRender=_.debounce(this.renderNow,100),this.throttleTimer=50,this.observing=null,this.tooltipText="Element",this.canPreview=!0,this.dimensionTarget=null,this.listenTo(cs.observer,"start",this.observeStart),this.listenTo(cs.observer,"end",this.observeEnd),this.listenTo(cs.global,"kill:observer",this.kill),this.listenTo(cs.observer,"kill",this.kill),this.$wrapper=Backbone.$("#cs-content")},setObserver:function(e,t){if(clearInterval(this.renderInterval),this.coordinates={top:0,left:0,height:0,width:0},this.observing=e,this.observing){var n=e.model.get("_type"),i=cs.elementLibrary.lookup(n),o=i.get("flags");this.canPreview=o.can_preview||!0,this.dimensionTarget=o.dimension_target||null,this.setTooltip(e.model,n)}t?this.renderNow():this.lazyRender()},setTooltip:function(e,t){var n;switch(t){case"section":n=cs.l18n("section-format").replace("%s",e.get("title"));break;case"row":n=cs.l18n("row-numeric").replace("%s",e.getIndex()+1);break;case"column":n=cs.l18n("column-format").replace("%s",e.get("size"));break;default:n=e.definition.get("ui").title}this.canPreview||(n=cs.l18n("no-preview").replace("%s",n)),this.tooltipText=n},observeStart:function(e,t){(_.isNull(this.observing)||this.observing.cid!=e.cid)&&this.setObserver(e,t||!1)},observeEnd:function(e,t){_.isNull(this.observing)||this.observing.cid!=e.cid||this.setObserver(null,t||!1)},kill:function(){this.setObserver(null,!0)},renderNow:function(){return clearInterval(this.renderInterval),_.isNull(this.observing)||cs.observer.request("get:collapse")?void this.$el.hide():(this.renderLoop(),void(this.renderInterval=setInterval(_.bind(this.renderLoop,this),this.throttleTimer)))},renderLoop:function(){var e=this.dimensionTarget?this.observing.$el.find(this.dimensionTarget):this.observing.$el;e.length<1&&(e=this.observing.$el);var t=e.offset(),n=e.outerHeight(),i=e.outerWidth();(this.coordinates.width!=i||this.coordinates.height!=n)&&t&&(this.coordinates={top:t.top-this.$wrapper.offset().top,left:t.left-this.$wrapper.offset().left,width:i,height:n},this.render(),this.$el.css(this.coordinates),this.coordinates.top<25&&this.$(".cs-observer-tooltip").removeClass("top"))},onRender:function(){return _.isNull(this.observing)||cs.observer.request("get:collapse")?void this.$el.hide():(this.$el.toggleClass("cs-observer-no-preview",!this.canPreview),void this.$el.show())},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{tooltip:this.tooltipText})}})},{}],93:[function(e,t,n){t.exports=Cornerstone.Mn.CompositeView.extend({template:!1,emptyView:CS.Mn.ItemView.extend({className:"cs-empty-rows",template:"empty-rows"}),getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},initialize:function(){this.collection=this.model.elements,this.listenToOnce(cs.global,"preview:primed",function(){this.$el.removeClass("cs-preview-loading")}),this.listenTo(this.collection,"sort",this.render),this.observerView=new(e("./observer.js")),this.listenTo(cs.global,"set:collapse",this.toggleCollapse),this.listenTo(cs.global,"dragging",this.toggleDragging),this.listenTo(cs.preview,"dragging",this.toggleDragging),this.listenTo(cs.preview,"autoscroll",_.debounce(_.bind(this.autoScroll,this),250,!0)),this.drake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("x-column")||e.classList.contains("cs-indicator-container"))},moves:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},accepts:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},offset:function(e,t,n){return e.x=0,e.y=0,e},copy:!1,revertOnSpill:!0,mirrorContainer:this.el}),this.drake.on("drag",function(e,t){if(e.classList&&e.classList.contains("cs-indicator")){if(this.incoming){var n=new MouseEvent("mousedown",{buttons:1,which:1,view:window,bubbles:!0,cancelable:!0,synthetic:!0});e.dispatchEvent(n,!0)}this.incoming=!1}else Backbone.$(e).trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift"),cs.global.trigger("drag:existing:start");cs.preview.trigger("dragging",!0)}),this.listenTo(cs.global,"drag:existing:end",function(){cs.preview.trigger("dragging",!1)}),this.drake.on("dragend",function(e){cs.preview.trigger("dragging",!1),Backbone.$(e).trigger("dragula:dragend")}),this.drake.on("cancel",function(e,t,n){Backbone.$(n).trigger("dragula:cancel"),Backbone.$(t).trigger("dragula:cancel")}),this.drake.on("drop",function(e,t,n,i){Backbone.$(t).trigger("dragula:receive",[e,n,i])}),this.drake.on("over",function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")}),this.drake.on("shadow",function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}),this.drake.on("out",function(e,t,n){Backbone.$(t).trigger("dragula:out")}),this.drake.on("cloned",_.bind(function(e,t,n){"mirror"==n&&(this.$ghost=Backbone.$(e),this.$ghost.addClass("cs-indicator"),Backbone.$(t).trigger("dragula:mirror",this.$ghost))},this)),cs.$indicator=Backbone.$('<div class="cs-indicator"></div>'),document.addEventListener("dragleave",function(e){var t;t=e.target.classList&&e.target.classList.contains("x-column")?Backbone.$(e.target):Backbone.$(e.target).parent(".x-column"),t.length>0&&!t.csPointInsideElement(e.clientX,e.clientY)&&cs.$indicator.detach()},!1);var t=_.bind(function(){cs.global.trigger("stop:dragging"),cs.preview.trigger("dragging",!1),cs.$ic[0].left=0,cs.$ic[0].top=0,document.removeEventListener("mouseup",t,!1)},this);this.listenTo(cs.global,"drag:resume",function(e){this.$ghost&&this.$ghost.hide(),document.addEventListener("mousemove",n,!1)});var n=_.bind(function(e){this.$ghost&&this.$ghost.show(),cs.global.trigger("drag:exit"),document.removeEventListener("mousemove",n,!1)},this);this.listenTo(cs.global,"incoming:element",function(e,t){cs.incoming={data:{_type:e},options:{},cid:"new:"+e},cs.render.preRender(e),cs.$indicator.empty().detach(),cs.$indicator.removeAttr("style"),cs.$indicator.append(Backbone.$(cs.elementIcon(e))),t||document.addEventListener("mousemove",i,!1)});var i=_.bind(function(e){cs.global.trigger("drag:exit"),cs.$indicator.detach(),cs.$ic.append(cs.$indicator),cs.preview.trigger("dragging",!0),this.drake.incoming=!0,this.drake.start(cs.$indicator[0]),document.removeEventListener("mousemove",i,!1),document.addEventListener("mouseup",t,!1)},this);this.on("drag:cancel",function(){document.removeEventListener("mousemove",i,!1),this.drake.cancel()}),cs.$ic=Backbone.$('<div class="cs-indicator-container"></div>')},onBeforeRender:function(){this.scrollTopCache=Backbone.$("body").scrollTop(),Backbone.$("a").click(function(e){cs.preview.trigger("click:theme:a",e)}).attr("target","_blank")},onRender:function(){this.$el.append(cs.$ic),Backbone.$("html,body").scrollTop(this.scrollTopCache),this.$el.toggleClass("cs-editor-active",!0),this.$el.toggleClass("cs-editor-inactive",!1),this.$el.append(this.observerView.render().$el),_.defer(function(){cs.preview.trigger("responsive:text")})},toggleCollapse:function(e){this.$el.toggleClass("cs-editor-active",!e),this.$el.toggleClass("cs-editor-inactive",e)},toggleDragging:function(e,t){e||(cs.$indicator.detach(),t||this.trigger("drag:cancel")),this.$el.toggleClass("gu-unselectable",e),Backbone.$("body").toggleClass("cs-hide-cursor",e).toggleClass("cs-indicate-invisible",e)},autoScroll:function(e){if(!e.$el.visible(!0)){var t=Backbone.$(cs.config("scrollTopSelector")),n=t.length>0?t.outerHeight():0,i=e.$el.offset().top-n-27;Backbone.$("html,body").animate({scrollTop:i},700,"swing")}},onDestroy:function(){this.drake.destroy()}})},{"./observer.js":92}],94:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-skeleton-content-outer",template:"main/skeleton",childViewContainer:".cs-skeleton-items",getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},events:{"dragula:receive":"_receiveElement"},initialize:function(){this.collection=this.model.elements,this.hoverRender=_.debounce(this._hoverRender,45),this.hoverTarget=null,this.listenTo(this.collection,"sort",this.render);var t=e("../../utility/dragula-handlers");this.setupElementDragging(t),this.setupRowDragging(t),this.setupSectionDragging(t),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.listenTo(cs.global,"stop:dragging",function(){this.elementDrake.cancel(),cs.global.trigger("dragging",!1)}),this.listenTo(cs.events,"skeleton:hover",this.hover),this.listenTo(cs.global,"drag:existing:start",function(){function e(){document.removeEventListener("mouseup",e),_.defer(function(){cs.global.trigger("drag:existing:end")})}Backbone.$("#preview");document.addEventListener("mouseup",e)})},setupElementDragging:function(e){this.elementDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("cs-skeleton-container-column")||e.classList.contains("cs-elements"))},moves:function(e,t,n,i){return!!e.classList&&(e.classList.contains("cs-element-stub")&&!e.attributes.draggable||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout"))},accepts:function(e,t,n,i){return t.classList&&t.classList.contains("cs-elements")?!1:!!e.classList&&(e.classList.contains("cs-element-stub")||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout"))},copy:function(e,t){return!!e.classList&&e.classList.contains("cs-element-stub")},offset:function(e,t,n){return n.classList&&(n.classList.contains("cs-element-stub")&&(e.x=0,e.y=0),n.classList.contains("cs-skeleton-item")&&(e.x=0,e.y=Backbone.$(n).height()/2)),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0});this.elementDrake.on("cloned",e.editorCloned),this.elementDrake.on("dragend",e.skeletonEnd),this.elementDrake.on("drag",e.skeletonStart),this.elementDrake.on("cancel",e.cancel),this.elementDrake.on("remove",e.cancel),this.elementDrake.on("drop",e.drop),this.elementDrake.on("over",e.over),this.elementDrake.on("shadow",e.shadow),this.elementDrake.on("out",e.out),this.listenTo(cs.global,"incoming:element",function(e){cs.incoming={data:{_type:e},options:{},cid:"new:"+e}})},setupSectionDragging:function(e){this.sectionDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-items")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.section > .cs-skeleton-handle > .cs-skeleton-title")},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.section")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0]}),this.sectionDrake.on("dragend",e.skeletonEnd),this.sectionDrake.on("drag",e.skeletonStart),this.sectionDrake.on("cancel",e.cancel),this.sectionDrake.on("remove",e.cancel),this.sectionDrake.on("drop",e.drop),this.sectionDrake.on("over",e.over),this.sectionDrake.on("out",e.out)},setupRowDragging:function(e){this.rowDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-container-section")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.row > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.row")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0}),this.rowDrake.on("dragend",e.skeletonEnd),this.rowDrake.on("drag",e.skeletonStart),this.rowDrake.on("cancel",e.cancel),this.rowDrake.on("remove",e.cancel),this.rowDrake.on("drop",e.drop),this.rowDrake.on("over",e.over),this.rowDrake.on("out",e.out)},onRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar("update")},windowResize:function(){},toggleDragging:function(e,t){this.isDragging=e,this.$el.toggleClass("gu-unselectable",e);var t=t||"";if(this.$el.removeClass("dragging-section dragging-row dragging-column dragging-element"),this.$el.attr("data-element-type",t),e){var n=_.contains(["section","row","column"],t)?t:"element";this.$el.addClass("dragging-"+n),this.setHover(null)}else this.elementDrake.cancel(),this.rowDrake.cancel(),this.sectionDrake.cancel()},hover:function(e,t){if(this.isDragging)return this.setHover(null);if(e){if(!_.isNull(this.hoverTarget)&&this.hoverTarget.cid==t.cid)return;this.setHover(t)}else{if(_.isNull(this.hoverTarget)||this.hoverTarget.cid!=t.cid)return;this.setHover(null)}},setHover:function(e){this.hoverTarget=e,this.hoverRender()},_hoverRender:function(e){cs.events.trigger("skeleton:hover:toggle",this.hoverTarget&&this.hoverTarget.cid?this.hoverTarget.cid:null)},_receiveElement:function(e,t,n,i){e.stopPropagation(),_.defer(_.bind(this._placeElement,this),i?Backbone.$(i).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}}})},{"../../utility/dragula-handlers":28}],95:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({toggle:function(e){var t=this.$(e.target),n=this.$(t.attr("data-target")||e.preventDefault()||t.attr("href")),i=n.data("bs.collapse"),o=i?"toggle":t.data(),s=t.attr("data-parent"),r=s&&this.$(s);i&&i.transitioning||(r&&r.find('[data-toggle="collapse"][data-parent="'+s+'"]').not(t).addClass("collapsed"),t[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),jQuery.fn.collapse.call(n,o)},onClickBeforeInspect:function(e){e.target.className.indexOf("x-accordion-toggle")>=0&&this.toggle(e)}})},{}],96:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({elementEvents:{"click button.close":"closeButton"},closeButton:function(e){e.preventDefault()}})},{}],97:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:!1,childViewContainer:"@ui.root",className:"cs-preview-element-wrapper",attributes:function(){return{"data-element":this.model.get("_type")}},draggable:!0,htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!1,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},events:function(){var e={"click a":"_preventLinkout"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{click:"_click",mouseover:"_observeStart",mouseout:"_observeEnd"},this._setupAutoFocus()));var n=_.result(this,"draggable");return(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:dragend":"_dragEnd","dragula:mirror":"_dragMirror"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this.ignoredAttributes=["rank"],this._setupChildren(),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this._updateMarkup=_.debounce(_.bind(this.__updateMarkup,this),2),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model)),this.listenTo(this.model,"change",this._updateMarkupOnChange),this.listenTo(this.model,"remote:render",this._repaint),this.on("render",this._baseRender),this.listenTo(this.model,"observe:start",function(){cs.observer.trigger("start",this)}),this.listenTo(this.model,"observe:end",function(){cs.observer.trigger("end",this)}),this.on("render:template",this._onRenderTemplate),this.on("template:data:ready",function(e){this.once("render",function(){this.triggerMethod("construct:element",e)})}),this.triggerMethod("element:init"),this.listenTo(cs.global,"autoscroll",function(e){this.model&&this.model.cid==e&&cs.preview.trigger("autoscroll",this)}),this.listenTo(cs.events,"preview:resize",this.exposeVisibility)},_setupChildren:function(){this.model.definition.get("flags").dynamic_child&&(this.collection=this.model.elements,this.ignoredAttributes.push("elements")),this.model.definition.get("flags").child&&this.listenTo(this.model,"parent:change",function(){this._updateMarkup()})},resortView:function(){this._updateMarkup()},_updateMarkupOnChange:function(e){_.isEmpty(_.omit(e.changed,this.ignoredAttributes))||this._updateMarkup()},__updateMarkup:function(e){return this.remoteRender?void cs.render.triggerMethod("queue",this.model):e?this.render():this._repaint()},serializeData:function(){var e=CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),t=_.result(this,"elementData")||{};return _.defaults(_.extend(e,t),this.model.getDefaults())},attachElContent:function(e){return this.remoteRender&&(e=cs.render.getCache(this.model),_.isFunction(e)&&(e=CS.Mn.Renderer.render(e,this.serializeData()))),e&&(this.model.definition.get("flags").htmlhint&&(_.isEmpty(Cornerstone.Vendor.HTMLHint.verify(e,this.htmlhint))||(e=Backbone.$("<div>").text(e).html())),this.$el.html(e)),this},exposeVisibility:function(){var e=this.$el.outerHeight()<=0;this.$el.toggleClass("cs-invisible",e),this.triggerMethod("visibility:exposed",e)},onChildviewVisibilityExposed:function(e){this.exposeVisibility()},bindUIElements:function(){this.ui||(this.ui={}),CS.Mn.CompositeView.prototype.bindUIElements.apply(this,arguments);var e=this.$(".cs-inception");this.ui.root=e.length?e.parent():this.$el},_onRenderTemplate:function(){var e=this.$(".cs-inception");e.length&&e.detach()},_baseRender:function(){this.triggerMethod("before:shortcode:init"),window.xData.base.processElements(null,this.$el),cs.preview.trigger("responsive:text",this),this.triggerMethod("after:element:render"),this.remoteRender&&_.defer(_.bind(function(){this._emptyDetection()&&this.triggerMethod("render:empty")},this),0),_.defer(_.bind(this.exposeVisibility,this))},onRenderEmpty:function(){this._renderEmpty()},_renderEmpty:function(){var e=Backbone.$(CS.Mn.Renderer.render("empty-element",this.serializeData()));this.$el.append(e)},_emptyDetection:function(){return _.isFunction(this.emptyDetection)?this.emptyDetection():this.model.definition.get("flags").empty||this.model.definition.get("flags").no_height_check?!1:this.$el.shadowHeight()<1},_setupAutoFocus:function(){var e={},t=this.model.definition.get("ui");return t.autofocus?(_.each(t.autofocus,function(t,n){var i="click "+t;e[i]=function(){cs.global.trigger("auto:focus",n)}}),e):e},_preventLinkout:function(e){e.preventDefault()},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){this.$el.addClass("cs-dragging"),cs.incoming=this.model},_dragEnd:function(e){this.$el.removeClass("cs-dragging")},_dragMirror:function(e,t){Backbone.$(t).empty().append(Backbone.$(cs.elementIcon(this.model.get("_type"))))},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start")},_observeEnd:function(e){this.model.trigger("observe:end")}})},{}],98:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){_.defer(_.bind(function(){this.$(".x-card-outer").trigger("cs:setcardheight")},this)),this.$("a").click(function(e){e.preventDefault()})}})},{}],99:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,elementEvents:{"click svg.cs-custom-icon":"clickIcon","dragula:send":"sendElement","dragula:receive":"receiveElement","dragula:cancel":"dragCancel","dragula:over":"dragOver","dragula:out":"dragOut","dragula:shadow":"dragShadow","dragula:lift":"dragLift","dragula:source:over":"dragSourceOver","drop.h5s":"receiveNew","dragenter.h5s":"dragEnterH","dragover.h5s":"dragOverH"},initialize:function(){this.checkDragOverStart=_.once(this.dragOverStart),this.checkDragLeave=_.debounce(this.dragLeave,50),this.detachIndicator=_.debounce(this._detachIndicator,50),this.throttleSetDragIndicator=_.throttle(_.bind(this.setDragIndicator,this),125,{leading:!1,trailing:!1}),this.legacyBefore=null,this.$empty=Backbone.$(cs.template("empty-column")())},receiveElement:function(e,t,n,i){cs.observer.trigger("kill");var o=!_.isFunction(cs.incoming.toJSON),s=o?cs.incoming.data:cs.incoming.toJSON(),r=cs.incoming.cid,a=this.model.elements.create(s,_.clone(cs.incoming.options),{position:i?Backbone.$(i).index()-1:this.collection.length,replace:cs.incoming,after:function(e){cs.render.shadow(e,r)}});o&&cs.global.trigger("inspect",a),this.emptyClassCheck()},receiveNew:function(e){this.receiveElement(null,null,null,this.legacyBefore),cs.preview.trigger("dragging",!1)},dragOver:function(){this.$el.toggleClass("cs-receiving",!0)},dragOut:function(){this.$el.toggleClass("cs-receiving",!1)},dragCancel:function(){this.$empty.detach(),this.$el.removeClass("cs-empty")},dragShadow:function(){1===this.collection.length&&this.$el.children().length<=1&&this.emptyClassCheck(!0)},clickIcon:function(e){e.stopPropagation(),cs.global.trigger("nav:kylelements")},onRemoveChild:function(){this.emptyClassCheck()},onAddChild:function(e){this.emptyClassCheck(),e.triggerMethod("added:to:column")},emptyClassCheck:function(e){this.$empty.detach(),this.$el.removeClass("cs-empty"),(this.collection.isEmpty()||e)&&(this.$el.append(this.$empty),this.$el.addClass("cs-empty"),this.$(".cs-empty-column").removeAttr("style"))},dragOverStart:function(){this.$el.toggleClass("cs-receiving",!0),cs.observer.trigger("in",this,!0)},dragEnterH:function(){this.checkDragOverStart(),this.checkDragLeave()},dragOverH:function(e){this.checkDragOverStart(),this.checkDragLeave(),e.originalEvent.preventDefault&&e.originalEvent.preventDefault(),this.throttleSetDragIndicator(e.originalEvent.pageY)},dragLeave:function(){this.$el.toggleClass("cs-receiving",!1),this.checkDragOverStart=_.once(this.dragOverStart)},setDragIndicator:function(e){if(cs.$indicator.detach(),!(this.collection.length<=0)){var t=0,n=this.collection.find(_.bind(function(n){var i=this.children.findByModel(n);return i.$el.shadowHeight<1?!1:e>i.$el.offset().top+i.$el.outerHeight()/2?(++t,!1):!0},this));if(this.legacyBefore=null,this.collection.length==t)this.$el.append(cs.$indicator);else{var i=this.children.findByModel(n);this.legacyBefore=i.el,i.$el.before(cs.$indicator)}}},onElementInit:function(){},onConstructElement:function(e){classes=["x-column","x-sm"],styles={},classes.push("x-"+e.size.replace("/","-")),"none"!=e.text_align&&classes.push(cs.classMap("text_align",e.text_align)),_.isArray(padding=_.clone(e.padding))&&(padding.pop(),styles.padding=padding.join(" ")),_.isArray(borderWidth=_.clone(e.border_width))&&(borderWidth.pop(),"0px"!=_.unique(borderWidth)&&(styles["border-width"]=borderWidth.join(" "),styles["border-color"]=e.border_color,styles["border-style"]=e.border_style)),styles["background-color"]=""!=e.bg_color?e.bg_color:"transparent",""!=e.id&&this.$el.attr("id",e.id),classes.push(e["class"]),this.$el.attr("class",classes.join(" ")),delete classes,this.$el.removeAttr("style"),this.$el.css(styles),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),this.emptyClassCheck()},onRenderEmpty:function(){return!1}})},{}],100:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template("<div></div>"),remoteRender:!1,minHeight:10,onConstructElement:function(e){var t,n,i=this.$("div");t=["cs-empty-element","cs-gap"],n={},t=_.union(t,cs.classMap("visibility",e.visibility)),""!=e.id&&i.attr("id",e.id),t.push(this.model.get("class")),i.attr("class",t.join(" ")),i.removeAttr("style"),i.css(n),""!=e.style&&i.attr("style",i.attr("style")+e.style),i.css({padding:e.gap_size+" 0 0",margin:0,height:0,minHeight:this.minHeight+"px"})}})},{}],101:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({emptyDetection:function(){return!1},onAfterElementRender:function(){this.model.prevHeight&&(this.$(".cs-empty-element").height(this.model.prevHeight),this.model.prevHeight=!1),_.defer(_.bind(function(){$map=this.$(".x-map"),$map.length>0&&(this.model.prevHeight=$map.outerHeight())},this))}})},{}],102:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){}})},{}],103:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column"),accordion:e("./accordion"),alert:e("./alert"),card:e("./card"),"pricing-table":e("./pricing-table"),row:e("./row"),gap:e("./gap"),"google-map":e("./google-map"),line:e("./line"),slider:e("./slider"),tabs:e("./tabs"),"gravity-forms":e("./gravity-forms")}},{"./accordion":95,"./alert":96,"./card":98,"./column":99,"./gap":100,"./google-map":101,"./gravity-forms":102,"./line":104,"./pricing-table":105,"./row":106,"./section":107,"./slider":108,"./tabs":109}],104:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template('<hr class="x-hr">'),remoteRender:!1,onRender:function(){var e,t,n,i,o,s,r,a;e=this.$("hr"),t=["x-hr"],(n=this.model.get("visibility"))&&(t=_.union(t,n)),t.push(this.model.get("class")),e.attr("class",t.join(" ")),i=this.model.get("custom_id"),i&&e.attr("id",i),e.removeAttr("style"),o="",s=this.model.get("style"),a=this.model.get("line_height"),a&&(o+=" border-top-width:"+a+";"),r=this.model.get("line_color"),r&&(o+=" border-top-color:"+r+";"),s&&(o+=" "+s),e.attr("style",o),_.defer(function(){e.css({paddingBottom:e.css("marginBottom"),marginBottom:"0"})})}})},{}],105:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onRemoveChild:function(){this.updateColumnClass()},onAddChild:function(e){this.updateColumnClass()},updateColumnClass:function(){var e=this.$(".x-pricing-table"),t=["one-column","two-columns","three-columns","four-columns","five-columns"];if(t[this.collection.length-1]){var n=t[this.collection.length-1];e.hasClass(n)||e.removeClass(t.join(" ")).addClass(n)}else e.removeClass(t.join(" "))}})},{}],106:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,filter:function(e,t,n){return e.get("_active")},onConstructElement:function(e){var t,n,i,o,s,r;t=["x-container"],n={},e.inner_container&&t.push("max width"),
t=_.union(t,cs.classMap("visibility",e.visibility)),"none"!=e.text_align&&t.push(cs.classMap("text_align",e.text_align)),e.marginless_columns&&t.push("marginless-columns"),_.isArray(i=_.clone(e.padding))&&(i.pop(),n.padding=i.join(" ")),_.isArray(o=_.clone(e.margin))&&(o.pop(),n.margin=o.join(" ")),_.isArray(s=_.clone(e.border_width))&&(s.pop(),"0px"!=_.unique(s)&&(n["border-width"]=s.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),r=this.model.get("bg_color"),n["background-color"]=r?r:"transparent",""!=e.id&&this.$el.attr("id",e.id),t.push(e["class"]),this.$el.attr("class",t.join(" ")),delete t,this.$el.removeAttr("style"),this.$el.css(n),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style)}})},{}],107:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,onElementInit:function(){this.lazyDetectColorContrast=_.debounce(_.bind(this.detectColorContrast,this),25),this.lazyDetectImageContrast=_.debounce(_.bind(this.detectImageContrast,this),250),this.contrast={color:null,image:null,activeClass:null},this.listenTo(this.model,"change:bg_color",function(){this.contrast.color=null}),this.listenTo(this.model,"change:bg_image",function(){this.contrast.image=null})},onConstructElement:function(e){var t,n,i,o,s,r;switch(this.$el.attr("id","x-section-"+(this.modelIndex+1)),t=["x-section"],n={},i="",this.contrastClass&&t.push(this.contrastClass),t=_.union(t,cs.classMap("visibility",e.visibility)),"none"!=e.text_align&&t.push(cs.classMap("text_align",e.text_align)),e.bg_type){case"video":i="bg-video";break;case"image":i=e.bg_pattern_toggle?"bg-pattern":"bg-image",e.parallax&&t.push("parallax"),""!=e.bg_image&&(n.backgroundImage='url("'+e.bg_image+'")'),_.isNull(this.contrast.image)&&this.lazyDetectImageContrast(e.bg_image,e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent";break;case"color":i="bg-color",_.isNull(this.contrast.image)&&this.lazyDetectColorContrast(e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent"}i&&t.push(i),_.isArray(o=_.clone(e.padding))&&(o.pop(),n.padding=o.join(" ")),_.isArray(s=_.clone(e.margin))&&(s.pop(),n.margin=s.join(" ")),_.isArray(r=_.clone(e.border_width))&&(r.pop(),"0px"!=_.unique(r)&&(n["border-width"]=r.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),""!=e.id&&this.$el.attr("id",e.id),t.push(e["class"]),this.$el.attr("class",t.join(" ")),delete t,this.$el.removeAttr("style"),this.$el.css(n),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),_.defer(_.bind(function(){this.$el.hasClass("parallax")&&(csModernizr.touchevents?this.$el.css("background-attachment","scroll"):(this.$el.hasClass("bg-image")&&(speed=.1),this.$el.hasClass("bg-pattern")&&(speed=.3),speed&&this.$el.parallaxContentBand("50%",speed))),this.$el.hasClass("bg-video")&&this.$el.css({"background-image":'url("'+e.bg_video_poster+'")',"background-color":"white","background-size":"cover"})},this))},detectImageContrast:function(e,t){_.defer(_.bind(function(){return e&&""!=e?void window.RGBaster.colors(e,{success:_.bind(function(e){this.setContrastClass(e.dominant)},this)}):void this.detectColorContrast(t)},this))},detectColorContrast:function(e){e&&""!=e||(e="#ffffff"),this.setContrastClass(e)},setContrastClass:function(e){var t=new Cornerstone.Vendor.Color(e),n=t.getDistanceLuminosityFrom(new Cornerstone.Vendor.Color("#fff"))>10.5;this.contrast.activeClass=n?"cs-bg-dark":null,this.$el.toggleClass("cs-bg-dark",n)}})},{}],108:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({emptyDetection:function(){}})},{}],109:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onClickBeforeInspect:function(e){$target=jQuery(e.target),"tab"==$target.attr("data-toggle")&&jQuery.fn.tab.call($target,"show")}})},{}],110:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({childView:e("./settings-section"),events:{"click .cs-pane-section-toggle":"toggle"},toggle:function(e){var t=this.$(e.currentTarget),n=t.next(".cs-pane-section");return t.hasClass("active")?(t.removeClass("active"),n.slideUp("fast"),void cs.navigate.trigger("scrollbar:update")):(this.$(".cs-pane-section-toggle").removeClass("active"),t.addClass("active"),cs.navigate.trigger("scrollbar:update"),n.slideDown("fast"),void this.$(".cs-pane-section").not(".constant").not(n).slideUp("fast"))}})},{"./settings-section":112}],111:[function(e,t,n){var i=e("../controls/control-collection"),o=e("./settings-collection");t.exports=CS.Mn.LayoutView.extend({template:"settings/content",regions:{Controls:"#controls",Sections:"#sections"},initialize:function(){},onBeforeShow:function(){this.Controls.show(new i({collection:cs.component("settings").getPrimaryControls()})),this.Sections.show(new o({collection:cs.component("settings").getSettings()}))}})},{"../controls/control-collection":38,"./settings-collection":110}],112:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({template:"settings/section",className:"cs-settings-section",childViewContainer:"ul.cs-controls",getChildView:function(e){return cs.controlLookup(e.get("type"))},initialize:function(){this.collection=this.model.inspect.controls},onRender:function(){this.collection.isEmpty()&&this.$el.addClass("empty")},serializeData:function(){return _.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{_section_title:this.model.section.get("ui").title})}})},{}],113:[function(e,t,n){var i=e("../main/base-pane"),o=e("./settings-content"),s=e("../controls/control-collection");t.exports=i.extend({name:"settings",initialize:function(){this.listenTo(cs.global,"settings:ready",this.onShowContent)},onShowContent:function(){this.Content.show(cs.data.request("settings:ready")?new o:this.getLoadingView())},getLoadingView:function(){return new CS.Mn.ItemView({tagName:"ul",className:"cs-controls empty",template:_.template('<li class="cs-control-empty"><span class="title"><%= l18n(\'settings-loading\') %></span></li>')})},onOpenSubItem:function(){this.Sub.show(new s({collection:cs.component("inspector").getSecondaryControls()}))}})},{"../controls/control-collection":38,"../main/base-pane":88,"./settings-content":111}],114:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:"main/skeleton-item",childViewContainer:".cs-skeleton-container",duplicatable:function(){var e=this.model.definition.get("flags");return e&&!e.child},deletable:function(){return _.result(this,"duplicatable")},eraseable:!1,manageable:!1,collapsible:!1,className:function(){var e=["cs-skeleton-item"],t=this.model.get("_type");_.contains(["section","row","column"],t)?e.push("layout"):e.push("element"),e.push(t);var n=this.model.definition.get("flags");n&&n.child&&e.push("is-child");var i=_.result(this,"skeletonClasses");return _.isArray(i)&&(e=e.concat(i)),e.join(" ")},attributes:function(){return{"data-element-type":this.model.get("_type")}},events:function(){var e={"click .cs-skeleton-controls button":"clickControl"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{"click > .cs-skeleton-handle":"_click","mouseover > .cs-skeleton-handle":"_observeStart","mouseout > .cs-skeleton-handle":"_observeEnd"}));var n=_.result(this,"draggable");(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:cancel":"_dragEnd"}));var i=_.result(this,"receiver");return(i||_.isUndefined(i))&&(e=_.extend(e,{"dragula:receive":"_receiveElement","dragula:over":"_dragOver","dragula:out":"_dragOut"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this.collection=this.model.elements,this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(cs.events,"skeleton:hover:toggle",this.hoverToggle),this.listenTo(cs.events,"skeleton:dragging",function(e){e||this.$el.removeClass("cs-receiving")}),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model))},serializeData:function(){var e="",t="",n=[],i=this.model.get("_type");switch(i){case"section":e=cs.l18n("section-format").replace("%s",this.model.get("title"));break;case"row":e=cs.l18n("row-numeric").replace("%s",this.model.getIndex()+1);break;case"column":e=cs.l18n("column-format").replace("%s",this.model.get("size"));break;default:t=cs.elementIcon(i),e=this.model.definition.get("ui").title}_.result(this,"manageable")&&n.push({action:"managelayout",icon:"bars",tooltip:cs.l18n("tooltip-manage-layout")}),_.result(this,"duplicatable")&&n.push({action:"duplicate",icon:"copy",tooltip:cs.l18n("tooltip-copy")}),_.result(this,"eraseable")&&n.push({action:"erase",icon:"eraser",tooltip:cs.l18n("tooltip-erase")}),_.result(this,"deletable")&&n.push({action:"delete",icon:"trash-o",tooltip:cs.l18n("tooltip-delete")});_.clone(_.result(this,"controls"));return _.result(this,"collapsible")&&n.push({action:"collapse",icon:"caret-down",iconAlt:"caret-up",persist:!0}),this.tooltipText=e,_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{title:t+e,controls:n})},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){e.stopPropagation(),cs.incoming=this.model},_dragEnd:function(e){cs.incoming=!1},_dragOver:function(e){e.stopPropagation(),this.$el.toggleClass("cs-receiving",!0)},_dragOut:function(e){this.$el.toggleClass("cs-receiving",!1)},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),cs.events.trigger("skeleton:hover",!0,this)},_observeEnd:function(e){this.model.trigger("observe:end"),cs.events.trigger("skeleton:hover",!1,this)},_receiveElement:function(e,t,n,i){e.stopPropagation(),this.triggerMethod("receive:element",e,t,n,i),_.defer(_.bind(this._placeElement,this),i?Backbone.$(i).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}},onRender:function(){this.$el.toggleClass("collapsed",!!this.model.getMeta("skeleton_collapsed"))},clickControl:function(e){e.stopPropagation();var t=this.$(e.currentTarget).data("action");this.triggerMethod("control:"+t)},onControlManagelayout:function(){_.result(this,"manageable")&&cs.events.trigger("inspect:layout",this.model,{navigate:!0})},onControlDuplicate:function(){_.result(this,"duplicatable")&&cs.global.trigger("element:duplicate",this.model)},onControlDelete:function(){_.result(this,"deletable")&&cs.global.trigger("element:delete",this.model)},onControlErase:function(){_.result(this,"eraseable")&&cs.global.trigger("element:erase",this.model)},onControlCollapse:function(){if(_.result(this,"collapsible")){var e=!this.model.getMeta("skeleton_collapsed");this.$el.toggleClass("collapsed",e);this.model.setMeta("skeleton_collapsed",e)}},collapseHover:function(e){e.stopPropagation()},hoverToggle:function(e){this.$el.toggleClass("hover",e==this.cid)}})},{}],115:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,duplicatable:!1,deletable:!1,eraseable:!0,elementEvents:{"dragula:drop":"updatePosition"},skeletonClasses:function(){return["size-"+this.model.get("size").replace("/","-")]},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},_dragLift:function(e){e.stopPropagation()}})},{}],116:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column")}},{"./column":115,"./row":117,"./section":118}],117:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!1,manageable:!0,collapsible:!0,childViewContainer:".cs-skeleton-container-inner",elementEvents:{"recieve:element":"_receiveElement","dragula:lift:child":"liftColumn"},filter:function(e,t,n){return e.get("_active")},initialize:function(){this.equalize=_.debounce(_.bind(this._equalize,this),1)},onRender:function(){this.setupDrake(),this._equalize(),this.equalize()},onChildviewUpdatePosition:function(e,t,n,i){this.equalize(),_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},setupDrake:function(){this.drake&&this.drake.destroy();var t=this.$(".cs-skeleton-container-inner");this.drake=Cornerstone.Vendor.dragula({offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},accepts:function(e,t,n,i){return Backbone.$(e).is(".cs-skeleton-item.column")},moves:function(e,t,n,i){return Backbone.$(n).is(".cs-skeleton-item.column > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},direction:"horizontal",revertOnSpill:!1,mirrorContainer:Backbone.$("#before")[0],containers:[t[0]]});var n=e("../../utility/dragula-handlers");this.drake.on("drag",n.skeletonStart),this.drake.on("dragend",n.skeletonEnd),this.drake.on("drop",n.drop)},onChildviewReceiveElement:function(){this._equalize()},_equalize:function(){this.$el.equalize({equalize:"outerHeight",children:".cs-skeleton-container-column",reset:!0,offset:this.$(".cs-skeleton-handle").outerHeight()-1})},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),this.$el.hasClass("cs-receiving")||cs.events.trigger("skeleton:hover",!0,this)},liftColumn:function(){this.$el.addClass("cs-receiving")},onDestroy:function(){this.drake.destroy()},onChildviewRender:function(){this._equalize(),this.equalize()},_receiveElement:function(e){e.stopPropagation()}})},{"../../utility/dragula-handlers":28}],118:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,collapsible:!0,initialize:function(){this.listenTo(this.model,"change:title",this.updateTitle)},updateTitle:function(e,t){this.$("> .cs-skeleton-handle > .cs-skeleton-title").html(cs.l18n("section-format").replace("%s",t))}})},{}],119:[function(require,module,exports){var templates={};templates["controls/base"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n",ui.title&&(__p+='\n<div class="cs-control-header">\n  <label ',ui.tooltip&&(__p+=' data-tooltip-message="'+(null==(__t=ui.tooltip)?"":__t)+'" '),__p+=">"+(null==(__t=ui.title)?"":__t)+"</label>\n</div>\n"),__p+='\n<input type="hidden" value="">\n'+(null==(__t=render(controlTemplate,arguments[0]))?"":__t)+"\n",ui.message&&(__p+='\n<div class="cs-control-footer">\n  <span>'+(null==(__t=ui.message)?"":__t)+"</span>\n</div>\n");return __p},templates["controls/choose"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-choose cols-'+(null==(__t=options.columns)?"":__t)+'">\n	',_.each(options.choices,function(e){__p+='\n  <li data-choice="'+(null==(__t=e.value)?"":__t)+'">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=e.icon)?"":__t)+'" ',e.tooltip&&(__p+='title="'+(null==(__t=e.tooltip)?"":__t)+'"'),__p+="></i>\n ",e.label&&(__p+="<span>"+(null==(__t=e.label)?"":__t)+"</span>"),__p+="\n  </li>\n  "}),__p+="\n</ul>";return __p},templates["controls/color"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+="\n<input type=\"text\" class='cs-color-input'/>";return __p},templates["controls/column-layout"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-column-layout">\n  <li class="prefab" data-layout="1/1"><span class="cs-1-1">1/1</span></li>\n  <li class="prefab" data-layout="1/2 + 1/2"><span class="cs-1-2">1/2</span><span class="cs-1-2">1/2</span></li>\n  <li class="prefab" data-layout="1/3 + 2/3" ><span class="cs-1-3">1/3</span><span class="cs-2-3">2/3</span></li>\n  <li class="prefab" data-layout="2/3 + 1/3"><span class="cs-2-3">2/3</span><span class="cs-1-3">1/3</span></li>\n  <li class="prefab" data-layout="1/3 + 1/3 + 1/3"><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span></li>\n  <li class="prefab" data-layout="1/4 + 1/4 + 1/4 + 1/4"><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span></li>\n  <li class="prefab" data-layout="1/5 + 1/5 + 1/5 + 1/5 + 1/5"><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span></li>\n  <li class="custom"><span class="cs-1-1 custom"><span>'+(null==(__t=cs.l18n("columns-layout-custom"))?"":__t)+'</span></span></li>\n</ul>\n<input type="text" id="column-layout" value="'+(null==(__t=_column_layout)?"":__t)+'">';return __p},templates["controls/column-order-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle"><span>'+(null==(__t=size)?"":__t)+"</span></span>";return __p},templates["controls/column-order"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-column-order"></ul>';return __p},templates["controls/custom-markup"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+=null==(__t=message)?"":__t;return __p},templates["controls/date"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<input type="text" class=\'cs-date-input\'/>\n<div class="cs-date-container">\n\n<div class="cs-date-picker-entry"></div>\n\n	<div class="cs-date-format">\n		<div class="cs-date-format-label">Select a Format<select tabindex="-1"></select></div>\n	</div>\n\n</div>\n';return __p},templates["controls/default"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<span>"+(null==(__t=debug("Control<strong>"+controlType+"</strong> could not be found."))?"":__t)+"</span>";return __p},templates["controls/dimensions"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-dimensions">\n  <li><input data-edge="top"    type="text"><span>'+(null==(__t=l18n("dimensions-top"))?"":__t)+'</span></li>\n  <li><input data-edge="right"  type="text"><span>'+(null==(__t=l18n("dimensions-right"))?"":__t)+'</span></li>\n  <li><input data-edge="bottom" type="text"><span>'+(null==(__t=l18n("dimensions-bottom"))?"":__t)+'</span></li>\n  <li><input data-edge="left"   type="text"><span>'+(null==(__t=l18n("dimensions-left"))?"":__t)+'</span></li>\n  <li>\n    <button class="cs-link-dimensions">\n      <i class="cs-icon link" data-cs-icon="&#xf0c1;" title="'+(null==(__t=l18n("dimensions-unlink"))?"":__t)+'"></i>\n<i class="cs-icon unlink" data-cs-icon="&#xf127;" title="'+(null==(__t=l18n("dimensions-link"))?"":__t)+'"></i>\n    </button>\n  </li>\n</ul>';return __p},templates["controls/expand-control-button"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<button class="cs-expand-control">\n  <span class="dashicons dashicons-editor-expand"></span>'+(null==(__t=cs.l18n("expand-control"))?"":__t)+"\n</button>";return __p},templates["controls/icon-choose-item"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li title="'+(null==(__t=choice)?"":__t)+'" data-choice="'+(null==(__t=choice)?"":__t)+'" data-choices="'+(null==(__t=choices)?"":__t)+'"><i class="cs-icon" data-cs-icon="&#x'+(null==(__t=code)?"":__t)+'"></i></li>';return __p},templates["controls/icon-choose"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='\n<div class="cs-icons-outer',options.expandable&&print(" cs-expandable"),__p+='">\n	<div class="cs-search-section">\n		<div class="cs-search">\n			<input class="cs-search-input" type="search" placeholder="Search Icons">\n			<i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i>\n</div>\n	</div>\n	<div class="cs-icons-inner">\n	<ul class="cs-choose single"></ul>\n	</div>\n	',options.expandable&&print(render("controls/expand-control-button")),__p+="\n</div>\n";return __p},templates["controls/image"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-image">\n	<i class="cs-icon add" data-cs-icon="'+(null==(__t=fontIcon("plus-circle"))?"":__t)+'"></i>\n<i class="cs-icon remove" data-cs-icon="'+(null==(__t=fontIcon("times-circle"))?"":__t)+'"></i>\n</div>';return __p},templates["controls/info-box"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)ui.title&&(__p+="<h4>"+(null==(__t=ui.title)?"":__t)+"</h4>"),__p+="\n",ui.message&&(__p+="<p>"+(null==(__t=ui.message)?"":__t)+"</p>");return __p},templates["controls/number"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div>\n	<input type="number" value="">\n	',options.units&&(__p+="\n		<span>"+(null==(__t=options.units)?"":__t)+"</span>\n	"),__p+="\n</div>";return __p},templates["controls/select"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<select>\n	",_.each(options.choices,function(e){__p+='\n		<option value="'+(null==(__t=e.value)?"":__t)+'" >'+(null==(__t=e.label)?"":__t)+"</option>\n	"}),__p+="\n</select>";return __p},templates["controls/sortable-empty"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle"><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("plus-square"))?"":__t)+'"></i><span>Add</span></span>';return __p},templates["controls/sortable-item-wide"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle">'+(null==(__t=title)?"":__t)+'</span>\n<div class="controls">\n  <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button>\n  <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button>\n</div>\n<div class="controls extra">\n  <button class="action3 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[2].icon))?"":__t)+'" title="'+(null==(__t=actions[2].tooltip)?"":__t)+'"></button>\n</div>';return __p},templates["controls/sortable-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="handle">'+(null==(__t=title)?"":__t)+'</span>\n<div class="controls">\n  <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button>\n  <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button>\n</div>';return __p},templates["controls/sortable"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<ul class="cs-sortable"></ul>\n',canAdd&&!empty&&(__p+='\n<button class="cs-add-sortable-item">\n  <i class="cs-icon" data-cs-icon="&#xf0fe;"></i>\n<span>'+(null==(__t=cs.l18n("sortable-add"))?"":__t)+"</span>\n</button>\n");return __p},templates["controls/template-select"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<select>\n	",_.each(options.choices,function(e){__p+='\n<option value="'+(null==(__t=e.value)?"":__t)+'">'+(null==(__t=e.label)?"":__t)+"</option>\n	"}),__p+='\n</select>\n<button class="'+(null==(__t=options.templateType)?"":__t)+'">'+(null==(__t=ui.buttonText)?"":__t)+"</button>";return __p},templates["controls/text"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n<input "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+' type="text" value="">';return __p},templates["controls/textarea"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+="\n<textarea "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+"></textarea>\n",options.expandable&&print(render("controls/expand-control-button")),__p+="\n";return __p},templates["controls/title"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="cs-title ',options.showInspectButton&&(__p+="inspectable"),__p+='">\n	<input type="text" class="cs-title-input"></input>\n ',options.showInspectButton&&(__p+='\n<button class="cs-title-button" title="'+(null==(__t=l18n("tooltip-inspect"))?"":__t)+'"><i class="cs-icon" data-cs-icon="&#xf002;"></i></button>\n	'),__p+="\n</div>";return __p},templates["controls/toggle"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<ul class="cs-toggle">\n  <li class="on"><span>'+(null==(__t=l18n("controls-on"))?"":__t)+'</span></li>\n  <li class="off"><span>'+(null==(__t=l18n("controls-off"))?"":__t)+"</span></li>\n</ul>";return __p},templates["controls/wpselect"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-wp-select"></div>';return __p},templates["extra/confirm"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="'+(null==(__t=contentClass)?"":__t)+'">\n	',message&&(__p+='<p class="message">'+(null==(__t=message)?"":__t)+"</p>"),__p+="\n  ",yep&&(__p+='<button class="action yep sad">'+(null==(__t=yep)?"":__t)+"</button>"),__p+="\n  ",nope&&(__p+='<button class="action nope">'+(null==(__t=nope)?"":__t)+"</button>"),__p+="\n  ",subtext&&(__p+='<p class="subtext">'+(null==(__t=subtext)?"":__t)+"</p>"),__p+="\n</div>";return __p},templates["extra/expanded-control"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-expanded-content-inner"></div>\n<button class="cs-expanded-close">&times;</button>';return __p},templates["extra/home"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<p class="saved-last '+(null==(__t=savedLastClass)?"":__t)+'">'+(null==(__t=savedLastMessage)?"":__t)+'</p>\n<ul class="cs-controls">\n  <li class="cs-control cs-control-actions">\n    <ul class="cs-actions">\n      <li class="action new">\n        <a href="'+(null==(__t=dashboardEditUrl)?"":__t)+'">\n          <i class="cs-icon" data-cs-icon="&#xf19a;"></i>\n<span>'+(null==(__t=l18n("home-dashboard"))?"":__t)+'</span>\n        </a>\n      </li>\n      <li class="action view-site">\n        <a href="'+(null==(__t=frontEndUrl)?"":__t)+'">\n          <i class="cs-icon" data-cs-icon="&#xf14c;"></i>\n<span>'+(null==(__t=l18n("home-view-site"))?"":__t)+"</span>\n        </a>\n      </li>\n    </ul>\n  </li>\n</ul>";return __p},templates["extra/options"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+="\n";return __p},templates["extra/respond"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-respond-buttons">\n<button class="cs-icon xl" data-respond="xl" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></button>\n  <button class="cs-icon lg" data-respond="lg" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></button>\n  <button class="cs-icon md" data-respond="md" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button>\n  <button class="cs-icon sm" data-respond="sm" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button>\n  <button class="cs-icon xs" data-respond="xs" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></button>\n</div>\n<div class="cs-respond-labels">\n  <div class="xl" data-respond="xl" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-xl-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-xl-desc"))?"":__t)+'</span></div>\n  <div class="lg" data-respond="lg" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-lg-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-lg-desc"))?"":__t)+'</span></div>\n  <div class="md" data-respond="md" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-md-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-md-desc"))?"":__t)+'</span></div>\n  <div class="sm" data-respond="sm" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-sm-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-sm-desc"))?"":__t)+'</span></div>\n  <div class="xs" data-respond="xs" ><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-xs-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-xs-desc"))?"":__t)+"</span></div>\n</div>";return __p},templates["extra/save-complete"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<p class="message">'+(null==(__t=message)?"":__t)+"</p>\n";return __p},templates["inspector/blank-state"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n"+(null==(__t=cs.icon("interface/logo-flat-inspector"))?"":__t)+'\n<span class="title">'+(null==(__t=l18n("inspector-blank-pane-title"))?"":__t)+"</span>\n<span>"+(null==(__t=l18n("inspector-blank-pane-message"))?"":__t)+"</span>";return __p},templates["inspector/breadcrumbs"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)count>0&&(__p+='<button data-level="0" ',1==items.length&&print('class="disabled"'),__p+=">",print(1==items.length?_.first(items).title:_.first(items).label),__p+="</button>",_.each(_.rest(items),function(e,t){__p+='<span><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon(rtl?"angle-left":"angle-right"))?"":__t)+'"></i></span><button ',count==t+2&&print('class="disabled"'),__p+=' data-level="'+(null==(__t=t+1)?"":__t)+'" >'+(null==(__t=e.label)?"":__t)+"</button>"}));return __p},templates["inspector/column-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action manage-layout">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span>\n  </li>\n  <li class="action erase">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("eraser"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-erase"))?"":__t)+'</span>\n    <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-erase"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["inspector/element-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action duplicate">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("copy"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-duplicate"))?"":__t)+'</span>\n  </li>\n  <li class="action delete">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span>\n    <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["inspector/row-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action manage-layout">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span>\n  </li>\n  <li class="action delete">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i>\n<span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span>\n<span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span>\n  </li>\n</ul>";
return __p},templates["layout/actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n<li class="action new">\n<i class="cs-icon" data-cs-icon="&#xf0fe;"></i>\n    <span>'+(null==(__t=l18n("layout-add-section"))?"":__t)+'</span>\n  </li>\n  <li class="action templates">\n    <i class="cs-icon" data-cs-icon="&#xf15b;"></i>\n    <span>'+(null==(__t=l18n("layout-templates"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["library/element-stub"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<span class="icon">'+(null==(__t=icon)?"":__t)+'</span>\n<span class="name"><span>'+(null==(__t=ui.title)?"":__t)+"</span></span>";return __p},templates["library/search"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-search-section">\n  <div class="cs-search">\n    <input type="search" placeholder="'+(null==(__t=l18n("elements-search"))?"":__t)+'" id="elements-search">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i>\n  </div>\n</div>';return __p},templates["main/editor"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<header id="header" class="cs-editor-header"></header>\n<section id="pane"></section>\n<div id="skeleton" class="cs-editor-skeleton"></div>\n<footer id="footer" class="cs-editor-footer"></footer>\n<div id="expand" class="cs-editor-expansion"></div>';return __p},templates["main/extra"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-editor-extra">\n	<div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div>\n</div>';return __p},templates["main/footer"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<nav>\n  <button class="collapse cs-icon" data-cs-icon="'+(null==(__t=fontIcon("play-circle"))?"":__t)+'"></button>\n  <button class="home cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("home"))?"":__t)+'"></button>\n  <button class="help-text cs-icon" data-toggle="help:text" data-cs-icon="'+(null==(__t=fontIcon("info-circle"))?"":__t)+'"></button>\n  <button class="skeleton-mode cs-icon" data-toggle="skeleton:mode" data-cs-icon="'+(null==(__t=fontIcon("object-group"))?"":__t)+'"></button>\n  <button class="respond cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("mobile"))?"":__t)+'"></button>\n  <button class="save">'+(null==(__t=l18n("footer-button-save"))?"":__t)+'</button>\n</nav>\n<div class="cs-editor-extra">\n  <div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div>\n</div>';return __p},templates["main/header"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='\n<button class="layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'</button>\n<button class="elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'</button>\n<button class="inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+'</button>\n<button class="settings">'+(null==(__t=cs.icon("interface/nav-settings-solid"))?"":__t)+"</button>";return __p},templates["main/pane"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<h2>"+(null==(__t=heading)?"":__t)+'</h2>\n<div class="cs-pane-content-outer">\n	',paneTemplate&&(__p+="\n		"+(null==(__t=render(paneTemplate,arguments[0]))?"":__t)+"\n	"),__p+='\n  <div id="content" class="cs-pane-content-inner" style="right:0px;"></div>\n</div>\n<div class="cs-builder-sub '+(null==(__t=name)?"":__t)+'">\n  <button class="cs-builder-sub-back">\n    <i class="cs-icon" data-cs-icon="&#xf053;"></i> <span>'+(null==(__t=returnButtonText)?"":__t)+'</span>\n  </button>\n  <div class="cs-pane-content-outer">\n  	<div id="sub" class="cs-pane-content-inner"></div>\n  </div>\n</div>\n\n\n';return __p},templates["main/skeleton-item"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+='<div class="cs-skeleton-handle" >\n	<div class="cs-skeleton-title" >'+(null==(__t=title)?"":__t)+'</div>\n	<div class="cs-skeleton-controls">\n		',_.each(controls,function(e){var t=e.action+(e.persist?" persist":"");__p+='\n			<button class="'+(null==(__t=t)?"":__t)+' cs-icon" data-action="'+(null==(__t=e.action)?"":__t)+'" data-cs-icon="'+(null==(__t=fontIcon(e.icon))?"":__t)+'" ',e.iconAlt&&(__p+=' data-cs-icon-alt="'+(null==(__t=fontIcon(e.iconAlt))?"":__t)+'" '),__p+="></button>\n		"}),__p+="\n	</div>\n</div>\n",__p+="row"==_type?'\n<div class="cs-skeleton-container-outer">\n	<div class="cs-skeleton-container-inner cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div>\n</div>\n':'\n<div class="cs-skeleton-container cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div>\n',__p+="\n\n\n\n";return __p},templates["main/skeleton"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-skeleton-content-inner">\n	<div class="cs-skeleton-items"></div>\n</div>';return __p},templates["utility/htmlhint"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<p>"+(null==(__t=l18n("htmlhint-intro"))?"":__t)+"</p>\n<ul>",_.each(errors,function(e){__p+="\n  <li>"+(null==(__t=l18n("htmlhint-"+e))?"":__t)+"</li>\n"}),__p+="</ul>";return __p},templates["settings/actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action css">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("paint-brush"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("settings-css-editor"))?"":__t)+'</span>\n  </li>\n  <li class="action js">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("code"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("settings-js-editor"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["settings/content"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="controls"></div>\n<div id="sections"></div>';return __p},templates["settings/section"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<h3 class="cs-pane-section-toggle">'+(null==(__t=_section_title)?"":__t)+'</h3>\n<div class="cs-pane-section">\n	<ul class="cs-controls"></ul>\n</div>';return __p},templates["layout/sub-row/layout-sub-row"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="layout-row-controls" class="cs-pane-section controls"></div>\n<div id="layout-column-controls" class="cs-pane-section controls"></div>';return __p},templates["layout/sub-templates/layout-sub-template"]=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div id="layout-template-controls" class="cs-pane-section controls"></div>\n<div id="layout-template-sections" class="cs-pane-section sections"></div>';return __p},templates["layout/sub-templates/save-dialog"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-title">\n	<input type="text" class="cs-title-input" value="'+(null==(__t=title)?"":__t)+'"></input>\n</div>\n<ul class="cs-actions">\n  <li class="action download">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("download"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("templates-download"))?"":__t)+'</span>\n  </li>\n  <li class="action save">\n    <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("book"))?"":__t)+'"></i>\n    <span>'+(null==(__t=l18n("templates-save-library"))?"":__t)+'</span>\n  </li>\n</ul>\n<button class="close">&times;</button>';return __p},templates["layout/sub-templates/template-actions"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<ul class="cs-actions">\n  <li class="action save">\n    <i class="cs-icon" data-cs-icon="&#xf0c7;"></i>\n    <span>'+(null==(__t=l18n("templates-save"))?"":__t)+'</span>\n  </li>\n  <li class="action upload">\n    <i class="cs-icon" data-cs-icon="&#xf093;"></i>\n    <span>'+(null==(__t=l18n("templates-upload"))?"":__t)+"</span>\n  </li>\n</ul>";return __p},templates["layout/sub-templates/upload-dialog"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<input id="template-upload" type="file" name="blockUpload"/>\n<button class="process">'+(null==(__t=l18n("templates-upload-button"))?"":__t)+'</button>\n<button class="close">&times;</button>';return __p},module.exports=templates},{}],120:[function(require,module,exports){var templates={};templates["dragging-placeholder"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-dragging-placeholder">\n	<svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve">\n	  <g>\n	    <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/>\n	    <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/>\n	    <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/>\n	  </g>\n	</svg>\n</div>';return __p},templates["empty-column"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class="cs-empty-column">\n	<svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve">\n	  <g>\n	    <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/>\n	    <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/>\n	    <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/>\n	  </g>\n	</svg>\n</div>';return __p},templates["empty-element"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-empty-element">\n  <div class="cs-empty-element-icon">\n    '+(null==(__t=cs.elementIcon(_type))?"":__t)+"\n  </div>\n</div>";return __p},templates["empty-rows"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="\n"+(null==(__t=cs.icon("interface/logo-flat-muted"))?"":__t)+'\n<h2>Welcome to Cornerstone</h2>\n<p>Get started by adding sections to the <strong class="cs-empty-rows-layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'Layout</strong> pane in the sidebar or begin with a template. Click on your sections to add rows and alter column structure, then go to the <strong class="cs-empty-rows-elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'Elements</strong> pane and begin dragging in your items. Clicking on any element in the preview area takes you to the <strong class="cs-empty-rows-inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+"Inspector</strong> pane to alter its appearance. Happy building!</p>";return __p},templates.loading=function(obj){obj||(obj={});var __p="";Array.prototype.join;with(obj)__p+='\n<div class="cs-empty-element">\n  <div class="cs-empty-element-icon">\n    <i class="cs-icon cs-icon-loading" data-cs-icon="&#xf110;"></i>\n  </div>\n</div>';return __p},templates.observer=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="cs-observer-tooltip top left">'+(null==(__t=tooltip)?"":__t)+"</div>";return __p},module.exports=templates},{}],121:[function(e,t,n){"use strict";function i(e){var t=r[e];return t?t.lastIndex=0:r[e]=t=new RegExp(a+e+l,"g"),t}function o(e,t){var n=e.className;n.length?i(t).test(n)||(e.className+=" "+t):e.className=t}function s(e,t){e.className=e.className.replace(i(t)," ").trim()}var r={},a="(?:^|\\s)",l="(?:\\s|$)";t.exports={add:o,rm:s}},{}],122:[function(e,t,n){(function(n){"use strict";function i(e,t){function n(e){return-1!==ue.containers.indexOf(e)||ce.isContainer(e)}function i(e){var t=e?"remove":"add";o(k,t,"mousedown",T),o(k,t,"mouseup",R)}function a(e){var t=e?"remove":"add";o(k,t,"mousemove",S)}function v(e){var t=e?"remove":"add";o(k,t,"selectstart",$),o(k,t,"click",$)}function y(){i(!0),R({})}function $(e){ae&&e.preventDefault()}function T(e){te=e.clientX,ne=e.clientY;var t=1!==s(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,i=j(n);i&&(ae=i,a(),"mousedown"===e.type&&(m(n)?n.focus():e.preventDefault()))}}function S(e){if(ae){if(0===s(e))return void R({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ce.ignoreInputTextSelection){var t=b("clientX",e),n=b("clientY",e),i=x.elementFromPoint(t,n);if(m(i))return}var o=ae;a(!0),v(),L(),I(o);var l=r(G),c=ce.offset({x:b("pageX",e)-l.left,y:b("pageY",e)-l.top},e,G);Z=c.x,ee=c.y,w.add(se||G,"gu-transit"),H(),O(e)}}}function j(e){if(!(ue.dragging&&Q||n(e))){for(var t=e;g(e)&&n(g(e))===!1;){if(ce.invalid(e,t))return;if(e=g(e),!e)return}var i=g(e);if(i&&!ce.invalid(e,t)){var o=ce.moves(e,i,t,f(e));if(o)return{item:e,source:i}}}}function E(e){var t=j(e);t&&I(t)}function I(e){U(e.item,e.source)&&(se=e.item.cloneNode(!0),ue.emit("cloned",se,e.item,"copy")),K=e.source,G=e.item,ie=oe=f(e.item),ue.dragging=!0,ue.emit("drag",G,K)}function M(){return!1}function L(){if(ue.dragging){var e=se||G;D(e,g(e))}}function B(){ae=!1,a(!0),v(!0)}function R(e){if(B(),ue.dragging){var t=se||G,n=b("clientX",e),i=b("clientY",e),o=l(Q,n,i),s=z(o,n,i);s&&(se&&ce.copySortSource||!se||s!==K)?D(t,s):ce.removeOnSpill?N():V()}}function D(e,t){var n=g(e);se&&ce.copySortSource&&t===K&&n.removeChild(G),P(t)?ue.emit("cancel",e,K,K):ue.emit("drop",e,t,K,oe),A()}function N(){if(ue.dragging){var e=se||G,t=g(e);t&&t.removeChild(e),ue.emit(se?"cancel":"remove",e,t,K),A()}}function V(e){if(ue.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=se||G,i=g(n);i===K&&se&&i.removeChild(se);var o=P(i);o===!1&&!se&&t&&K.insertBefore(n,ie),o||t?ue.emit("cancel",n,K,K):ue.emit("drop",n,i,K,oe),A()}}function A(){var e=se||G;B(),X(),e&&w.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,le&&ue.emit("out",e,le,K),ue.emit("dragend",e),K=G=se=ie=oe=re=le=null}function P(e,t){var n;return n=void 0!==t?t:Q?oe:f(se||G),e===K&&n===ie}function z(e,t,i){function o(){var o=n(s);if(o===!1)return!1;var r=W(s,e),a=F(s,r,t,i),l=P(s,a);return l?!0:ce.accepts(G,s,K,a)}for(var s=e;s&&!o();)s=g(s);return s}function O(e){function t(e){ue.emit(e,c,le,K)}function n(){p&&t("over")}function i(){le&&t("out")}if(Q){e.preventDefault();var o=b("clientX",e),s=b("clientY",e),r=o-Z,a=s-ee;Q.style.left=r+"px",Q.style.top=a+"px";var c=se||G,u=l(Q,o,s),d=z(u,o,s),p=null!==d&&d!==le;(p||null===d)&&(i(),le=d,n());var h=g(c);if(d===K&&se&&!ce.copySortSource)return void(h&&h.removeChild(c));var m,v=W(d,u);if(null!==v)m=F(d,v,o,s);else{if(ce.revertOnSpill!==!0||se)return void(se&&h&&h.removeChild(c));m=ie,d=K}(null===m||m!==c&&m!==f(c)&&m!==oe)&&(oe=m,d.insertBefore(c,m),ue.emit("shadow",c,d,K))}}function Y(e){w.rm(e,"gu-hide")}function q(e){ue.dragging&&w.add(e,"gu-hide")}function H(){if(!Q){var e=G.getBoundingClientRect();Q=G.cloneNode(!0),Q.style.width=p(e)+"px",Q.style.height=h(e)+"px",w.rm(Q,"gu-transit"),w.add(Q,"gu-mirror"),ce.mirrorContainer.appendChild(Q),o(k,"add","mousemove",O),w.add(ce.mirrorContainer,"gu-unselectable"),ue.emit("cloned",Q,G,"mirror")}}function X(){Q&&(w.rm(ce.mirrorContainer,"gu-unselectable"),o(k,"remove","mousemove",O),g(Q).removeChild(Q),Q=null)}function W(e,t){for(var n=t;n!==e&&g(n)!==e;)n=g(n);return n===k?null:n}function F(e,t,n,i){function o(){var t,o,s,r=e.children.length;for(t=0;r>t;t++){if(o=e.children[t],s=o.getBoundingClientRect(),a&&s.left>n)return o;if(!a&&s.top>i)return o}return null}function s(){var e=t.getBoundingClientRect();return r(a?n>e.left+p(e)/2:i>e.top+h(e)/2)}function r(e){return e?f(t):t}var a="horizontal"===ce.direction,l=t!==e?s():o();return l}function U(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}var J=arguments.length;1===J&&Array.isArray(e)===!1&&(t=e,e=[]);var Q,K,G,Z,ee,te,ne,ie,oe,se,re,ae,le=null,ce=t||{};void 0===ce.moves&&(ce.moves=u),void 0===ce.accepts&&(ce.accepts=u),void 0===ce.invalid&&(ce.invalid=M),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=c),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=C),void 0===ce.offset&&(ce.offset=d);var ue=_({containers:ce.containers,start:E,end:L,cancel:V,remove:N,destroy:y,dragging:!1});return ce.removeOnSpill===!0&&ue.on("over",Y).on("out",q),i(),ue}function o(e,t,i,o){var s={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},r={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};n.navigator.msPointerEnabled&&y[t](e,r[i],o),y[t](e,s[i],o),y[t](e,i,o)}function s(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function r(e){var t=e.getBoundingClientRect();return{left:t.left+a("scrollLeft","pageXOffset"),top:t.top+a("scrollTop","pageYOffset")}}function a(e,t){return"undefined"!=typeof n[t]?n[t]:k.clientHeight?k[e]:C[e]}function l(e,t,n){var i,o=e||{},s=o.className;return o.className+=" gu-hide",i=x.elementFromPoint(t,n),o.className=s,i}function c(){return!1}function u(){return!0}function d(e){return e}function p(e){return e.width||e.right-e.left}function h(e){return e.height||e.bottom-e.top}function g(e){return e.parentNode===x?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName}function f(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function v(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,t){var n=v(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}var _=e("contra/emitter"),y=e("crossvent"),w=e("./classes"),x=document,k=x.documentElement,C=x.body;t.exports=i}).call(this,window||{})},{"./classes":121,"contra/emitter":130,crossvent:134}],123:[function(e,t,n){var i=function(e){function t(e,t){return Array(e+1).join(t||" ")}var n={};return n.version="0.9.13",n.release="20151030",n.rules={},n.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},n.addRule=function(e){n.rules[e.id]=e},n.verify=function(t,i){t=t.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(t,n){return i===e&&(i={}),n.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(t,n,o){"false"===o?o=!1:"true"===o&&(o=!0),i[n]=o===e?!0:o}),""}),(i===e||0===Object.keys(i).length)&&(i=n.defaultRuleset);var s,r=new o,a=new n.Reporter(t,i),l=n.rules;for(var c in i)s=l[c],s!==e&&i[c]!==!1&&s.init(r,a,i[c]);return r.parse(t),a.messages},n.format=function(e,n){n=n||{};var i=[],o={white:"",grey:"",red:"",reset:""};n.colors&&(o.white="[37m",o.grey="[90m",o.red="[31m",o.reset="[39m");var s=n.indent||0;return e.forEach(function(e){var n=40,r=n+20,a=e.evidence,l=e.line,c=e.col,u=a.length,d=c>n+1?c-n:1,p=a.length>c+r?c+r:u;n+1>c&&(p+=n-c+1),a=a.replace(/\t/g," ").substring(d-1,p),d>1&&(a="..."+a,d-=3),u>p&&(a+="..."),i.push(o.white+t(s)+"L"+l+" |"+o.grey+a+o.reset);var h=c-d,g=a.substring(0,h).match(/[^\u0000-\u00ff]/g);null!==g&&(h+=g.length),i.push(o.white+t(s)+t((l+"").length+3+h)+"^ "+o.red+e.message+" ("+e.rule.id+")"+o.reset)}),i},n}();"object"==typeof n&&n&&(n.HTMLHint=i),function(e){var t=function(){var e=this;e._init.apply(e,arguments)};t.prototype={_init:function(e,t){var n=this;n.html=e,n.lines=e.split(/\r?\n/);var i=e.match(/\r?\n/);n.brLen=null!==i?i[0].length:0,n.ruleset=t,n.messages=[]},error:function(e,t,n,i,o){this.report("error",e,t,n,i,o)},warn:function(e,t,n,i,o){this.report("warning",e,t,n,i,o)},info:function(e,t,n,i,o){this.report("info",e,t,n,i,o)},report:function(e,t,n,i,o,s){for(var r,a,l=this,c=l.lines,u=l.brLen,d=n-1,p=c.length;p>d&&(r=c[d],a=r.length,i>a&&p>n);d++)n++,i-=a,1!==i&&(i-=u);l.messages.push({type:e,message:t,raw:s,evidence:r,line:n,col:i,rule:{id:o.id,description:o.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+o.id}})}},e.Reporter=t}(i);var o=function(e){var t=function(){var e=this;e._init.apply(e,arguments)};return t.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},n=e.split(","),i=0;n.length>i;i++)t[n[i]]=!0;return t},parse:function(t){function n(t,n,i,o){var s=i-b+1;o===e&&(o={}),o.raw=n,o.pos=i,o.line=_,o.col=s,y.push(o),d.fire(t,o);for(var r;r=m.exec(n);)_++,b=i+m.lastIndex}var i,o,s,r,a,l,c,u,d=this,p=d._mapCdataTags,h=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,g=/\s*([\w\-:]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,m=/\r?\n/g,f=0,v=0,b=0,_=1,y=d._arrBlocks;for(d.fire("start",{pos:0,line:1,col:1});i=h.exec(t);)if(o=i.index,o>f&&(u=t.substring(f,o),a?c.push(u):n("text",u,f)),f=h.lastIndex,!(s=i[1])||(a&&s===a&&(u=c.join(""),n("cdata",u,v,{tagName:a,attrs:l}),a=null,l=null,c=null),a))if(a)c.push(i[0]);else if(s=i[4]){r=[];for(var w,x=i[5],k=0;w=g.exec(x);){var C=w[1],$=w[2]?w[2]:w[4]?w[4]:"",T=w[3]?w[3]:w[5]?w[5]:w[6]?w[6]:"";r.push({name:C,value:T,quote:$,index:w.index,raw:w[0]}),k+=w[0].length}k===x.length?(n("tagstart",i[0],o,{tagName:s,attrs:r,close:i[6]}),p[s]&&(a=s,l=r.concat(),c=[],v=f)):n("text",i[0],o)}else(i[2]||i[3])&&n("comment",i[0],o,{content:i[2]||i[3],"long":i[2]?!0:!1});else n("tagend",i[0],o,{tagName:s});t.length>f&&(u=t.substring(f,t.length),n("text",u,f)),d.fire("end",{pos:f,line:_,col:t.length-b+1})},addListener:function(t,n){for(var i,o=this._listeners,s=t.split(/[,\s]/),r=0,a=s.length;a>r;r++)i=s[r],o[i]===e&&(o[i]=[]),o[i].push(n)},fire:function(t,n){n===e&&(n={}),n.type=t;var i=this,o=[],s=i._listeners[t],r=i._listeners.all;s!==e&&(o=o.concat(s)),r!==e&&(o=o.concat(r));var a=i.lastEvent;null!==a&&(delete a.lastEvent,n.lastEvent=a),i.lastEvent=n;for(var l=0,c=o.length;c>l;l++)o[l].call(i,n)},removeListener:function(t,n){var i=this._listeners[t];if(i!==e)for(var o=0,s=i.length;s>o;o++)if(i[o]===n){i.splice(o,1);break}},fixPos:function(e,t){var n,i=e.raw.substr(0,t),o=i.split(/\r?\n/),s=o.length-1,r=e.line;return s>0?(r+=s,n=o[s].length+1):n=e.col+t,{line:r,col:n}},getMapAttrs:function(e){for(var t,n={},i=0,o=e.length;o>i;i++)t=e[i],n[t.name]=t.value;return n}},t}();"object"==typeof n&&n&&(n.HTMLParser=o),i.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(i){var o,s=i.tagName.toLowerCase(),r=e.getMapAttrs(i.attrs),a=i.col+s.length+1;"img"!==s||"alt"in r?("area"===s&&"href"in r||"input"===s&&"image"===r.type)&&("alt"in r&&""!==r.alt||(o="area"===s?"area[href]":"input[type=image]",t.warn("The alt attribute of "+o+" must have a value.",i.line,a,n,i.raw))):t.warn("An alt attribute must be present on <img> elements.",i.line,a,n,i.raw)})}}),i.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++){i=o[r];var l=i.name;l!==l.toLowerCase()&&t.error("The attribute name of [ "+l+" ] must be in lowercase.",e.line,s+i.index,n,i.raw)}})}}),i.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a={},l=0,c=s.length;c>l;l++)i=s[l],o=i.name,a[o]===!0&&t.error("Duplicate of attribute name [ "+i.name+" ] was found.",e.line,r+i.index,n,i.raw),a[o]=!0})}}),i.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,l=0,c=s.length;c>l;l++)if(i=s[l],o=i.value.match(a),null!==o){var u=escape(o[0]).replace(/%u/,"\\u").replace(/%/,"\\x");t.warn("The value of attribute [ "+i.name+" ] cannot contain an unsafe char [ "+u+" ].",e.line,r+i.index,n,i.raw)}})}}),i.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],(""!==i.value&&'"'!==i.quote||""===i.value&&"'"===i.quote)&&t.error("The value of attribute [ "+i.name+" ] must be in double quotes.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],""===i.quote&&""===i.value&&t.warn("The attribute [ "+i.name+" ] must have a value.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"csslint",description:"Scan css with csslint.",init:function(t,i,o){var s=this;t.addListener("cdata",function(t){if("style"===t.tagName.toLowerCase()){var r;if(r="object"==typeof n&&e?e("csslint").CSSLint.verify:CSSLint.verify,void 0!==o){var a=t.line-1,l=t.col-1;try{var c=r(t.raw,o).messages;c.forEach(function(e){var t=e.line;i["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,a+t,(1===t?l:0)+e.col,s,e.evidence)})}catch(u){}}}})}}),i.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(e,t){var n=this,i=function(o){"start"===o.type||"text"===o.type&&/^\s*$/.test(o.raw)||(("comment"!==o.type&&o.long===!1||/^DOCTYPE\s+/i.test(o.content)===!1)&&t.error("Doctype must be declared first.",o.line,o.col,n,o.raw),e.removeListener("all",i))};e.addListener("all",i)}}),i.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(e,t){function n(e){e.long===!1&&"doctype html"!==e.content.toLowerCase()&&t.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,o,e.raw)}function i(){e.removeListener("comment",n),e.removeListener("tagstart",i)}var o=this;e.addListener("all",n),e.addListener("tagstart",i)}}),i.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(e,t){function n(n){var i=e.getMapAttrs(n.attrs),a=i.type,l=n.tagName.toLowerCase();"head"===l&&(r=!0),r!==!0||"script"!==l||a&&s.test(a)!==!0||t.warn("The <script> tag cannot be used in a <head> tag.",n.line,n.col,o,n.raw)}function i(t){"head"===t.tagName.toLowerCase()&&(e.removeListener("tagstart",n),e.removeListener("tagend",i))}var o=this,s=/^(text\/javascript|application\/javascript)$/i,r=!1;e.addListener("tagstart",n),e.addListener("tagend",i)}}),i.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,t,n){var i=this,o="abs"===n?"absolute":"relative";e.addListener("tagstart",function(e){for(var n,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)if(n=s[a],"href"===n.name){("absolute"===o&&/^\w+?:/.test(n.value)===!1||"relative"===o&&/^https?:\/\//.test(n.value)===!0)&&t.warn("The value of the href attribute [ "+n.value+" ] must be "+o+".",e.line,r+n.index,i,n.raw);break}})}}),i.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)i=s[a],o=i.name,/^(id|class)$/i.test(o)&&/(^|[-\_])ad([-\_]|$)/i.test(i.value)&&t.warn("The value of attribute "+o+" cannot use the ad keyword.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,t,n){var i,o=this,s={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if(i="string"==typeof n?s[n]:n,i&&i.regId){var r=i.regId,a=i.message;e.addListener("tagstart",function(e){for(var n,i=e.attrs,s=e.col+e.tagName.length+1,l=0,c=i.length;c>l;l++)if(n=i[l],"id"===n.name.toLowerCase()&&r.test(n.value)===!1&&t.warn(a,e.line,s+n.index,o,n.raw),"class"===n.name.toLowerCase())for(var u,d=n.value.split(/\s+/g),p=0,h=d.length;h>p;p++)u=d[p],u&&r.test(u)===!1&&t.warn(a,e.line,s+n.index,o,u)})}}}),i.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,t){var n=this,i={};e.addListener("tagstart",function(e){for(var o,s,r=e.attrs,a=e.col+e.tagName.length+1,l=0,c=r.length;c>l;l++)if(o=r[l],"id"===o.name.toLowerCase()){s=o.value,s&&(void 0===i[s]?i[s]=1:i[s]++,i[s]>1&&t.error("The id value [ "+s+" ] must be unique.",e.line,a+o.index,n,o.raw));break}})}}),i.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o,s=e.attrs,r=e.col+e.tagName.length+1,a=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,c=s.length;c>l;l++)i=s[l],o=i.name.toLowerCase(),a.test(o)===!0?t.warn("Inline script [ "+i.raw+" ] cannot be use.",e.line,r+i.index,n,i.raw):("src"===o||"href"===o)&&/^\s*javascript:/i.test(i.value)&&t.warn("Inline script [ "+i.raw+" ] cannot be use.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.attrs,s=e.col+e.tagName.length+1,r=0,a=o.length;a>r;r++)i=o[r],"style"===i.name.toLowerCase()&&t.warn("Inline style [ "+i.raw+" ] cannot be use.",e.line,s+i.index,n,i.raw)})}}),i.addRule({id:"jshint",description:"Scan script with jshint.",init:function(t,i,o){var s=this;t.addListener("cdata",function(r){if("script"===r.tagName.toLowerCase()){var a=t.getMapAttrs(r.attrs),l=a.type;if(void 0!==a.src||l&&/^(text\/javascript)$/i.test(l)===!1)return;var c;if(c="object"==typeof n&&e?e("jshint").JSHINT:JSHINT,void 0!==o){var u=r.line-1,d=r.col-1,p=r.raw.replace(/\t/g," ");try{var h=c(p,o);h===!1&&c.errors.forEach(function(e){var t=e.line;i.warn(e.reason,u+t,(1===t?d:0)+e.character,s,e.evidence)})}catch(g){}}}})}}),i.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(e,t,n){var i=this;e.addListener("text",function(o){for(var s,r=o.raw,a=/(^|\r?\n)([ \t]+)/g;s=a.exec(r);){var l=e.fixPos(o,s.index+s[1].length);"space"===n&&/^ +$/.test(s[2])===!1?t.warn("Please use space for indentation.",l.line,1,i,o.raw):"tab"===n&&/^\t+$/.test(s[2])===!1?t.warn("Please use tab for indentation.",l.line,1,i,o.raw):/ +\t|\t+ /.test(s[2])===!0&&t.warn("Do not mix tabs and spaces for indentation.",l.line,1,i,o.raw)}})}}),i.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(e,t){var n=this;e.addListener("text",function(i){for(var o,s=i.raw,r=/[<>]/g;o=r.exec(s);){var a=e.fixPos(i,o.index);t.error("Special characters must be escaped : [ "+o[0]+" ].",a.line,a.col,n,i.raw)}})}}),i.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var i,o=e.tagName,s=e.attrs,r=e.col+o.length+1,a=0,l=s.length;l>a;a++)i=s[a],(/^(img|script|embed|bgsound|iframe)$/.test(o)===!0&&"src"===i.name||"link"===o&&"href"===i.name||"object"===o&&"data"===i.name)&&""===i.value&&t.error("The attribute [ "+i.name+" ] of the tag [ "+o+" ] must have a value.",e.line,r+i.index,n,i.raw)})}}),i.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,n,e.raw)})}}),i.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,t){var n=this,i=[],o=e.makeMap("area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==o[t]||e.close||i.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var o=e.tagName.toLowerCase(),s=i.length-1;s>=0&&i[s].tagName!==o;s--);if(s>=0){for(var r=[],a=i.length-1;a>s;a--)r.push("</"+i[a].tagName+">");if(r.length>0){var l=i[i.length-1];t.error("Tag must be paired, missing: [ "+r.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",e.line,e.col,n,e.raw)}i.length=s}else t.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,n,e.raw)}),e.addListener("end",function(e){for(var o=[],s=i.length-1;s>=0;s--)o.push("</"+i[s].tagName+">");if(o.length>0){var r=i[i.length-1];t.error("Tag must be paired, missing: [ "+o.join("")+" ], open tag match failed [ "+r.raw+" ] on line "+r.line+".",e.line,e.col,n,"")}})}}),i.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,t){var n=this,i=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");e.addListener("tagstart",function(e){var o=e.tagName.toLowerCase();void 0!==i[o]&&(e.close||t.warn("The empty tag : [ "+o+" ] must be self closed.",e.line,e.col,n,e.raw))})}}),i.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,t){var n=this;e.addListener("tagstart,tagend",function(e){var i=e.tagName;i!==i.toLowerCase()&&t.error("The html element name of [ "+i+" ] must be in lowercase.",e.line,e.col,n,e.raw)})}}),i.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(e,t){function n(e){var t=e.tagName.toLowerCase();"head"===t?s=!0:"title"===t&&s&&(r=!0)}function i(s){var a=s.tagName.toLowerCase();if(r&&"title"===a){var l=s.lastEvent;("text"!==l.type||"text"===l.type&&/^\s*$/.test(l.raw)===!0)&&t.error("<title></title> must not be empty.",s.line,s.col,o,s.raw)}else"head"===a&&(r===!1&&t.error("<title> must be present in <head> tag.",s.line,s.col,o,s.raw),e.removeListener("tagstart",n),e.removeListener("tagend",i))}var o=this,s=!1,r=!1;e.addListener("tagstart",n),e.addListener("tagend",i)}})},{csslint:128,jshint:128}],124:[function(e,t,n){(function(){"use strict";var e,t,n,i=function(e,t){return function(){return e.apply(t,arguments)}};e=jQuery,t=function(){function e(){}return e.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"},e.transition=function(e){var t,n,i,o;t=e[0],n=this.transitions;for(o in n)if(i=n[o],null!=t.style[o])return i},e}(),n=function(){function n(t){null==t&&(t={}),this.html=i(this.html,this),this.$growl=i(this.$growl,this),this.$growls=i(this.$growls,this),this.animate=i(this.animate,this),this.remove=i(this.remove,this),this.dismiss=i(this.dismiss,this),this.present=i(this.present,this),this.cycle=i(this.cycle,this),this.close=i(this.close,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.render=i(this.render,this),this.settings=e.extend({},n.settings,t),this.$growls().attr("class",this.settings.location),this.render()}return n.settings={namespace:"growl",duration:3200,close:"&#215;",location:"default",style:"default",size:"medium"},n.growl=function(e){return null==e&&(e={}),this.initialize(),new n(e)},n.initialize=function(){return e("body:not(:has(#growls))").append('<div id="growls" />')},n.prototype.render=function(){var e;e=this.$growl(),this.$growls().append(e),null!=this.settings["static"]&&("undefined"!=typeof console&&null!==console&&"function"==typeof console.debug&&console.debug("DEPRECATION: static has been renamed to fix and will be removed in the next release"),this.settings.fixed=this.settings["static"]),this.settings.fixed?this.present():this.cycle()},n.prototype.bind=function(e){return null==e&&(e=this.$growl()),e.on("contextmenu",this.close).find("."+this.settings.namespace+"-close").on("click",this.close)},n.prototype.unbind=function(e){return null==e&&(e=this.$growl()),e.off("contextmenu",this.close).find("."+this.settings.namespace+"-close").off("click",this.close)},n.prototype.close=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=this.$growl(),t.stop().queue(this.dismiss).queue(this.remove)},n.prototype.cycle=function(){var e;return e=this.$growl(),e.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)},n.prototype.present=function(e){var t;return t=this.$growl(),this.bind(t),this.animate(t,this.settings.namespace+"-incoming","out",e)},n.prototype.dismiss=function(e){var t;return t=this.$growl(),this.unbind(t),this.animate(t,this.settings.namespace+"-outgoing","in",e)},n.prototype.remove=function(e){return this.$growl().remove(),e()},n.prototype.animate=function(e,n,i,o){var s;null==i&&(i="in"),s=t.transition(e),e["in"===i?"removeClass":"addClass"](n),e.offset().position,e["in"===i?"addClass":"removeClass"](n),null!=o&&(null!=s?e.one(s,o):o())},n.prototype.$growls=function(){return null!=this.$_growls?this.$_growls:this.$_growls=e("#growls")},n.prototype.$growl=function(){return null!=this.$_growl?this.$_growl:this.$_growl=e(this.html())},n.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"},n}(),e.growl=function(e){return null==e&&(e={}),n.growl(e)},e.growl.error=function(t){var n;return null==t&&(t={}),n={title:"Error!",style:"error"},e.growl(e.extend(n,t))},e.growl.notice=function(t){var n;return null==t&&(t={}),n={title:"Notice!",style:"notice"},e.growl(e.extend(n,t))},e.growl.warning=function(t){var n;return null==t&&(t={}),n={title:"Warning!",style:"warning"},e.growl(e.extend(n,t))}}).call(this)},{}],125:[function(e,t,n){!function(e){var t=e(window);e.fn.visible=function(e,n,i){if(!(this.length<1)){var o=this.length>1?this.eq(0):this,s=o.get(0),r=t.width(),a=t.height(),i=i?i:"both",l=n===!0?s.offsetWidth*s.offsetHeight:!0;if("function"==typeof s.getBoundingClientRect){var c=s.getBoundingClientRect(),u=c.top>=0&&c.top<a,d=c.bottom>0&&c.bottom<=a,p=c.left>=0&&c.left<r,h=c.right>0&&c.right<=r,g=e?u||d:u&&d,m=e?p||h:p&&h;if("both"===i)return l&&g&&m;if("vertical"===i)return l&&g;if("horizontal"===i)return l&&m}else{var f=t.scrollTop(),v=f+a,b=t.scrollLeft(),_=b+r,y=o.offset(),w=y.top,x=w+o.height(),k=y.left,C=k+o.width(),$=e===!0?x:w,T=e===!0?w:x,S=e===!0?C:k,j=e===!0?k:C;if("both"===i)return!!l&&v>=T&&$>=f&&_>=j&&S>=b;if("vertical"===i)return!!l&&v>=T&&$>=f;if("horizontal"===i)return!!l&&_>=j&&S>=b}}}}(jQuery)},{}],126:[function(e,t,n){function i(e){if(this.options={selector:"*",mouseEvents:["click","dblclick","mousedown","mouseup","mouseenter","mouseleave","mouseover"],usePolyfillIf:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;if(null!=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){var t=parseFloat(RegExp.$1);if(11>t)return!0}}return!1}},e){var t=this;$.each(e,function(e,n){t.options[e]=n})}this.options.usePolyfillIf()&&this.register_mouse_events()}i.initialize=function(e){return null==i.singleton&&(i.singleton=new i(e)),i.singleton},i.prototype.register_mouse_events=function(){$(document).on(this.options.mouseEvents.join(" "),this.options.selector,function(e){if("none"==$(this).css("pointer-events")){var t=$(this).css("display");$(this).css("display","none");var n=document.elementFromPoint(e.clientX,e.clientY);return t?$(this).css("display",t):$(this).css("display",""),e.target=n,$(n).trigger(e),!1}return!0})}},{}],127:[function(e,t,n){!function(e,t){"use strict";var n=function(){return document.createElement("canvas").getContext("2d")},i=function(e,t){var i=new Image,o=e.src||e;"data:"!==o.substring(0,5)&&(i.crossOrigin="Anonymous"),i.onload=function(){var e=n("2d");e.drawImage(i,0,0);var o=e.getImageData(0,0,i.width,i.height);t&&t(o.data)},i.src=o},o=function(e){return["rgb(",e,")"].join("")},s=function(e){return e.map(function(e){return o(e.name)})},r=5,a=10,l={};l.colors=function(e,t){t=t||{};var n=t.exclude||[],l=t.paletteSize||a;i(e,function(i){for(var a=e.width*e.height||i.length,c={},u="",d=[],p={dominant:{name:"",count:0},palette:Array.apply(null,new Array(l)).map(Boolean).map(function(e){return{name:"0,0,0",count:0}})},h=0;a>h;)if(d[0]=i[h],d[1]=i[h+1],d[2]=i[h+2],u=d.join(","),h+=4*r,0!==i[h+3]&&(u in c?c[u]=c[u]+1:c[u]=1,-1===n.indexOf(o(u)))){var g=c[u];g>p.dominant.count?(p.dominant.name=u,p.dominant.count=g):p.palette.some(function(e){return g>e.count?(e.name=u,e.count=g,!0):void 0})}if(t.success){var m=s(p.palette);t.success({dominant:o(p.dominant.name),secondary:m[0],palette:m})}})},e.RGBaster=e.RGBaster||l}(window)},{}],128:[function(e,t,n){},{}],129:[function(e,t,n){"use strict";var i=e("ticky");t.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},{ticky:132}],130:[function(e,t,n){"use strict";var i=e("atoa"),o=e("./debounce");t.exports=function(e,t){var n=t||{},s={};return void 0===e&&(e={}),e.on=function(t,n){return s[t]?s[t].push(n):s[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete s[t];else if(0===i)s={};else{var o=s[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(s[t]||[]).slice(0);return function(){var s=i(arguments),a=this||e;if("error"===t&&n.throws!==!1&&!r.length)throw 1===s.length?s[0]:s;return r.forEach(function(i){n.async?o(i,s,a):i.apply(a,s),i._once&&e.off(t,i)}),e}},e}},{"./debounce":129,atoa:131}],131:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],132:[function(e,t,n){var i,o="function"==typeof setImmediate;i=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=i},{}],133:[function(e,t,n){(function(e){function n(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}var i=e.CustomEvent;t.exports=n()?i:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window||{})},{}],134:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){return e.addEventListener(t,n,i)}function o(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function s(e,t,n,i){return e.removeEventListener(t,n,i)}function r(e,t,n){var i=u(e,t,n);return i?e.detachEvent("on"+t,i):void 0}function a(e,t,n){function i(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}function o(){return new p(t,{detail:n})}var s=-1===h.indexOf(t)?o():i();e.dispatchEvent?e.dispatchEvent(s):e.fireEvent("on"+t,s)}function l(e,t,i){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,i.call(e,o)}}function c(e,t,n){var i=u(e,t,n)||l(e,t,n);return v.push({wrapper:i,element:e,type:t,fn:n}),i}function u(e,t,n){var i=d(e,t,n);if(i){var o=v[i].wrapper;return v.splice(i,1),o}}function d(e,t,n){var i,o;for(i=0;i<v.length;i++)if(o=v[i],o.element===e&&o.type===t&&o.fn===n)return i}var p=e("custom-event"),h=e("./eventmap"),g=n.document,m=i,f=s,v=[];n.addEventListener||(m=o,f=r),t.exports={add:m,remove:f,fabricate:a}}).call(this,window||{})},{"./eventmap":135,"custom-event":133}],135:[function(e,t,n){(function(e){"use strict";var n=[],i="",o=/^on/;for(i in e)o.test(i)&&n.push(i.slice(2));t.exports=n}).call(this,window||{})},{}],136:[function(e,t,n){!function(e,n,i){function o(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return b[e.which]?b[e.which]:_[e.which]?_[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function c(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function u(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(){if(!v){v={};for(var e in b)e>95&&112>e||b.hasOwnProperty(e)&&(v[b[e]]=e)}return v}function p(e,t,n){return n||(n=d()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function h(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function g(e,t){var n,i,o,s=[];for(n=h(e),o=0;o<n.length;++o)i=n[o],w[i]&&(i=w[i]),t&&"keypress"!=t&&y[i]&&(i=y[i],s.push("shift")),u(i)&&s.push(i);return t=p(i,s,t),{key:i,modifiers:s,action:t}}function m(e,t){return null===e||e===n?!1:e===t?!0:m(e.parentNode,t)}function f(e){function t(e){e=e||{};var t,n=!1;for(t in y)e[t]?n=!0:y[t]=0;n||(k=!1)}function i(e,t,n,i,o,s){var a,l,c=[],d=n.type;if(!b._callbacks[e])return[];for("keyup"==d&&u(e)&&(t=[e]),a=0;a<b._callbacks[e].length;++a)if(l=b._callbacks[e][a],(i||!l.seq||y[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||r(t,l.modifiers))){var p=!i&&l.combo==o,h=i&&l.seq==i&&l.level==s;(p||h)&&b._callbacks[e].splice(a,1),c.push(l)}return c}function d(e,t,n,i){b.stopCallback(t,t.target||t.srcElement,n,i)||e(t,n)===!1&&(l(t),c(t))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=s(e);if(t)return"keyup"==e.type&&w===t?void(w=!1):void b.handleKey(t,a(e),e)}function h(){clearTimeout(_),_=setTimeout(t,1e3)}function m(e,n,i,o){function r(t){return function(){k=t,++y[e],h()}}function a(n){d(i,n,e),"keyup"!==o&&(w=s(n)),setTimeout(t,10)}y[e]=0;for(var l=0;l<n.length;++l){var c=l+1===n.length,u=c?a:r(o||g(n[l+1]).action);v(n[l],u,o,e,l)}}function v(e,t,n,o,s){b._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var r,a=e.split(" ");return a.length>1?void m(e,a,t,n):(r=g(e,n),b._callbacks[r.key]=b._callbacks[r.key]||[],i(r.key,r.modifiers,{type:r.action},o,e,s),void b._callbacks[r.key][o?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:o,level:s,combo:e}))}var b=this;if(e=e||n,!(b instanceof f))return new f(e);b.target=e,b._callbacks={},b._directMap={};var _,y={},w=!1,x=!1,k=!1;b._handleKey=function(e,n,o){var s,r=i(e,n,o),a={},l=0,c=!1;for(s=0;s<r.length;++s)r[s].seq&&(l=Math.max(l,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!=l)continue;c=!0,a[r[s].seq]=1,d(r[s].callback,o,r[s].combo,r[s].seq)}else c||d(r[s].callback,o,r[s].combo);var p="keypress"==o.type&&x;o.type!=k||u(e)||p||t(a),x=c&&"keydown"==o.type},b._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)v(e[i],t,n)},o(e,"keypress",p),o(e,"keydown",p),o(e,"keyup",p)}for(var v,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},w={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x=1;20>x;++x)b[111+x]="f"+x;for(x=0;9>=x;++x)b[x+96]=x;f.prototype.bind=function(e,t,n){var i=this;return e=e instanceof Array?e:[e],i._bindMultiple.call(i,e,t,n),i},f.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},f.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},f.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},f.prototype.stopCallback=function(e,t){var n=this;return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:m(t,n.target)?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},f.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},f.init=function(){var e=f(n);for(var t in e)"_"!==t.charAt(0)&&(f[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},f.init(),e.Mousetrap=f,"undefined"!=typeof t&&t.exports&&(t.exports=f),"function"==typeof define&&define.amd&&define(function(){return f})}(window,document)},{}],137:[function(e,t,n){!function(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,i,o,s){var r=this;return r.paused?!0:t[o]||t[s]?!1:n.call(r,e,i,o)},e.prototype.bindGlobal=function(e,n,i){var o=this;if(o.bind(e,n,i),e instanceof Array)for(var s=0;s<e.length;s++)t[e[s]]=!0;else t[e]=!0},e.init()}(Mousetrap)},{}],138:[function(e,t,n){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():e.NProgress=i()}(this,function(){function e(e,t,n){return t>e?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,i){var o;return o="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},o.transition="all "+n+"ms "+i,o}function i(e,t){var n="string"==typeof e?e:r(e);return n.indexOf(" "+t+" ")>=0}function o(e,t){var n=r(e),o=n+t;i(n,t)||(e.className=o.substring(1))}function s(e,t){var n,o=r(e);i(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function r(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var c=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,n;for(t in e)n=e[t],void 0!==n&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var i=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var o=l.render(!i),s=o.querySelector(c.barSelector),r=c.speed,a=c.easing;return o.offsetWidth,u(function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),d(s,n(t,r,a)),1===t?(d(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){d(o,{transition:"all "+r+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},r)},r)):setTimeout(e,r)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&l.start(),e++,t++,n.always(function(){t--,0===t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var i,s=n.querySelector(c.barSelector),r=e?"-100":t(l.status||0),u=document.querySelector(c.parent);return d(s,{transition:"all 0 linear",transform:"translate3d("+r+"%,0,0)"}),c.showSpinner||(i=n.querySelector(c.spinnerSelector),i&&a(i)),u!=document.body&&o(u,"nprogress-custom-parent"),u.appendChild(n),n},l.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&a(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var u=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),d=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,i=o.length,s=e.charAt(0).toUpperCase()+e.slice(1);i--;)if(n=o[i]+s,n in t)return n;return e}function n(n){return n=e(n),s[n]||(s[n]=t(n))}function i(e,t,i){t=n(t),e.style[t]=i}var o=["Webkit","O","Moz","ms"],s={};return function(e,t){var n,o,s=arguments;if(2==s.length)for(n in t)o=t[n],void 0!==o&&t.hasOwnProperty(n)&&i(e,n,o);else i(e,s[1],s[2])}}();return l})},{}],139:[function(e,t,n){"use strict";t.exports=e("./src/js/adaptor/jquery")},{"./src/js/adaptor/jquery":140}],140:[function(e,t,n){"use strict";function i(e){e.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||"undefined"==typeof t){var n=t;s.get(this)||o.initialize(this,n)}else{var i=t;"update"===i?o.update(this):"destroy"===i&&o.destroy(this)}return e(this)})}}var o=e("../main"),s=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],i);else{var r=window.jQuery?window.jQuery:window.$;"undefined"!=typeof r&&i(r)}t.exports=i},{"../main":146,"../plugin/instances":157}],141:[function(e,t,n){"use strict";function i(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function o(e,t){var n=e.className.split(" "),i=n.indexOf(t);i>=0&&n.splice(i,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):i(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):o(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],142:[function(e,t,n){"use strict";function i(e,t){return window.getComputedStyle(e)[t]}function o(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function s(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i=i.toString()+"px"),e.style[n]=i}return e}var r={};r.e=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?s(e,t):"undefined"==typeof n?i(e,t):o(e,t,n)},r.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],143:[function(e,t,n){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(i){return n&&i!==t?!0:(this.element.removeEventListener(e,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new i(e),this.eventElements.push(t)),t},o.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},o.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,n){var i=this.eventElement(e),o=function(e){i.unbind(t,o),n(e)};i.bind(t,o)},t.exports=o},{}],144:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],145:[function(e,t,n){"use strict";var i=e("./class"),o=e("./dom");n.toInt=function(e){return parseInt(e,10)||0},n.clone=function(e){if(null===e)return null;if("object"==typeof e){var t={};for(var n in e)t[n]=this.clone(e[n]);return t}return e},n.extend=function(e,t){var n=this.clone(e);for(var i in t)n[i]=this.clone(t[i]);return n},n.isEditable=function(e){return o.matches(e,"input,[contenteditable]")||o.matches(e,"select,[contenteditable]")||o.matches(e,"textarea,[contenteditable]")||o.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=i.list(e),n=0;n<t.length;n++){var o=t[n];0===o.indexOf("ps-")&&i.remove(e,o)}},n.outerWidth=function(e){return this.toInt(o.css(e,"width"))+this.toInt(o.css(e,"paddingLeft"))+this.toInt(o.css(e,"paddingRight"))+this.toInt(o.css(e,"borderLeftWidth"))+this.toInt(o.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){i.add(e,"ps-in-scrolling"),"undefined"!=typeof t?i.add(e,"ps-"+t):(i.add(e,"ps-x"),i.add(e,"ps-y"))},n.stopScrolling=function(e,t){i.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?i.remove(e,"ps-"+t):(i.remove(e,"ps-x"),i.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":141,"./dom":142}],146:[function(e,t,n){"use strict";var i=e("./plugin/destroy"),o=e("./plugin/initialize"),s=e("./plugin/update");t.exports={initialize:o,update:s,destroy:i}},{"./plugin/destroy":148,"./plugin/initialize":156,"./plugin/update":160}],147:[function(e,t,n){"use strict";t.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1}},{}],148:[function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/helper"),s=e("./instances");t.exports=function(e){var t=s.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),o.removePsClasses(e),s.remove(e))}},{"../lib/dom":142,"../lib/helper":145,"./instances":157}],149:[function(e,t,n){"use strict";function i(e,t){function n(e){return e.getBoundingClientRect()}var i=window.Event.prototype.stopPropagation.bind;t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",i),t.event.bind(t.scrollbarYRail,"click",function(i){var s=o.toInt(t.scrollbarYHeight/2),l=t.railYRatio*(i.pageY-window.pageYOffset-n(t.scrollbarYRail).top-s),c=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),u=l/c;0>u?u=0:u>1&&(u=1),a(e,"top",(t.contentHeight-t.containerHeight)*u),r(e),i.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",i),t.event.bind(t.scrollbarXRail,"click",function(i){var s=o.toInt(t.scrollbarXWidth/2),l=t.railXRatio*(i.pageX-window.pageXOffset-n(t.scrollbarXRail).left-s),c=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),u=l/c;0>u?u=0:u>1&&(u=1),a(e,"left",(t.contentWidth-t.containerWidth)*u-t.negativeScrollAdjustment),r(e),i.stopPropagation()})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":145,"../instances":157,"../update-geometry":158,"../update-scroll":159}],150:[function(e,t,n){"use strict";function i(e,t){function n(n){var o=i+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);0>o?t.scrollbarXLeft=0:o>s?t.scrollbarXLeft=s:t.scrollbarXLeft=o;var a=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",a)}var i=null,o=null,a=function(t){n(t.pageX-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarX,"mousedown",function(n){o=n.pageX,i=r.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(e,t){function n(n){var o=i+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);0>o?t.scrollbarYTop=0:o>s?t.scrollbarYTop=s:t.scrollbarYTop=o;var a=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",a)}var i=null,o=null,a=function(t){n(t.pageY-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarY,"mousedown",function(n){o=n.pageY,i=r.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var s=e("../../lib/dom"),r=e("../../lib/helper"),a=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);i(e,t),o(e,t)}},{"../../lib/dom":142,"../../lib/helper":145,"../instances":157,"../update-geometry":158,"../update-scroll":159}],151:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var i=!1;t.event.bind(e,"mouseenter",function(){i=!0}),t.event.bind(e,"mouseleave",function(){i=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(l){if((!l.isDefaultPrevented||!l.isDefaultPrevented())&&i){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;
if(c){for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(o.isEditable(c))return}var u=0,d=0;switch(l.which){case 37:u=-30;break;case 38:d=30;break;case 39:u=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:d=l.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=l.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=l.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}a(e,"top",e.scrollTop-d),a(e,"left",e.scrollLeft+u),r(e),s=n(u,d),s&&l.preventDefault()}})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":145,"../instances":157,"../update-geometry":158,"../update-scroll":159}],152:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function i(e){var t=e.deltaX,n=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof n)&&(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),[t,n]}function o(t,n){var i=e.querySelector("textarea:hover");if(i){var o=i.scrollHeight-i.clientHeight;if(o>0&&!(0===i.scrollTop&&n>0||i.scrollTop===o&&0>n))return!0;var s=i.scrollLeft-i.clientWidth;if(s>0&&!(0===i.scrollLeft&&0>t||i.scrollLeft===s&&t>0))return!0}return!1}function a(a){var c=i(a),u=c[0],d=c[1];o(u,d)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?r(e,"top",e.scrollTop-d*t.settings.wheelSpeed):r(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):r(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),l=!0):(r(e,"top",e.scrollTop-d*t.settings.wheelSpeed),r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),s(e),l=l||n(u,d),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var o=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":157,"../update-geometry":158,"../update-scroll":159}],153:[function(e,t,n){"use strict";function i(e,t){t.event.bind(e,"scroll",function(){s(e)})}var o=e("../instances"),s=e("../update-geometry");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":157,"../update-geometry":158}],154:[function(e,t,n){"use strict";function i(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function i(){c||(c=setInterval(function(){return s.get(e)?(a(e,"top",e.scrollTop+u.top),a(e,"left",e.scrollLeft+u.left),void r(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),o.stopScrolling(e)}var c=null,u={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?d=!0:(d=!1,l())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,l())}),t.event.bind(window,"mousemove",function(t){if(d){var n={x:t.pageX,y:t.pageY},s={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<s.left+3?(u.left=-5,o.startScrolling(e,"x")):n.x>s.right-3?(u.left=5,o.startScrolling(e,"x")):u.left=0,n.y<s.top+3?(s.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(e,"y")):n.y>s.bottom-3?(n.y-s.bottom+3<5?u.top=5:u.top=20,o.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():i()}})}var o=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/helper":145,"../instances":157,"../update-geometry":158,"../update-scroll":159}],155:[function(e,t,n){"use strict";function i(e,t,n,i){function a(n,i){var o=e.scrollTop,s=e.scrollLeft,r=Math.abs(n),a=Math.abs(i);if(a>r){if(0>i&&o===t.contentHeight-t.containerHeight||i>0&&0===o)return!t.settings.swipePropagation}else if(r>a&&(0>n&&s===t.contentWidth-t.containerWidth||n>0&&0===s))return!t.settings.swipePropagation;return!0}function l(t,n){r(e,"top",e.scrollTop-n),r(e,"left",e.scrollLeft-t),s(e)}function c(){y=!0}function u(){y=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function p(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function h(e){if(p(e)){w=!0;var t=d(e);f.pageX=t.pageX,f.pageY=t.pageY,v=(new Date).getTime(),null!==_&&clearInterval(_),e.stopPropagation()}}function g(e){if(!y&&w&&p(e)){var t=d(e),n={pageX:t.pageX,pageY:t.pageY},i=n.pageX-f.pageX,o=n.pageY-f.pageY;l(i,o),f=n;var s=(new Date).getTime(),r=s-v;r>0&&(b.x=i/r,b.y=o/r,v=s),a(i,o)&&(e.stopPropagation(),e.preventDefault())}}function m(){!y&&w&&(w=!1,clearInterval(_),_=setInterval(function(){return o.get(e)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(_):(l(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(_)},10))}var f={},v=0,b={},_=null,y=!1,w=!1;n&&(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",g),t.event.bind(e,"touchend",m)),i&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",g),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",g),t.event.bind(e,"MSPointerUp",m)))}var o=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e,t,n){var s=o.get(e);i(e,s,t,n)}},{"../instances":157,"../update-geometry":158,"../update-scroll":159}],156:[function(e,t,n){"use strict";var i=e("../lib/class"),o=e("../lib/helper"),s=e("./instances"),r=e("./update-geometry"),a=e("./handler/click-rail"),l=e("./handler/drag-scrollbar"),c=e("./handler/keyboard"),u=e("./handler/mouse-wheel"),d=e("./handler/native-scroll"),p=e("./handler/selection"),h=e("./handler/touch");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=s.add(e);n.settings=o.extend(n.settings,t),a(e),l(e),u(e),d(e),n.settings.useSelectionScroll&&p(e),(o.env.supportsTouch||o.env.supportsIePointer)&&h(e,o.env.supportsTouch,o.env.supportsIePointer),n.settings.useKeyboard&&c(e),r(e)}},{"../lib/class":141,"../lib/helper":145,"./handler/click-rail":149,"./handler/drag-scrollbar":150,"./handler/keyboard":151,"./handler/mouse-wheel":152,"./handler/native-scroll":153,"./handler/selection":154,"./handler/touch":155,"./instances":157,"./update-geometry":158}],157:[function(e,t,n){"use strict";function i(e){var t=this;t.settings=d.clone(l),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===a.css(e,"direction"),t.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,t.event=new c,t.ownerDocument=e.ownerDocument||document,t.scrollbarXRail=a.appendTo(a.e("div","ps-scrollbar-x-rail"),e),t.scrollbarX=a.appendTo(a.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarX.setAttribute("tabindex",0),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=d.toInt(a.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:d.toInt(a.css(t.scrollbarXRail,"top")),t.railBorderXWidth=d.toInt(a.css(t.scrollbarXRail,"borderLeftWidth"))+d.toInt(a.css(t.scrollbarXRail,"borderRightWidth")),a.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=d.toInt(a.css(t.scrollbarXRail,"marginLeft"))+d.toInt(a.css(t.scrollbarXRail,"marginRight")),a.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=a.appendTo(a.e("div","ps-scrollbar-y-rail"),e),t.scrollbarY=a.appendTo(a.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarY.setAttribute("tabindex",0),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=d.toInt(a.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:d.toInt(a.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?d.outerWidth(t.scrollbarY):null,t.railBorderYWidth=d.toInt(a.css(t.scrollbarYRail,"borderTopWidth"))+d.toInt(a.css(t.scrollbarYRail,"borderBottomWidth")),a.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=d.toInt(a.css(t.scrollbarYRail,"marginTop"))+d.toInt(a.css(t.scrollbarYRail,"marginBottom")),a.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}function o(e){return"undefined"==typeof e.dataset?e.getAttribute("data-ps-id"):e.dataset.psId}function s(e,t){"undefined"==typeof e.dataset?e.setAttribute("data-ps-id",t):e.dataset.psId=t}function r(e){"undefined"==typeof e.dataset?e.removeAttribute("data-ps-id"):delete e.dataset.psId}var a=e("../lib/dom"),l=e("./default-setting"),c=e("../lib/event-manager"),u=e("../lib/guid"),d=e("../lib/helper"),p={};n.add=function(e){var t=u();return s(e,t),p[t]=new i(e),p[t]},n.remove=function(e){delete p[o(e)],r(e)},n.get=function(e){return p[o(e)]}},{"../lib/dom":142,"../lib/event-manager":143,"../lib/guid":144,"../lib/helper":145,"./default-setting":147}],158:[function(e,t,n){"use strict";function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function o(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,r.css(t.scrollbarXRail,n);var i={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft,r.css(t.scrollbarYRail,i),r.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var s=e("../lib/class"),r=e("../lib/dom"),a=e("../lib/helper"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=r.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=r.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,a.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=a.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,a.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=a.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":141,"../lib/dom":142,"../lib/helper":145,"./instances":157,"./update-scroll":159}],159:[function(e,t,n){"use strict";var i,o,s=e("./instances"),r=document.createEvent("Event"),a=document.createEvent("Event"),l=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),h=document.createEvent("Event"),g=document.createEvent("Event"),m=document.createEvent("Event");r.initEvent("ps-scroll-up",!0,!0),a.initEvent("ps-scroll-down",!0,!0),l.initEvent("ps-scroll-left",!0,!0),c.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),h.initEvent("ps-x-reach-end",!0,!0),g.initEvent("ps-y-reach-start",!0,!0),m.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";if("top"===t&&0>=n)return e.scrollTop=0,void e.dispatchEvent(g);if("left"===t&&0>=n)return e.scrollLeft=0,void e.dispatchEvent(p);var f=s.get(e);return"top"===t&&n>=f.contentHeight-f.containerHeight?(e.scrollTop=f.contentHeight-f.containerHeight,void e.dispatchEvent(m)):"left"===t&&n>=f.contentWidth-f.containerWidth?(e.scrollLeft=f.contentWidth-f.containerWidth,void e.dispatchEvent(h)):(i||(i=e.scrollTop),o||(o=e.scrollLeft),"top"===t&&i>n&&e.dispatchEvent(r),"top"===t&&n>i&&e.dispatchEvent(a),"left"===t&&o>n&&e.dispatchEvent(l),"left"===t&&n>o&&e.dispatchEvent(c),"top"===t&&(e.scrollTop=i=n,e.dispatchEvent(u)),void("left"===t&&(e.scrollLeft=o=n,e.dispatchEvent(d))))}},{"./instances":157}],160:[function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/helper"),s=e("./instances"),r=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=s.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=o.toInt(i.css(t.scrollbarXRail,"marginLeft"))+o.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=o.toInt(i.css(t.scrollbarYRail,"marginTop"))+o.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),r(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":142,"../lib/helper":145,"./instances":157,"./update-geometry":158,"./update-scroll":159}]},{},[4])(4)})